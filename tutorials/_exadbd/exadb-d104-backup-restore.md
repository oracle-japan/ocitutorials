---
title: "104 : バックアップからリストアしよう"
excerpt: "ExaDB-D上で取得したバックアップからリストアする手順について紹介します。"
order: "2_104"
layout: single
header:
  teaser: "/exadbd/exadb-d104-backup-restore/teaser.png"
  overlay_image: "/exadbd/exadb-d104-backup-restore/teaser.png"
  overlay_filter: rgba(34, 66, 55, 0.7)
#link: https://apexapps.oracle.com/pls/apex/dbpm/r/livelabs/view-workshop?wid=797
---

<a id="anchor0"></a>

# はじめに
**Oracle Cloud Infrastructure Exadata Database Service on Dedicated Infrastructure (ExaDB-D)** では、自動バックアップ機能やオンデマンドバックアップにて取得したバックアップを利用する事で、最新時点やPoint in Time Recovery(PITR)の任意の時点まで復旧ができます。
また、バックアップ元のデータベースに対してリストアするだけでなく、別DBシステム上にリストアする事も可能です。
ここでは、OCI コンソールからリストアする手順についてご紹介します。

**目次 :**
+ [1. バックアップ元のデータベースに対してリストア](#1-バックアップ元のデータベースに対してリストア)
+ [2. バックアップから新規データベースとしてリストア](#2-バックアップから新規データベースとしてリストア)
+ [3. オンデマンド・バックアップを使用したリストア](#3-オンデマンドバックアップを使用したリストア)

**前提条件 :**
+ [101 : ExaDB-Dを使おう](/ocitutorials/exadbd/exadb-d101-create-exadb-d){:target="_blank"}を通じてExaDB-Dの作成が完了していること

+ [103 : 自動バックアップを設定しよう](/ocitutorials/exadbd/exadb-d103-automatic-backup){:target="_blank"}を通じてバックアップを取得していること

**所要時間 :** 約1時間　※環境によって異なるため、参考値です

<BR>

# 1. バックアップ元のデータベースに対してリストア

まずはバックアップ元のデータベースに対してリストアしてみましょう。
リストア方法には下記3つがありますので、リストアしたい地点に応じてどのリストア方法を利用するか検討してください。

- **最新にリストア** <br>
データ損失の可能性が最も低い、直近の正常な状態にデータベースをリストアします。

- **タイムスタンプにリストア**<br>
指定した日時にデータベースをリストアします。

- **SCNにリストア**<br>
SCNを使用してデータベースをリストアします。<br>
有効なSCNを指定する必要がありますので、データベース・ホストにアクセスして問い合せるか、オンラインまたはアーカイブ・ログにアクセスして使用するSCN番号を確認してください。

1. OCIコンソール・メニューから **Oracle Database** → **Oracle Public Cloud上のExadata** に移動します。

    ![](2022-07-21-15-15-09.png)

1. 利用したいコンパートメントを**リスト範囲**の**コンパートメント**から選択します。

    ![](2022-11-15-16-30-05.png)

1. 利用したいリージョンを右上のリージョンの折りたたみメニューをクリックして、**リージョン**の一覧から選択します。

    ![](2022-11-15-16-32-47.png)

1.  リストアしたい**Exadata VMクラスタ**の表示名をクリックします。

    ![](2022-07-05-17-14-07.png)

1. **データベース**の一覧から対象のデータベースの名前をクリックします。

    ![](2022-09-28-17-08-55.png)

1. 画面上部から**リストア**ボタンをクリックします。

    ![](2022-09-28-17-09-23.png)

1. **データベースのリストア**ダイアログで、リストア方法を選択します。(本ガイドでは、**最新にリストア**を選択します。)

    ![](2022-09-28-17-09-48.png)

1. **データベースのリストア**ボタンをクリックします。

    ![](2022-09-28-17-10-08.png)

    リストア作業が完了するとステータスが**更新中**から**使用可能**に変わります


<BR>



# 2. バックアップから新規データベースとしてリストア

続いて、取得したバックアップを利用して新規データベースとしてリストアする手順を紹介します。

1. 対象のデータベースの**データベース詳細**ぺージの**バックアップ**をクリックします。

1. リストア対象のバックアップの右側にあるアクション・アイコン(3つのドット)から、**データベース作成**をクリックします。

    ![](2022-09-28-17-40-44.png)

<a id="anchor1"></a>

3. **バックアップからのデータベースの作成**ダイアログに以下の情報を入力します。
    + **DBシステムの構成**
        + **[コンパートメント名]のVMクラスタの選択** - リストア先のVMクラスタを選択します。
        + **データベース・ホームの構成** - **既存のデータベース・ホームの選択**か**新規データベース・ホームの作成**を選択します。**新規データベース・ホームの作成**を選択の場合、任意の**データベース・ホームの表示名**と**データベース・イメージ**を選択します。

    ![](2022-09-28-17-43-21.png)

    + **データベースの構成**
        + **データベース名** - 任意
        + **一意のデータベース名** - 任意もしくはなしでも可能
        + **パスワード** - 任意
        + **パスワードの確認** - 任意
    + **ソース・データベースのTDEウォレットまたはRMANパスワードを入力してください** - リストア対象のデータベースのTDEウォレットまたはRMANパスワードを入力します。

    ![](2022-09-28-17-45-27.png)

    設定後、**データベースの作成**をクリックします。

    ![](2022-09-28-17-45-55.png)

データベースの作成がバックエンドで開始します。作業が完了するとステータスが**更新中**から**使用可能**に変わります。

<BR>

# 3. オンデマンドバックアップを使用したリストア

1. コンソールメニューから**Oracle Database** → **Oracle Public Cloud上のExadata**を選択し、**スタンドアロン・バックアップ**をクリックします。

1. リストア対象のバックアップの右側にあるアクション・アイコン(3つのドット)から、**データベース作成**をクリックします。

    ![](2022-09-28-17-55-00.png)

1. **バックアップからのデータベースの作成**ダイアログに情報を入力します。設定方法は[2. バックアップから新規データベースとしてリストアの3.](#anchor1)と同様です。

データベースの作成がバックエンドで開始します。作業が完了するとステータスが**更新中**から**使用可能**に変わります。

<br>
以上で、この章の作業は完了です。

<a id="anchor11"></a>

# 参考資料
+ [Oracle Cloud Infrastructure Documentation - Oracle Exadata Database Service on Dedicated Infrastructure](https://docs.oracle.com/en-us/iaas/exadatacloud/index.html){:target="_blank"}
+ [Oracle Cloud Infrastructure Exadata Database Service on Dedicated Infrastructure (ExaDB-D) サービス詳細](https://speakerdeck.com/oracle4engineer/exadata-database-cloud-technical-detail){:target="_blank"}

<BR>

[ページトップへ戻る](#anchor0)
