---
title: "Oracle Content Management のリポジトリのアクセス権限を理解しよう"
excerpt: "OCMのアセット管理機能のリポジトリのアクセス権限設定、カスタム・ロールを利用した細かい粒度でのアクセス権限設定(Granular Permissions)についてステップ・バイ・ステップで紹介するチュートリアルです。"
order: "043"
layout: single
tags:
  - OCE
  - OCM
header:
  teaser: "/content-management/43_repository_permission/026.jpg"
  overlay_image: "/content-management/43_repository_permission/026.jpg"
  overlay_filter: rgba(80,80,80,0.7)
---

<a id="top"></a>

Oracle Content Management(OCM)のアセット管理機能のリポジトリのアクセス権限設定、およびカスタム・ロールを利用した細かい粒度でのアクセス権限設定(Granular Permissions)についてステップ・バイ・ステップで紹介するチュートリアルです

**【お知らせ】**   
この文書は、2023年5月時点での最新バージョン(23.5.1)を元に作成されてます。  
チュートリアル内の画面ショットについては、OCMの現在のコンソール画面と異なっている場合があります。  
{: .notice--info}

**前提条件**
- OCMインスタンスが作成済であること(以下の作成手順参照)
    - [OCI IAM Identity Domain環境でOracle Content Managementインスタンスを作成する](../create_ocm_instance_IdentityDomain)
    - [Oracle Content Management インスタンスを作成する](../create_oce_instance)
- 少なくとも下記4つのOCMインスタンスのアプリケーション・ロールが付与された**管理ユーザー**を用意すること
    - **CECContentAdministrator**
    - **CECDeveloperUser**
    - **CECEnterpriseUser**
    - **CECRepositoryAdminisrrator**

    > **[Memo]**  
    > ユーザーの作成とアプリケーションロールの付与手順は、[OCI IAM Identity Domain環境でOracle Content Managementインスタンスの利用ユーザーを作成する](../create_identitydomain_group_user)もしくは[Oracle Content Management インスタンスの利用ユーザーを作成する](../create_idcs_group_user)をご確認ください。


<br/>

# 0. 説明

## リポジトリのアクセス権限設定ついて

リポジトリ（アセット・リポジトリおよびビジネス・リポジトリ）にアクセスできるユーザーを追加する際に、**リポジトリ・ロール（以降ロール）**を設定します。この操作は、フォルダへのメンバー追加と似ています。ユーザー追加時に設定できるデフォルトのロールは以下3つです

- **参照者 （Viewer）**
- **コントリビュータ (Contributor)**
- **マネージャ (Manager)**

    > **[Memo]**  
    > ダウンロード実行者(Downloader)のロールはありません、参照者ロールを付与すると、アセットの表示およびダウンロードが操作可能となります

リポジトリにデフォルトロールでメンバー追加すると、リポジトリ内で利用可能な任意のアセット・タイプが付与されたロールの権限範囲内で利用できるようになります（アセット権限）。また、リポジトリ内で利用可能な任意の（全ての）カテゴリに対して、付与されたロールの権限範囲内で利用できるようになります。各ロールのアセット権限は以下の通りです

- [Permissions Granted with Repository Roles](https://docs.oracle.com/en/cloud/paas/content-cloud/managing-assets/granular-permissions.html#GUID-9A12313F-168A-4DA1-B91C-442EA716A300__SECTION_ZVG_3WP_MWB)  [(※日本語翻訳版)](https://docs.oracle.com/cd/E83857_01/paas/content-cloud/managing-assets/granular-permissions.html#GUID-9A12313F-168A-4DA1-B91C-442EA716A300__SECTION_ZVG_3WP_MWB)

各ロールとリポジトリ内での具体的な操作は、以下のドキュメントに記載されてます

- [Task Permissions Granted with Repository Roles](https://docs.oracle.com/en/cloud/paas/content-cloud/managing-assets/granular-permissions.html#GUID-9A12313F-168A-4DA1-B91C-442EA716A300__SECTION_DQG_R5Z_3QB) [(※日本語翻訳版)](https://docs.oracle.com/cd/E83857_01/paas/content-cloud/managing-assets/granular-permissions.html#GUID-9A12313F-168A-4DA1-B91C-442EA716A300__SECTION_DQG_R5Z_3QB)

<br/>

# 1. 準備

OCMのアセット管理機能を利用するための準備作業を行います。今回は**タクソノミ**と**ビジネス・リポジトリ**をそれぞれ作成し、関連付けを行います。また、ビジネス・リポジトリ内で利用するアセット・タイプは、デフォルトで定義されている**File**、**Image**、**Video**の3つのアセット・タイプを利用します

1. OCMに**管理ユーザー**でサインインします

1. タクソノミを作成します。ここでは以下のようなシンプルな構成のタクソノミを作成します
    ![画像](001.jpg)

1. 作成したタクソノミを**プロモート**します

    > **[TIPS]**  
    > タクソノミの作成およびプロモートは、[Oracle Content Managementのタクソノミを使ってみよう](../75_taxonomy)を参考にしてください

1. リポジトリを作成します。ここでは**ビジネス・リポジトリ**を以下の条件で作成します

    - 名前: (任意の名前を指定)
    - アセット・タイプ: **File**, **Image**, **Video**を選択
    - タクソノミ: (前の手順でプロモートしたタクソノミを選択)
    - 言語: **日本語(ja)**
    - その他の設定はすべてデフォルトのままとします
        ![画像](002.jpg)

        > **[TIPS]**  
        > ビジネス・リポジトリの作成およびアセット・タイプとタクソノミの関連付けは、[Oracle Content Management で請求書などの電子ファイルを長期保管してみよう【初級編】](../42_business_repository)を参考にしてください

1. アセットメニューよりリポジトリを開きます。**A事業部/営業**、**A事業部/技術**、**A事業部/企画**の3つのカテゴリにそれぞれ画像ファイルを紐付けて登録します

    - **A事業部/営業**
        ![画像](003.jpg)

    - **A事業部/技術**
        ![画像](004.jpg)

    - **A事業部/企画**
        ![画像](005.jpg)

        > **[TIPS]**  
        > 3つの画像ファイルは、アセット・タイプ=Imageとして登録されます

1. **カテゴリ**タブを開きます。各カテゴリにそれぞれ1件ずつ画像ファイルが紐付けされていることを確認します
    ![画像](006.jpg)

<br/>

# 2. ユーザーをリポジトリに追加する

## 2.1 ユーザーにコントリビュータロールを付与する

別のOCMユーザーをビジネス・リポジトリに追加します。ここでは**コントリビュータ**ロールを付与します。OCMユーザーを新規作成する方法は、以下のチュートリアルを参考にしてください 

- **OCI IAM Identity Domains**環境の場合
    - [OCI IAM Identity Domain環境でOracle Content Managementインスタンスの利用ユーザーを作成する](../create_identitydomain_group_user)
- **Identity Cloud Service(IDCS)**環境の場合
    - [Oracle Content Management インスタンスの利用ユーザーを作成する](../create_idcs_group_user)

> **【TIPS】**  
> OCMユーザーはアセット機能を利用するため、**CECEnterpriseUser**のアプリケーション・ロールを付与してください


1. ADMINISTRATION:コンテンツ→**リポジトリ**を開きます

1. 1.1項で作成・構成したビジネス・リポジトリを選択し、**メンバー**をクリックします
    ![画像](008.jpg)

1. メンバーの追加の**ユーザーとグループ**で、事前に作成したOCMユーザーを検索します

1. ロールで**コントリビュータ**を選択し、**追加**をクリックします
    ![画像](009.jpg)

1. OCMユーザーがコントリビュータ権限で追加されるのを確認し、**完了**をクリックします
    ![画像](010.jpg)

    > **【TIPS】**  
    > 追加したOCMユーザーはアセット・タイプの**任意のタイプ**で表示、更新、作成、削除が選択済となります。これは、リポジトリ内で利用できる**すべてのアセット・タイプ**に対して、**すべての編集操作が可能**であることを意味します。  
    > 同様に、タクソノミの**任意のカテゴリ**で表示、カテゴリ化が選択済となります。これも、リポジトリ内の**すべてのタクソノミ(カテゴリ)に紐付けられたアセットを閲覧可能**であること、**すべてのカテゴリに対して任意のアセットを追加および削除が可能**であることを意味します


## 2.2 確認

1. 別ブラウザを開き、メンバー追加した**OCMユーザー**でサインインします

1. アセットを開き、2.1項でメンバー追加されたリポジトリを開きます

1. 1項で追加した3つの画像がすべて表示されることを確認します
    ![画像](011.jpg)

1. A事業部/営業、A事業部/技術、A事業部/企画の3つのカテゴリにそれぞれOffice文書ファイル(Wordなど)を紐付けて登録できることを確認します
    ![画像](012.jpg)

    ![画像](013.jpg)

    ![画像](014.jpg)

    ![画像](015.jpg)

## 2.3 追加の確認（付与するロールをコントリビュータから参照者に変更）

1. **管理ユーザー**でOCMにサインインします
    
1. リポジトリ→メンバーを開き、コントリビュータロールを付与したOCMユーザーの**編集アイコン**をクリックします
    ![画像](016.jpg)

1. ユーザー名の下の**コントリビュータ▼**をクリックし、**参照者**を選択します
    ![画像](017.jpg)

1. **保存**をクリックします
    ![画像](018.jpg)

1. 参照者ロールを付与したOCMユーザーでサインインします

1. アセットの参照のみが可能で、アセットの追加・作成メニューが**表示されない**ことを確認します。また、アセット→カテゴリでカテゴリの追加や削除のメニューが**表示されない**ことを確認します
    ![画像](019.jpg)

    ![画像](020.jpg)

<br/>

# 3. カスタム・ロールを利用した細かい粒度の権限設定

## 3.1 説明

リポジトリのメンバー追加で利用した3つのデフォルトのロール（参照者、コントリビュータ、マネージャ）の他に、管理者はロールを自作できます。これを**カスタム・ロール**と言います。  
カスタム・ロールを作成する時に、**アセット・タイプ毎およびカテゴリ毎に操作権限を細かく設定**できます。この細かいアクセス権限設定のことを**Granular Permissions**と言います。

**Granular Permissions**は、アセット・タイプ毎の操作権限（表示、更新、作成、削除）およびカテゴリ毎の操作権限（表示、カテゴリ化）の組み合わせです

- [Granular Permissions](https://docs.oracle.com/en/cloud/paas/content-cloud/managing-assets/granular-permissions.html) [(※日本語翻訳版)](https://docs.oracle.com/cd/E83857_01/paas/content-cloud/managing-assets/granular-permissions.html)

### カテゴリ毎の操作権限について(説明)
- カテゴリに紐付けされたアセットを参照するには、カテゴリに対して**表示(View)**権限以上が必要です
- カテゴリに対してアセットを紐付け(追加)するには、カテゴリに対して**カテゴリ化(Categorize)**権限、およびアセットの**更新(Update)**権限以上が必要です
- 親カテゴリで設定した操作権限は、その配下の子カテゴリに適用(継承)されます
    - 例）親カテゴリに「表示権限」を付与→配下の子カテゴリも「表示権限」が適用される
- 親カテゴリに設定した操作権限は、子カテゴリで拡大（強く）することはできます
    - 例）親カテゴリに「表示権限」を付与し、配下の子カテゴリに「カテゴリ化権限」を付与→子カテゴリに対してのみアセットの追加・削除操作が可能(親カテゴリへのアセット追加・削除はできない)
- 親カテゴリに設定した操作権限は、子カテゴリで縮小（弱く）することはできません
    - 例）親カテゴリに「カテゴリ化権限」を付与し、配下の子カテゴリに「表示権限」を付与することはできない(設定操作がエラーとなります)


## 3.2 カスタム・ロールの作成

以下のような細かい権限設定がされた3つのカスタム・ロールの利用を想定します

![画像](007.jpg)

ここでは**営業職**のカスタム・ロールを作成します

1. 管理ユーザーでOCMにサインインします

1. ADMINISTRATION:コンテンツ→**カスタム・ロール**を開きます

1. **作成**をクリックします
    ![画像](021.jpg)

1. 名前を入力します。ここでは**営業職**を入力します

1. 「編集権限」で**任意のタイプ**で選択済の権限をすべて解除します。同じように**任意のカテゴリ**の選択もすべて解除します
    ![画像](022.jpg)

1. 「編集権限」のアセットの**追加**をクリックします

    1. **File**、**Image**、**Video**の3つのアセット・タイプを選択し、**保存**をクリックします
        ![画像](023.jpg)

    1. **File**の操作権限を**削除**まで選択します。その他は**表示**のみを選択します
        ![画像](024.jpg)

1. 続けて「タクソノミ」の**追加**をクリックします

    1. 一番上のプルダウンメニューより、リポジトリに紐付けたタクソノミを選択します

    1. カテゴリを展開し、A事業部配下の**営業**のみを選択し、**保存**をクリックします
        ![画像](025.jpg)

    1. 追加された**営業**カテゴリで、**カテゴリ化**まで選択します
        ![画像](026.jpg)

1. 以下のような選択となっていることを確認し、**保存**をクリックします
    ![画像](027.jpg)

1. **営業職**のカスタム・ロールが作成されます

## 3.3 カスタム・ロールをリポジトリに追加する

作成したカスタム・ロールを、リポジトリに追加します。なお、カスタム・ロールは複数のリポジトリで共有して利用することができます

1. 引き続き管理ユーザーで、ADMINISTRATION:コンテンツ→**リポジトリ**を開きます

1. リポジトリを選択し、メンバーをクリックします

1. **ロールの追加**タブをクリックします

1. プルダウンメニューより**営業職**ロールを選択し、**追加**をクリックします
    ![画像](028.jpg)

## 3.4 カスタム・ロールをOCMユーザーに割り当てる

リポジトリに追加したカスタムロールを、OCMユーザーに割り当てます

1. 引き続き管理ユーザーで、ADMINISTRATION:コンテンツ→**リポジトリ**を開きます

1. 「メンバーの追加」で追加するメンバーを選択します。続けて、ロールで**営業職**を選択し、**追加**をクリックします
    ![画像](030.jpg)

    > **【TIPS】**  
    > 既に追加済のOCMユーザーのロールを変更する場合は、そのユーザーの編集アイコンをクリックし、ロールを変更します  
    >    ![画像](029.jpg)

1. **完了**をクリックします

## 3.5 確認

1. 別ブラウザを開き、メンバー追加したOCMユーザーでサインインします

1. アセットを開き、2.1項でメンバー追加されたリポジトリを開きます

1. **カテゴリ**タブを開きます。表示されるカテゴリが**A事業部/営業**のみに限定されていることを確認します。また、表示されるアセットも**A事業部/営業カテゴリに紐付けられたアセット**のみに限定されていることを確認します
    ![画像](031.jpg)

1. 画像ファイルや動画ファイルは、リポジトリに**登録できない**ことを確認します
    ![画像](032.jpg)

1. オフィス文書(WordやExcel)は、リポジトリに**登録できる**ことを確認します。また、**A事業部/営業**カテゴリへの紐付けも可能であることを確認します
    ![画像](033.jpg)

    ![画像](034.jpg)

## 3.6 追加の確認（オプション作業）

3.2項〜3.5項の手順を繰り返し、**技術職**ロールと**企画職**ロールをそれぞれ作成し、ユーザーに割り当てます。

割り当てたロールにより、アセット・タイプやカテゴリのアクセス権限が適切に変更されることを確認します。以下の画像は、**技術職**ロールを付与した場合のアクセス権限設定とリポジトリ内のカテゴリおよびアセットの見え方です

![画像](035.jpg)

![画像](036.jpg)

<br/>

以上でこのチュートリアルは終了です。

<br/>

[ページトップへ戻る](#top)
