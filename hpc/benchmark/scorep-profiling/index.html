<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.0 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="ja" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Score-PとCubeGUIで並列アプリケーションをプロファイリング | Oracle Cloud Infrastructure チュートリアル</title>
<meta name="description" content="並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。Score-Pは、HPCアプリケーションの並列プログラミングに於けるデファクトスタンダードであるOpenMPやMPIで記載された並列アプリケーションに対し、プロファイリング手法やトレーシング手法を用いてスケーラビリティー改善に有益な情報を提供するオープンソースのプロファイリングツールです。またCubeGUIは、Score-Pが出力するプロファイリング手法のデータを可視化するGUIツールで、並列アプリケーションのプロファイリング情報を視覚的に判断することを可能にします。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列プログラムをScore-PとCubeGUIでプロファイリングし、並列アプリケーションを効果的に実行するための有益な情報を取得する方法を解説します。">


  <meta name="author" content="Oracle Japan Solution Engineers">
  
  <meta property="article:author" content="Oracle Japan Solution Engineers">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="Oracle Cloud Infrastructure チュートリアル">
<meta property="og:title" content="Score-PとCubeGUIで並列アプリケーションをプロファイリング">
<meta property="og:url" content="https://oracle-japan.github.io/ocitutorials/hpc/benchmark/scorep-profiling/">


  <meta property="og:description" content="並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。Score-Pは、HPCアプリケーションの並列プログラミングに於けるデファクトスタンダードであるOpenMPやMPIで記載された並列アプリケーションに対し、プロファイリング手法やトレーシング手法を用いてスケーラビリティー改善に有益な情報を提供するオープンソースのプロファイリングツールです。またCubeGUIは、Score-Pが出力するプロファイリング手法のデータを可視化するGUIツールで、並列アプリケーションのプロファイリング情報を視覚的に判断することを可能にします。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列プログラムをScore-PとCubeGUIでプロファイリングし、並列アプリケーションを効果的に実行するための有益な情報を取得する方法を解説します。">



  <meta property="og:image" content="https://oracle-japan.github.io/ocitutorials/assets/images/rh01-cloud-home-pine-background.jpg">





  <meta property="article:published_time" content="2024-05-09T10:32:13+09:00">






<link rel="canonical" href="https://oracle-japan.github.io/ocitutorials/hpc/benchmark/scorep-profiling/">












<!-- end _includes/seo.html -->



  <link href="/ocitutorials/feed.xml" type="application/atom+xml" rel="alternate" title="Oracle Cloud Infrastructure チュートリアル Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/ocitutorials/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/ocitutorials/"><img src="/ocitutorials/assets/images/social-og-oracle-badge.jpg" alt="OCI チュートリアル"></a>
        
        <a class="site-title" href="/ocitutorials/">
          OCI チュートリアル
          <span class="site-subtitle">Oracle Cloud Infrastructure を使ってみよう</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/ocitutorials/#%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E4%B8%80%E8%A6%A7"
                
                
              >チュートリアル一覧</a>
            </li><li class="masthead__menu-item">
              <a
                href="/ocitutorials/about/"
                
                
              >このサイトについて</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">メニュー</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(34, 66, 55, 0.7), rgba(34, 66, 55, 0.7)), url('/ocitutorials/assets/images/rh01-cloud-home-pine-background.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Score-PとCubeGUIで並列アプリケーションをプロファイリング

        
      </h1>
      
        <p class="page__lead">並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。Score-Pは、HPCアプリケーションの並列プログラミングに於けるデファクトスタンダードであるOpenMPやMPIで記載された並列アプリケーションに対し、プロファイリング手法やトレーシング手法を用いてスケーラビリティー改善に有益な情報を提供するオープンソースのプロファイリングツールです。またCubeGUIは、Score-Pが出力するプロファイリング手法のデータを可視化するGUIツールで、並列アプリケーションのプロファイリング情報を視覚的に判断することを可能にします。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列プログラムをScore-PとCubeGUIでプロファイリングし、並列アプリケーションを効果的に実行するための有益な情報を取得する方法を解説します。
</p>
      
      


      
    </div>
  
  
</div>






  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/" itemprop="item"><span itemprop="name">ホーム</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">></span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/hpc" itemprop="item"><span itemprop="name">Hpc</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">></span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/benchmark" itemprop="item"><span itemprop="name">Benchmark</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">></span>
      
    
      
      
        <li class="current">Score-PとCubeGUIで並列アプリケーションをプロファイリング</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">メニュー</label>
  <ul class="nav__items">
    <li>
      
      <a href=""><span class="nav__sub-title">HPC編</span></a>
      <ul>
        
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-cluster-network/">HPCクラスタを構築する(基礎インフラ手動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-hpc-cluster-withterraform/">HPCクラスタを構築する(基礎インフラ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-hpc-cluster/">HPCクラスタを構築する(スタティッククラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-hpc-cluster-withautoscaling/">HPCクラスタを構築する(オンデマンドクラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-ml-instance/">GPUインスタンスで機械学習にトライ</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster/">GPUクラスタを構築する(基礎インフラ手動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withterraform/">GPUクラスタを構築する(基礎インフラ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withstack/">GPUクラスタを構築する(スタティッククラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withautoscaling/">GPUクラスタを構築する(オンデマンドクラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withubuntu/">GPUクラスタを構築する(Ubuntu OS編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-nfs-server/">ブロック・ボリュームでNFSサーバを構築する</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/cluster-with-bv-base/">ブロック・ボリュームNFSサーバと基礎インフラ編HPC/GPUクラスタを組み合わせる</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/cluster-with-bv-stack/">ブロック・ボリュームNFSサーバと自動構築編HPC/GPUクラスタを組み合わせる</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-hpl/">HPL実行方法（BM.Optimized3.36編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-hpl-e5/">HPL実行方法（BM.Standard.E5.192編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-stream/">STREAM実行方法（BM.Optimized3.36編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-stream-e5/">STREAM実行方法（BM.Standard.E5.192編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-imb/">Intel MPI Benchmark実行方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-nccltests/">NCCL Tests実行方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/bios-setting/">パフォーマンスに関連するベアメタルインスタンスのBIOS設定方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/stop-unused-service/">不要サービス停止によるパフォーマンスチューニング方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/topology-aware-cn-tuning/">クラスタ・ネットワークのトポロジーを考慮したノード間通信最適化方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/papi-profiling/">PAPIでHPCアプリケーションをプロファイリング</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/scorep-profiling/" class="active">Score-PとCubeGUIで並列アプリケーションをプロファイリング</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-connect-clusternetwork/">クラスタネットワーキングイメージを使ったクラスタ・ネットワーク接続方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/rdma-interface-configure/">クラスタ・ネットワーク接続用ネットワークインターフェース作成方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/osimage-for-cluster/">クラスタネットワーキングイメージの選び方</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-create-cnenabled-osimage/">クラスタ・ネットワーク非対応OSイメージを使ったクラスタ・ネットワーク接続方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/determine-cnrelated-issue/">クラスタ・ネットワークに接続する計算/GPUノードデプロイ時の問題判別方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-get-cnrelated-statistics/">クラスタ・ネットワーク統計情報の取得方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/nvme-filesystem/">ベアメタルインスタンスの内蔵NVMe SSD領域ファイルシステム作成方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-configure-sharedstorage/">コストパフォーマンスの良いファイル共有ストレージ構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/bv-sharedstorage-recovery/">ブロック・ボリュームを使用するNFSサーバのインスタンス障害からの復旧方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/boot-volume-extension/">計算/GPUノードのブート・ボリューム動的拡張方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/compute-name-resolution/">計算/GPUノードの効果的な名前解決方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/compute-os-customization/">計算/GPUノードデプロイ時の効果的なOSカスタマイズ方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/compute-host-list/">計算/GPUノードのホスト名リスト作成方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/cluster-resize/">計算/GPUノードの追加・削除・入れ替え方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/cluster-with-pdsh/">pdshで効率的にクラスタ管理オペレーションを実行</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/instance-principal-auth/">オンデマンドクラスタ実現のためのインスタンス・プリンシパル認証設定方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/log-monitoring/">OCIロギングとGrafanaを使用したHPC/GPUクラスタのログ監視方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/metric-monitoring/">OCIモニタリングとGrafanaを使用したHPC/GPUクラスタのメトリック監視方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/gpu-with-ubuntu/">UbuntuをOSとする機械学習ワークロード向けGPUノード構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/build-openmpi/">Slurm環境での利用を前提とするOpenMPI構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/setup-slurm-cluster/">Slurmによるリソース管理・ジョブ管理システム構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/install-blas/">線形代数演算ライブラリインストール・利用方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/kdump-on-baremetal/">ベアメタル・インスタンスのカーネルダンプ取得方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/site-to-site-vpn/">サイト間VPNによるOCIとの拠点間接続方法</a></li></p>
        
      </ul>
    </li>
  </ul>
</nav>
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Score-PとCubeGUIで並列アプリケーションをプロファイリング">
    <meta itemprop="description" content="並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。Score-Pは、HPCアプリケーションの並列プログラミングに於けるデファクトスタンダードであるOpenMPやMPIで記載された並列アプリケーションに対し、プロファイリング手法やトレーシング手法を用いてスケーラビリティー改善に有益な情報を提供するオープンソースのプロファイリングツールです。またCubeGUIは、Score-Pが出力するプロファイリング手法のデータを可視化するGUIツールで、並列アプリケーションのプロファイリング情報を視覚的に判断することを可能にします。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列プログラムをScore-PとCubeGUIでプロファイリングし、並列アプリケーションを効果的に実行するための有益な情報を取得する方法を解説します。">
    <meta itemprop="datePublished" content="2024-05-09T10:32:13+09:00">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> 目次</h4></header>
              <ul class="toc__menu"><li><a href="#0-概要">0. 概要</a></li><li><a href="#1-hpcクラスタ構築">1. HPCクラスタ構築</a></li><li><a href="#2-前提条件ソフトウェアインストールセットアップ">2. 前提条件ソフトウェアインストール・セットアップ</a></li><li><a href="#3-score-pインストールセットアップ">3. Score-Pインストール・セットアップ</a></li><li><a href="#4-cubeguiインストールセットアップ">4. CubeGUIインストール・セットアップ</a></li><li><a href="#5-score-pでプロファイリング手法データを取得">5. Score-Pでプロファイリング手法データを取得</a></li><li><a href="#6-score-pとcubeguiでプロファイリング手法データを解析">6. Score-PとCubeGUIでプロファイリング手法データを解析</a></li></ul>
            </nav>
          </aside>
        
        <p>並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。<br />
<strong><a href="https://www.vi-hps.org/projects/score-p/">Score-P</a></strong> は、HPCアプリケーションの並列プログラミングに於けるデファクトスタンダードであるOpenMPやMPIで記載された並列アプリケーションに対し、プロファイリング手法やトレーシング手法を用いてスケーラビリティー改善に有益な情報を提供するオープンソースのプロファイリングツールです。<br />
また <strong><a href="https://www.scalasca.org/scalasca/software/cube-4.x/download.html">CubeGUI</a></strong> は、 <strong>Score-P</strong> が出力するプロファイリング手法のデータを可視化するGUIツールで、並列アプリケーションのプロファイリング情報を視覚的に判断することを可能にします。<br />
本プロファイリング関連Tipsは、 <strong>ベアメタル・インスタンス</strong> 上で実行するOpenMPやMPIでコーディングされた並列プログラムを <strong>Score-P</strong> と <strong>CubeGUI</strong> でプロファイリングし、並列アプリケーションを効果的に実行するための有益な情報を取得する方法を解説します。</p>

<hr />
<h1 id="0-概要">0. 概要</h1>

<p><strong>Score-P</strong> は、HPCに於ける高並列アプリケーションをスケーラブルで簡易にプロファイリング（※1）することを目的に開発され、以下の代表的な並列プログラミングモデルに対応しています。</p>

<ul>
  <li>スレッド並列
    <ul>
      <li>OpenMP</li>
      <li>Pthreads</li>
    </ul>
  </li>
  <li>プロセス並列
    <ul>
      <li>MPI</li>
      <li>SHMEM</li>
    </ul>
  </li>
  <li>GPU並列
    <ul>
      <li>CUDA</li>
      <li>OpenCL</li>
      <li>OpenACC</li>
    </ul>
  </li>
</ul>

<p>また <strong>Score-P</strong> は、並列アプリケーションの評価指標を統計的に扱うプロファイリング手法（※1）と、これらの評価指標を時間情報と共に扱うトレーシング手法の何れにも対応しており、解析用途に合わせたプロファイリングが可能です。</p>

<p>※1）本テクニカルTipsでは、性能向上を目的とした並列アプリケーションの性能解析プロセス全般を <strong>プロファイリング</strong> と呼称し、この中で評価指標を統計的に扱う <strong>プロファイリング</strong> の1つの方法を <strong>プロファイリング手法</strong> と呼称します。これに対し、評価指標を時間情報と共に扱う <strong>プロファイリング</strong> の1つの方法を <strong>トレーシング手法</strong> と呼称します。</p>

<p><strong>Score-P</strong> が出力するプロファイリング手法用のデータは、これを <strong>CubeGUI</strong> で読み込むことで、対象の並列アプリケーションを以下の3評価軸で表示し、</p>

<ol>
  <li>評価指標
    <ul>
      <li>CPU時間</li>
      <li>MPI通信データ量</li>
      <li>I/Oデータ量</li>
    </ul>
  </li>
  <li>コールツリー
    <ul>
      <li>サブルーチン・関数</li>
      <li>MPI関数</li>
      <li>OpenMPループ</li>
    </ul>
  </li>
  <li>システム位置
    <ul>
      <li>ノード</li>
      <li>MPIプロセス</li>
      <li>OpneMPスレッド</li>
    </ul>
  </li>
</ol>

<p>以下のようにGUIで視覚的に表示することで、</p>

<p><img src="cubegui_page01.png" alt="画面ショット" /></p>

<p>以下のような観点での並列アプリケーションのプロファイリングが可能になります。</p>

<ul>
  <li>MPI通信によるスケーラビリティへの影響
    <ul>
      <li>MPI通信が全体に対してどの程度の時間を占めているか</li>
      <li>最も通信データ量の多いMPI関数は何か</li>
      <li>各MPIプロセスのMPI通信データ量に偏りがあるか</li>
    </ul>
  </li>
  <li>ロードバランス不均衡によるスケーラビリティへの影響
    <ul>
      <li>MPIで並列化されたループの実行に各計算ノードがそれぞれどの程度時間を要しているか</li>
      <li>MPIで並列化されたループの実行に各MPIプロセスがそれぞれどの程度時間を要しているか</li>
      <li>OpenMPで並列化されたループの実行に各OpenMPスレッドがそれぞれどの程度時間を要しているか</li>
    </ul>
  </li>
  <li>ホットスポットの特定
    <ul>
      <li>最も時間を要しているサブルーチンはどこか</li>
      <li>最もMPI通信データ量の多いMPI関数はどのサブルーチンから呼ばれているか</li>
    </ul>
  </li>
  <li>I/Oによるスケーラビリティへの影響
    <ul>
      <li>I/Oがどの程度の時間を要しているか</li>
    </ul>
  </li>
</ul>

<p>また <strong>Score-P</strong> は、単独で利用するだけでなく、以下のプロファイリングツールと連携して動作するよう作られており、 <strong>プロファイリング手法</strong> と <strong>トレーシング手法</strong> を組合せた様々なプロファイリングニーズにこたえられるよう作られています。</p>

<ul>
  <li><strong><a href="https://icl.utk.edu/papi/">PAPI</a></strong></li>
  <li><strong><a href="https://www.scalasca.org/">Scalasca</a></strong></li>
  <li><strong><a href="https://www.cs.uoregon.edu/research/tau/home.php">TAU</a></strong></li>
  <li><strong><a href="https://vampir.eu/">Vampir</a></strong></li>
</ul>

<p>本プロファイリング関連Tipsは、 <strong>Score-P</strong> と <strong>CubeGUI</strong> でプロファイリング手法を使用する並列アプリケーションのプロファイリング手順を以下に沿って解説します。<br />
なおプロファイリング対象の並列アプリケーションは、 <strong><a href="https://www.nas.nasa.gov/software/npb.html">NAS Parallel Benchmarks</a></strong> を使用します。</p>

<ul>
  <li>HPCクラスタ構築</li>
  <li>前提条件ソフトウェアインストール・セットアップ</li>
  <li><strong>Score-P</strong> インストール・セットアップ</li>
  <li><strong>CubeGUI</strong> インストール・セットアップ</li>
  <li><strong>Score-P</strong> でプロファイリング手法データを取得</li>
  <li><strong>Score-P</strong> と <strong>CubeGUI</strong> でプロファイリング手法データを解析</li>
</ul>

<p>各ソフトウェアは、以下のバージョンを前提とします。</p>

<ul>
  <li>OS ： <strong>Oracle Linux</strong> 8.9ベースのHPC <strong><a href="/ocitutorials/hpc/#5-13-クラスタネットワーキングイメージ">クラスタネットワーキングイメージ</a></strong> （※2）</li>
  <li><strong><a href="https://www.open-mpi.org/">OpenMPI</a></strong> ：5.0.3</li>
  <li><strong>Score-P</strong> ：8.4</li>
  <li><strong>CubeGUI</strong> ：4.8.2</li>
</ul>

<p>※2）<strong><a href="/ocitutorials/hpc/#3-oci-hpcテクニカルtips集">OCI HPCテクニカルTips集</a></strong> の <strong><a href="/ocitutorials/hpc/tech-knowhow/osimage-for-cluster/">クラスタネットワーキングイメージの選び方</a></strong> の <strong><a href="/ocitutorials/hpc/tech-knowhow/osimage-for-cluster/#1-クラスタネットワーキングイメージ一覧">1. クラスタネットワーキングイメージ一覧</a></strong> のイメージ <strong>No.1</strong> です。</p>

<p>本プロファイリングTipsで使用するHPCクラスタは、 <strong><a href="/ocitutorials/hpc/#5-1-クラスタネットワーク">クラスタ・ネットワーク</a></strong> に接続する <strong><a href="https://docs.oracle.com/ja-jp/iaas/Content/Compute/References/computeshapes.htm#bm-hpc-optimized">BM.Optimized3.36</a></strong> 2ノードをプロファイリング対象の並列アプリケーションを <strong>Score-P</strong> と共に実行する計算ノードとし、Bastionノード1ノードを計算ノードで採取したプロファイリングのデータを <strong>CubeGUI</strong> で解析するフロントエンド用途のノードとして構築します。</p>

<p>ここで <strong>CubeGUI</strong> がX11ベースのアプリケーションのため、この操作画面を表示するXサーバの稼働する <strong>CubeGUI</strong> 操作端末を用意します。</p>

<p><img src="architecture_diagram.png" alt="システム構成図" /></p>

<hr />
<h1 id="1-hpcクラスタ構築">1. HPCクラスタ構築</h1>

<p>本章は、本プロファイリングTipsで使用するHPCクラスタを構築します。</p>

<p>この構築手順は、 <strong><a href="/ocitutorials/hpc/#1-oci-hpcチュートリアル集">OCI HPCチュートリアル集</a></strong> の <strong><a href="/ocitutorials/hpc/spinup-cluster-network/">HPCクラスタを構築する(基礎インフラ手動構築編)</a></strong> の手順に従い実施します。</p>

<p>この際、計算ノードとBastionノードを以下のように構成します。</p>

<ul>
  <li>計算ノード <strong>ブート・ボリューム</strong> サイズ ： 100GB以上（インストールするソフトウェアの容量確保のため）</li>
  <li>計算ノードSMT : 無効（※3）</li>
  <li>Bastionノード <strong>ブート・ボリューム</strong> サイズ ： 100GB以上（インストールするソフトウェアの容量確保のため）</li>
  <li>Bastionノードコア数 ： 8コア（ <strong>CubeGUI</strong> のコンパイル高速化のため）</li>
</ul>

<p>※3）SMTを無効化する方法は、 <strong><a href="/ocitutorials/hpc/#2-oci-hpcパフォーマンス関連情報">OCI HPCパフォーマンス関連情報</a></strong> の <strong><a href="/ocitutorials/hpc/benchmark/bios-setting/">パフォーマンスに関連するベアメタルインスタンスのBIOS設定方法</a></strong> を参照してください。</p>

<hr />
<h1 id="2-前提条件ソフトウェアインストールセットアップ">2. 前提条件ソフトウェアインストール・セットアップ</h1>

<p>本章は、本プロファイリングTipsで使用する <strong>Score-P</strong> の前提条件ソフトウェアとして、計算ノードに <strong><a href="https://www.open-mpi.org/">OpenMPI</a></strong> をインストール・セットアップします。</p>

<p>この方法は、 <strong><a href="/ocitutorials/hpc/#3-oci-hpcテクニカルtips集">OCI HPCテクニカルTips集</a></strong> の <strong><a href="/ocitutorials/hpc/tech-knowhow/build-openmpi/">Slurm環境での利用を前提とするOpenMPI構築方法</a></strong> を参照してください。</p>

<p>なお本章の作業は、全ての計算ノードで実施します。</p>

<hr />
<h1 id="3-score-pインストールセットアップ">3. Score-Pインストール・セットアップ</h1>

<p>本章は、 <strong>Score-P</strong> を計算ノードにインストールし、利用に必要な環境設定を行います。<br />
なお本章の作業は、全ての計算ノードに実施します。</p>

<ol>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>Score-P</strong> の前提条件ソフトウェアを提供するyumレポジトリを追加します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">sudo </span>yum-config-manager <span class="nt">--enable</span> ol8_codeready_builder ol8_developer_EPEL
</code></pre></div>    </div>

    <p>なお、上記コマンド実行時に以下のメッセージが出力される場合、</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> This system is receiving updates from OSMS server.
 Error: No matching repo to modify: ol8_developer_EPEL.
</code></pre></div>    </div>

    <p>OSのパッケージ管理が <strong><a href="https://docs.oracle.com/ja-jp/iaas/os-management/index.html">OS管理サービス</a></strong> で行われているため、以下コマンドをopcユーザで実行し、これを解除した後に再度yumレポジトリを追加します。<br />
 ここで実施する <strong>OS管理サービス</strong> の解除は、10分程度の時間が経過すると自動的に <strong>OS管理サービス</strong> 管理に戻ります。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">sudo </span>osms unregister
 <span class="nv">$ </span><span class="nb">sudo </span>yum-config-manager <span class="nt">--enable</span> ol8_codeready_builder ol8_developer_EPEL
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>Score-P</strong> の前提条件ソフトウェアをインストールします。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">-y</span> binutils-devel libunwind libunwind-devel gcc-plugin-devel llvm-devel clang-devel
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>Score-P</strong> をインストールします。<br />
これにより、 <strong>Score-P</strong> が <strong>/opt/scorep</strong> にインストールされます。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cd</span> ~<span class="p">;</span> wget https://perftools.pages.jsc.fz-juelich.de/cicd/scorep/tags/scorep-8.4/scorep-8.4.tar.gz
 <span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./scorep-8.4.tar.gz
 <span class="nv">$ </span><span class="nb">cd </span>scorep-8.4<span class="p">;</span> ./configure
 <span class="nv">$ </span>make <span class="nt">-j</span> 36 <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>Score-P</strong> 実行に必要な環境変数を設定します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"export PATH=</span><span class="se">\$</span><span class="s2">PATH:/opt/scorep/bin"</span> | <span class="nb">tee</span> <span class="nt">-a</span> ~/.bashrc
 <span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</code></pre></div>    </div>
  </li>
</ol>

<hr />
<h1 id="4-cubeguiインストールセットアップ">4. CubeGUIインストール・セットアップ</h1>

<p>本章は、 <strong>CubeGUI</strong> をBastionノードにインストールし、利用に必要な環境設定を行います。</p>

<ol>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> の前提条件ソフトウェアである <strong><a href="https://www.qt.io/">Qt</a></strong> の前提条件ソフトウェアを提供するyumレポジトリを追加します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">sudo </span>yum-config-manager <span class="nt">--enable</span> ol8_codeready_builder ol8_developer_EPEL
</code></pre></div>    </div>

    <p>なお、上記コマンド実行時に以下のメッセージが出力される場合、</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> This system is receiving updates from OSMS server.
 Error: No matching repo to modify: ol8_developer_EPEL.
</code></pre></div>    </div>

    <p>OSのパッケージ管理が <strong><a href="https://docs.oracle.com/ja-jp/iaas/os-management/index.html">OS管理サービス</a></strong> で行われているため、以下コマンドをopcユーザで実行し、これを解除した後に再度yumレポジトリを追加します。<br />
 ここで実施する <strong>OS管理サービス</strong> の解除は、10分程度の時間が経過すると自動的に <strong>OS管理サービス</strong> 管理に戻ります。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">sudo </span>osms unregister
 <span class="nv">$ </span><span class="nb">sudo </span>yum-config-manager <span class="nt">--enable</span> ol8_codeready_builder ol8_developer_EPEL
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> の前提条件ソフトウェアである <strong>Qt</strong> の前提条件ソフトウェアをインストールします。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">-y</span> cmake mesa-libGL mesa-libGL-devel mesa-dri-drivers git xauth xcb-proto xcb-util-devel xcb-util-wm xcb-util-wm-devel xcb-util-cursor xcb-util-cursor-devel libXrender-devel xcb-util-keysyms xcb-util-keysyms-devel libxkbcommon-devel libxkbcommon-x11 libxkbcommon-x11-devel fontconfig-devel freetype-devel libXext-devel libSM-devel libICE-devel
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> の前提条件ソフトウェアである <strong>Qt</strong> をインストールします。<br />
これにより、 <strong>Qt</strong> が <strong>/usr/local/Qt-5.15.13</strong> にインストールされます。<br />
なお、makeコマンドの並列数はBastionノードのコア数に合わせて調整します。<br />
また本手順は、30分程度を要します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cd</span> ~<span class="p">;</span> git clone https://code.qt.io/qt/qt5.git
 <span class="nv">$ </span><span class="nb">cd </span>qt5<span class="p">;</span> git checkout 5.15
 <span class="nv">$ </span>perl init-repository
 <span class="nv">$ </span>./configure <span class="nt">-opensource</span> <span class="nt">-confirm-license</span> <span class="nt">-nomake</span> examples <span class="nt">-nomake</span> tests
 <span class="nv">$ </span>make <span class="nt">-j</span> 16 <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> の前提条件ソフトウェアである <strong>CubeLib</strong> をインストールします。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cd</span> ~<span class="p">;</span> wget https://apps.fz-juelich.de/scalasca/releases/cube/4.8/dist/cubelib-4.8.2.tar.gz
 <span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./cubelib-4.8.2.tar.gz
 <span class="nv">$ </span><span class="nb">cd </span>cubelib-4.8.2<span class="p">;</span> ./configure
 <span class="nv">$ </span>make <span class="nt">-j</span> 16 <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> をインストールします。<br />
これにより、 <strong>CubeGUI</strong> が <strong>/opt/cubegui</strong> にインストールされます。<br />
なお、makeコマンドの並列数はBastionノードのコア数に合わせて調整します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cd</span> ~<span class="p">;</span> wget https://apps.fz-juelich.de/scalasca/releases/cube/4.8/dist/cubegui-4.8.2.tar.gz
 <span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./cubegui-4.8.2.tar.gz
 <span class="nv">$ </span><span class="nb">cd </span>cubegui-4.8.2<span class="p">;</span> ./configure <span class="nt">--with-qt</span><span class="o">=</span>/usr/local/Qt-5.15.13/bin <span class="nt">--with-cubelib</span><span class="o">=</span>/opt/cubelib/bin
 <span class="nv">$ </span>make <span class="nt">-j</span> 16 <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> 実行に必要な環境変数を設定します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"export PATH=</span><span class="se">\$</span><span class="s2">PATH:/usr/local/Qt-5.15.13/bin:/opt/cubegui/bin"</span> | <span class="nb">tee</span> <span class="nt">-a</span> ~/.bashrc
 <span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</code></pre></div>    </div>
  </li>
  <li>
    <p>Xサーバの稼働する <strong>CubeGUI</strong> 操作端末から以下コマンドを実行し、Xフォワードを有効にしてBastionノードにログインします。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ssh <span class="nt">-X</span> bastion_IP
 Activate the web console with: systemctl <span class="nb">enable</span> <span class="nt">--now</span> cockpit.socket

 Last login: Tue Apr 23 10:35:11 2024 from x.y.z.w
 /usr/bin/xauth:  file /home/opc/.Xauthority does not exist
 <span class="nv">$ </span><span class="nb">printenv </span>DISPLAY
 localhost:10.0
 <span class="err">$</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>cube
</code></pre></div>    </div>

    <p>以下のように <strong>CubeGUI</strong> のスタート画面が起動することを確認します。</p>

    <p><img src="cubegui_page02.png" alt="画面ショット" /></p>
  </li>
</ol>

<hr />
<h1 id="5-score-pでプロファイリング手法データを取得">5. Score-Pでプロファイリング手法データを取得</h1>

<p>本章は、<strong>NAS Parallel Benchmarks</strong> をプロファイリング対象とし、 <strong>Score-P</strong> でプロファイリング手法を使用してプロファイリングデータを取得します。<br />
ここでは、ノードあたり36コアを搭載する <strong>BM.Optimized3.36</strong> を2ノード使用することから、36 MPIプロセス・2 OpenMPスレッドの組み合わせを使用します。</p>

<p>この際、プロファイリングによるオーバーヘッド発生を考慮した上で精度の良いプロファイリングデータを取得するため、以下の手順でこれを実施します。</p>

<ol>
  <li><strong>NAS Parallel Benchmarks</strong> バイナリの作成</li>
  <li>プロファイリングデータを取得しない場合の実行時間を計測</li>
  <li>プロファイリングデータを取得した場合の実行時間を計測</li>
  <li>両者に隔たりがある場合プロファイリング対象を限定するフィルタを作成</li>
  <li>フィルタを適用してプロファイリングデータを取得した場合の実行時間を計測</li>
  <li>先の実行時間の隔たりが解消したことを確認</li>
</ol>

<p>本手順は、計算ノードのうちの1ノードで実施します。</p>

<ol>
  <li>
    <p>以下コマンドをopcユーザで実行し、プロファイリングデータを取得しない <strong>NAS Parallel Benchmarks</strong> のバイナリ（<strong>bt-mz.C.x_wo_scorep</strong>）とプロファイリングデータを取得する <strong>NAS Parallel Benchmarks</strong> のバイナリ（<strong>bt-mz.C.x_wi_scorep</strong>）を作成します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cd</span> ~<span class="p">;</span> wget https://www.nas.nasa.gov/assets/npb/NPB3.4.2-MZ.tar.gz
 <span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./NPB3.4.2-MZ.tar.gz
 <span class="nv">$ </span><span class="nb">cd </span>NPB3.4.2-MZ/NPB3.4-MZ-MPI
 <span class="nv">$ </span><span class="nb">cp </span>config/make.def.template config/make.def
 <span class="nv">$ </span>make bt-mz <span class="nv">CLASS</span><span class="o">=</span>C
 <span class="nv">$ </span><span class="nb">mv </span>bin/bt-mz.C.x bin/bt-mz.C.x_wo_scorep
 <span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/^FC =/FC = scorep/g'</span> config/make.def
 <span class="nv">$ </span>diff config/make.def.template config/make.def
 32c32
 &lt; FC <span class="o">=</span> mpif90
 <span class="nt">---</span>
 <span class="o">&gt;</span> FC <span class="o">=</span> scorep mpif90
 <span class="nv">$ </span>make clean
 <span class="nv">$ </span>make bt-mz <span class="nv">CLASS</span><span class="o">=</span>C
 <span class="nv">$ </span><span class="nb">mv </span>bin/bt-mz.C.x bin/bt-mz.C.x_wi_scorep
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、プロファイリングデータを取得しない場合の実行時間を計測します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-hostfile</span> ~/hostlist.txt <span class="nt">-mca</span> coll_hcoll_enable 0 <span class="nt">-x</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span>2 <span class="nt">-x</span> <span class="nv">UCX_NET_DEVICES</span><span class="o">=</span>mlx5_2:1 <span class="nt">--bind-to</span> none ./bin/bt-mz.C.x_wo_scorep | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
  Time <span class="k">in </span>seconds <span class="o">=</span>                     7.92
 <span class="err">$</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、プロファイリングデータを取得した場合の実行時間を計測します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-hostfile</span> ~/hostlist.txt <span class="nt">-mca</span> coll_hcoll_enable 0 <span class="nt">-x</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span>2 <span class="nt">-x</span> <span class="nv">UCX_NET_DEVICES</span><span class="o">=</span>mlx5_2:1 <span class="nt">-x</span> <span class="nv">SCOREP_EXPERIMENT_DIRECTORY</span><span class="o">=</span>/home/opc/prof <span class="nt">--bind-to</span> none ./bin/bt-mz.C.x_wi_scorep | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
  Time <span class="k">in </span>seconds <span class="o">=</span>                    15.52
 <span class="err">$</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>両者の差に約2倍の隔たりがあるため、以下のコマンドをopcユーザで実行し、プロファイリングのオーバーヘッドの原因を調査します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>scorep-score <span class="nt">-r</span> /home/opc/prof/profile.cubex | <span class="nb">head</span> <span class="nt">-30</span>

 Estimated aggregate size of event trace:                   160GB
 Estimated requirements <span class="k">for </span>largest trace buffer <span class="o">(</span>max_buf<span class="o">)</span>: 5GB
 Estimated memory requirements <span class="o">(</span>SCOREP_TOTAL_MEMORY<span class="o">)</span>:       5GB
 <span class="o">(</span>warning: The memory requirements cannot be satisfied by Score-P to avoid
 intermediate flushes when tracing. Set <span class="nv">SCOREP_TOTAL_MEMORY</span><span class="o">=</span>4G to get the
 maximum supported memory or reduce requirements using USR regions filters.<span class="o">)</span>

 flt     <span class="nb">type    </span>max_buf[B]        visits <span class="nb">time</span><span class="o">[</span>s] <span class="nb">time</span><span class="o">[</span>%] <span class="nb">time</span>/visit[us]  region
         ALL 4,897,406,179 6,580,857,249 1106.03   100.0           0.17  ALL
         USR 4,890,409,524 6,574,838,897  529.54    47.9           0.08  USR
         OMP     6,511,888     4,868,608  521.74    47.2         107.16  OMP
         MPI       944,158       420,408   52.60     4.8         125.13  MPI
         COM       591,890       729,300    2.14     0.2           2.93  COM
     SCOREP            41            36    0.00     0.0          16.44  SCOREP

         USR 1,572,017,382 2,110,313,472  242.56    21.9           0.11  binvcrhs
         USR 1,572,017,382 2,110,313,472  176.71    16.0           0.08  matmul_sub
         USR 1,572,017,382 2,110,313,472   93.15     8.4           0.04  matvec_sub
         USR    68,157,492    87,475,200    8.65     0.8           0.10  lhsinit
         USR    68,157,492    87,475,200    5.55     0.5           0.06  binvrhs
         USR    50,806,080    68,892,672    2.90     0.3           0.04  exact_solution
         OMP       559,584       205,824    0.03     0.0           0.15  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:206
         OMP       559,584       205,824    0.03     0.0           0.15  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:217
         OMP       559,584       205,824    0.03     0.0           0.15  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:245
         OMP       559,584       205,824    0.03     0.0           0.16  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:256
         MPI       411,447       139,896    0.20     0.0           1.40  MPI_Irecv
         MPI       411,447       139,896    0.47     0.0           3.39  MPI_Isend
         OMP       281,184       103,424    0.10     0.0           0.92  <span class="o">!</span><span class="nv">$omp</span> parallel @rhs.f90:29
         OMP       279,792       102,912    0.03     0.0           0.30  <span class="o">!</span><span class="nv">$omp</span> parallel @y_solve.f90:44
 <span class="err">$</span>
</code></pre></div>    </div>

    <p>この出力から、 <strong>visits</strong> 列の値が大きい <strong>region</strong> 列を特定し、これに従いプロファイリング対象からこれらの <strong>region</strong> を除外する以下のフィルタを作成します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cat</span> ./scorep.filt 
 SCOREP_REGION_NAMES_BEGIN EXCLUDE
     binvcrhs
     matmul_sub
     matvec_sub
     lhsinit
     binvrhs
     exact_solution
 SCOREP_REGION_NAMES_END
 <span class="err">$</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>以下コマンドをopcユーザで実行し、フィルタを適用してプロファイリングデータを取得した場合の実行時間を計測します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-hostfile</span> ~/hostlist.txt <span class="nt">-mca</span> coll_hcoll_enable 0 <span class="nt">-x</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span>2 <span class="nt">-x</span> <span class="nv">UCX_NET_DEVICES</span><span class="o">=</span>mlx5_2:1 <span class="nt">-x</span> <span class="nv">SCOREP_EXPERIMENT_DIRECTORY</span><span class="o">=</span>/home/opc/prof <span class="nt">-x</span> <span class="nv">SCOREP_FILTERING_FILE</span><span class="o">=</span>./scorep.filt <span class="nt">--bind-to</span> none ./bin/bt-mz.C.x_wi_scorep | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
  Time <span class="k">in </span>seconds <span class="o">=</span>                     8.09
 <span class="err">$</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>手順 2.</strong> と <strong>手順 5.</strong> の結果から、両者の差の隔たりが解消したことを確認します。<br />
また以下コマンドをopcユーザで実行し、フィルタの適用により除外した <strong>region</strong> が表示されないことを確認します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>scorep-score <span class="nt">-r</span> /home/opc/prof/profile.cubex | <span class="nb">head</span> <span class="nt">-30</span>

 Estimated aggregate size of event trace:                   246MB
 Estimated requirements <span class="k">for </span>largest trace buffer <span class="o">(</span>max_buf<span class="o">)</span>: 8MB
 Estimated memory requirements <span class="o">(</span>SCOREP_TOTAL_MEMORY<span class="o">)</span>:       12MB
 <span class="o">(</span>hint: When tracing <span class="nb">set </span><span class="nv">SCOREP_TOTAL_MEMORY</span><span class="o">=</span>12MB to avoid intermediate flushes
 or reduce requirements using USR regions filters.<span class="o">)</span>

 flt     <span class="nb">type </span>max_buf[B]    visits <span class="nb">time</span><span class="o">[</span>s] <span class="nb">time</span><span class="o">[</span>%] <span class="nb">time</span>/visit[us]  region
         ALL  8,087,991 6,073,761  579.46   100.0          95.40  ALL
         OMP  6,511,888 4,868,608  540.67    93.3         111.05  OMP
         MPI    944,158   420,408   36.66     6.3          87.20  MPI
         COM    591,890   729,300    2.11     0.4           2.89  COM
         USR     40,144    55,409    0.01     0.0           0.19  USR
     SCOREP         41        36    0.00     0.0          14.85  SCOREP

         OMP    559,584   205,824    0.03     0.0           0.15  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:206
         OMP    559,584   205,824    0.03     0.0           0.15  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:217
         OMP    559,584   205,824    0.03     0.0           0.15  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:245
         OMP    559,584   205,824    0.03     0.0           0.16  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:256
         MPI    411,447   139,896    0.19     0.0           1.33  MPI_Irecv
         MPI    411,447   139,896    0.44     0.1           3.14  MPI_Isend
         OMP    281,184   103,424    0.09     0.0           0.90  <span class="o">!</span><span class="nv">$omp</span> parallel @rhs.f90:29
         OMP    279,792   102,912    0.04     0.0           0.36  <span class="o">!</span><span class="nv">$omp</span> parallel @y_solve.f90:44
         OMP    279,792   102,912    0.04     0.0           0.37  <span class="o">!</span><span class="nv">$omp</span> parallel @x_solve.f90:47
         OMP    279,792   102,912    0.02     0.0           0.20  <span class="o">!</span><span class="nv">$omp</span> parallel @add.f90:23
         OMP    279,792   102,912    0.04     0.0           0.38  <span class="o">!</span><span class="nv">$omp</span> parallel @z_solve.f90:44
         COM    167,232   205,824    0.50     0.1           2.43  copy_x_face
         COM    167,232   205,824    0.47     0.1           2.27  copy_y_face
         OMP    167,232   205,824    0.90     0.2           4.39  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:206
         OMP    167,232   205,824    0.22     0.0           1.05  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @exch_qbc.f90:215
 <span class="err">$</span>
</code></pre></div>    </div>

    <p>以上の手順を経て、十分精度の期待できるプロファイリング手法を用いたプロファイリングのデータが、mpirunコマンドを実行した計算ノードの <strong>/home/opc/prof</strong> ディレクトリ以下に作成されています。</p>
  </li>
</ol>

<hr />
<h1 id="6-score-pとcubeguiでプロファイリング手法データを解析">6. Score-PとCubeGUIでプロファイリング手法データを解析</h1>

<p>本章は、先に <strong>Score-P</strong> で取得したプロファイリングのデータを使用し、 <strong>Score-P</strong> と <strong>CubeGUI</strong> でこれを解析します。<br />
なお、プロファイリングのデータを格納している計算ノードの <strong>/home/opc/prof</strong> ディレクトリ以下を、予めBastionノードの同じパスにコピーしておきます。</p>

<ol>
  <li>
    <p>以下コマンドを計算ノードのopcユーザで実行し、トータル時間を評価指標としたプロファイリング結果を表示します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>scorep-score <span class="nt">-r</span> <span class="nt">-s</span> totaltime /home/opc/prof/profile.cubex | <span class="nb">head</span> <span class="nt">-30</span>

 Estimated aggregate size of event trace:                   246MB
 Estimated requirements <span class="k">for </span>largest trace buffer <span class="o">(</span>max_buf<span class="o">)</span>: 8MB
 Estimated memory requirements <span class="o">(</span>SCOREP_TOTAL_MEMORY<span class="o">)</span>:       12MB
 <span class="o">(</span>hint: When tracing <span class="nb">set </span><span class="nv">SCOREP_TOTAL_MEMORY</span><span class="o">=</span>12MB to avoid intermediate flushes
 or reduce requirements using USR regions filters.<span class="o">)</span>

 flt     <span class="nb">type </span>max_buf[B]    visits <span class="nb">time</span><span class="o">[</span>s] <span class="nb">time</span><span class="o">[</span>%] <span class="nb">time</span>/visit[us]  region
         ALL  8,087,991 6,073,761  579.46   100.0          95.40  ALL
         OMP  6,511,888 4,868,608  540.67    93.3         111.05  OMP
         MPI    944,158   420,408   36.66     6.3          87.20  MPI
         COM    591,890   729,300    2.11     0.4           2.89  COM
         USR     40,144    55,409    0.01     0.0           0.19  USR
     SCOREP         41        36    0.00     0.0          14.85  SCOREP

         OMP     83,616   102,912  159.50    27.5        1549.85  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @z_solve.f90:51
         OMP     83,616   102,912  156.87    27.1        1524.35  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @y_solve.f90:51
         OMP     83,616   102,912  149.08    25.7        1448.62  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @x_solve.f90:53
         MPI    120,198   139,896   22.10     3.8         157.97  MPI_Waitall
         OMP     84,032   103,424   14.62     2.5         141.38  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:77
         OMP     84,032   103,424   14.31     2.5         138.33  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:292
         OMP     84,032   103,424   14.04     2.4         135.77  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:182
         MPI         26        36   13.29     2.3      369290.15  MPI_Init
         OMP     84,032   103,424    6.96     1.2          67.31  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:59
         OMP     83,616   102,912    6.54     1.1          63.53  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @add.f90:23
         OMP     84,032   103,424    6.31     1.1          61.00  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:34
         OMP     83,616   102,912    1.49     0.3          14.50  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @z_solve.f90:427
         OMP     84,032   103,424    1.47     0.3          14.19  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:399
         OMP     83,616   102,912    1.07     0.2          10.41  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @y_solve.f90:405
         OMP    167,232   205,824    0.94     0.2           4.55  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:245
</code></pre></div>    </div>

    <p>この出力から、以下のことがわかります。</p>

    <ul>
      <li>以下のソースプログラム中のOpenMPループでそれぞれトータル時間の30%弱を占めている
        <ul>
          <li><strong>z_solve.f90</strong> の51行目</li>
          <li><strong>y_solve.f90</strong> の51行目</li>
          <li><strong>x_solve.f90</strong> の53行目</li>
        </ul>
      </li>
      <li>MPI通信時間がトータル時間の <strong>6.3%</strong> を占めている</li>
      <li>MPI_Waitall関数がトータル時間の <strong>3.8%</strong> を占めておりこの分プロセス間のロードバランスに問題がある</li>
      <li>MPI_Init関数がトータル時間の <strong>2.3%</strong> を占めておりMPI通信の初期化に時間を要している</li>
    </ul>
  </li>
  <li>
    <p>以下コマンドをBastionノードのopcユーザで実行し、プロファイリングのデータを読み込んで <strong>CubeGUI</strong> を起動します。</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>cube /home/opc/prof/profile.cubex
</code></pre></div>    </div>

    <p><img src="cubegui_page03.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面の評価指標軸で <strong>Time</strong> をクリックし、トータル時間が579.46秒であることを確認します。</p>

    <p><img src="cubegui_page04.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のコールツリー軸で色がより赤に近いサブルーチンを辿り、最上位のサブルーチンで最も時間を占めている <strong>adi</strong> を突き止めます。</p>

    <p><img src="cubegui_page05.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のコールツリー軸で更に時間を要しているサブルーチンを辿り、先に <strong>Score-P</strong> で確認したそれぞれ30％弱のトータル時間を占めているOpenMPループが以下の順に呼び出されていることを確認します。</p>

    <ul>
      <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>x_solve</strong> -&gt; <strong>x_solve.f90</strong> の53行目</li>
      <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>y_solve</strong> -&gt; <strong>y_solve.f90</strong> の51行目</li>
      <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>z_solve</strong> -&gt; <strong>z_solve.f90</strong> の51行目</li>
    </ul>

    <p><img src="cubegui_page06.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のコールツリー軸で <strong>x_solve.f90:53</strong> をクリックし、システム位置軸を1階層下がり、このOpenMPループの149.08秒の内訳が2台の計算ノードでそれぞれ75.70秒と73.38秒であることを確認します。</p>

    <p><img src="cubegui_page07.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のシステム位置軸を更に1階層下がり、このOpenMPループの149.08秒の内訳が36個のMPIプロセスにどのように配分されているかを確認します。</p>

    <p><img src="cubegui_page08.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のシステム位置軸で1番目の計算ノードのランク0のMPIプロセスをクリックし、このMPIプロセスの4.34秒の内訳が2個のOpenMPスレッドにどのように配分されているかを確認します。</p>

    <p><img src="cubegui_page09.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面の評価指標軸で <strong>bytes_sent</strong> をクリックし、MPI通信の総送信データ量が4.66E09バイトであることを確認します。</p>

    <p><img src="cubegui_page10.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のコールツリー軸で色がより赤に近いサブルーチンを辿り、ほぼ全てのデータを送信しているのが以下の順に呼び出さたMPI_Isend関数であることを確認します。</p>

    <ul>
      <li><strong>bt_mz</strong> -&gt; <strong>exch_qbc</strong> -&gt; <strong>MPI_Isend</strong></li>
    </ul>

    <p><img src="cubegui_page11.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のコールツリー軸で <strong>MPI_Isend</strong> をクリックし、システム位置軸を1階層下がり、このMPI_Isend関数の総データ量の4.66E09バイトの内訳が2台の計算ノードでそれぞれ2.35E09バイトと2.31E09バイトであることを確認します。</p>

    <p><img src="cubegui_page12.png" alt="画面ショット" /></p>
  </li>
  <li>
    <p>以下画面のシステム位置軸を更に1階層下がり、このMPI_Isend関数の総データ量の4.66E09バイトの内訳が36個のMPIプロセスにどのように配分されているかを確認します。</p>

    <p><img src="cubegui_page13.png" alt="画面ショット" /></p>
  </li>
</ol>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新日時:</strong> <time class="dt-published" datetime="2024-05-09T10:32:13+09:00">May 9, 2024</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">共有</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Score-P%E3%81%A8CubeGUI%E3%81%A7%E4%B8%A6%E5%88%97%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AA%E3%83%B3%E3%82%B0%20https%3A%2F%2Foracle-japan.github.io%2Focitutorials%2Fhpc%2Fbenchmark%2Fscorep-profiling%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Foracle-japan.github.io%2Focitutorials%2Fhpc%2Fbenchmark%2Fscorep-profiling%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://oracle-japan.github.io/ocitutorials/hpc/benchmark/scorep-profiling/" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/ocitutorials/hpc/benchmark/papi-profiling/" class="pagination--pager" title="PAPIでHPCアプリケーションをプロファイリング
">前へ</a>
    
    
      <a href="/ocitutorials/hpc/tech-knowhow/howto-connect-clusternetwork/" class="pagination--pager" title="クラスタネットワーキングイメージを使ったクラスタ・ネットワーク接続方法
">次へ</a>
    
  </nav>

    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">関連記事</h2>
  <div class="grid__wrapper">
    
  </div>
</div>

  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="検索キーワードを入力してください..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>フォロー</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/#ocijp" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/oracle-japan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/ocitutorials/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 <a href="https://oracle-japan.github.io">Oracle Cloud Infrastructure チュートリアル</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/ocitutorials/assets/js/main.min.js"></script>




<script src="/ocitutorials/assets/js/lunr/lunr.min.js"></script>
<script src="/ocitutorials/assets/js/lunr/lunr-store.js"></script>
<script src="/ocitutorials/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6W7FEC5CEH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6W7FEC5CEH', { 'anonymize_ip': false});
</script>







  
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
  
    <script src="/ocitutorials/assets/js/clipboardrouge.js"></script>
  
    <script src="/ocitutorials/assets/js/tabs.js"></script>
  
    <script src="/ocitutorials/assets/js/sidebar.js"></script>
  


  </body>
</html>
