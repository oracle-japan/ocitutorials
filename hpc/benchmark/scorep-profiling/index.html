<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="ja-JP" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Score-P・Scalasca・CubeGUIで並列アプリケーションをプロファイリング | Oracle Cloud Infrastructure チュートリアル</title>
<meta name="description" content="並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列アプリケーションをオープンソースのScore-P、Scalasca、及びCubeGUIを駆使してプロファイリングし、これを効果的に実行するための有益な情報を取得する方法を解説します。">


  <meta name="author" content="Oracle Japan Solution Engineers">
  
  <meta property="article:author" content="Oracle Japan Solution Engineers">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="Oracle Cloud Infrastructure チュートリアル">
<meta property="og:title" content="Score-P・Scalasca・CubeGUIで並列アプリケーションをプロファイリング">
<meta property="og:url" content="https://oracle-japan.github.io/ocitutorials/hpc/benchmark/scorep-profiling/">


  <meta property="og:description" content="並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列アプリケーションをオープンソースのScore-P、Scalasca、及びCubeGUIを駆使してプロファイリングし、これを効果的に実行するための有益な情報を取得する方法を解説します。">



  <meta property="og:image" content="https://oracle-japan.github.io/ocitutorials/assets/images/rh01-cloud-home-pine-background.jpg">





  <meta property="article:published_time" content="2025-09-01T21:42:48+09:00">






<link rel="canonical" href="https://oracle-japan.github.io/ocitutorials/hpc/benchmark/scorep-profiling/">












<!-- end _includes/seo.html -->



  <link href="/ocitutorials/feed.xml" type="application/atom+xml" rel="alternate" title="Oracle Cloud Infrastructure チュートリアル Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/ocitutorials/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="icon" href="https://www.oracle.com/asset/web/favicons/favicon-32.png" sizes="32x32">
<link rel="icon" href="https://www.oracle.com/asset/web/favicons/favicon-128.png" sizes="128x128">
<link rel="icon" href="https://www.oracle.com/asset/web/favicons/favicon-192.png" sizes="192x192">
<link rel="apple-touch-icon" href="https://www.oracle.com/asset/web/favicons/favicon-120.png" sizes="120x120">
<link rel="apple-touch-icon" href="https://www.oracle.com/asset/web/favicons/favicon-152.png" sizes="152x152">
<link rel="apple-touch-icon" href="https://www.oracle.com/asset/web/favicons/favicon-180.png" sizes="180x180">
<link rel="shortcut icon" type="image/x-icon" href="/ocitutorials/assets/favicon/favicon.ico">
<link rel="manifest" href="/ocitutorials/assets/favicon/site.webmanifest">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/ocitutorials/"><img src="/ocitutorials/assets/images/social-og-oracle-badge.jpg" alt="OCI チュートリアル"></a>
        
        <a class="site-title" href="/ocitutorials/">
          OCI チュートリアル
          <span class="site-subtitle">Oracle Cloud Infrastructure を使ってみよう</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/ocitutorials/#%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E4%B8%80%E8%A6%A7"
                
                
              >チュートリアル一覧</a>
            </li><li class="masthead__menu-item">
              <a
                href="/ocitutorials/about/"
                
                
              >このサイトについて</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">メニュー</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(34, 66, 55, 0.7), rgba(34, 66, 55, 0.7)), url('/ocitutorials/assets/images/rh01-cloud-home-pine-background.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Score-P・Scalasca・CubeGUIで並列アプリケーションをプロファイリング

        
      </h1>
      
        <p class="page__lead">並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列アプリケーションをオープンソースのScore-P、Scalasca、及びCubeGUIを駆使してプロファイリングし、これを効果的に実行するための有益な情報を取得する方法を解説します。
</p>
      
      


      
    </div>
  
  
</div>






  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/" itemprop="item"><span itemprop="name">ホーム</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">></span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/hpc" itemprop="item"><span itemprop="name">Hpc</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">></span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/benchmark" itemprop="item"><span itemprop="name">Benchmark</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">></span>
      
    
      
      
        <li class="current">Score-P・Scalasca・CubeGUIで並列アプリケーションをプロファイリング</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">メニュー</label>
  <ul class="nav__items">
    <li>
      
      <a href=""><span class="nav__sub-title">HPC編</span></a>
      <ul>
        
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-cluster-network/">HPCクラスタを構築する(基礎インフラ手動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-hpc-cluster-withterraform/">HPCクラスタを構築する(基礎インフラ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-hpc-cluster/">HPCクラスタを構築する(スタティッククラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-hpc-cluster-withautoscaling/">HPCクラスタを構築する(オンデマンドクラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-ml-instance/">GPUインスタンスで機械学習にトライ</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-ml-instance-cntnd/">GPUインスタンスで分散機械学習環境を構築する</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster/">GPUクラスタを構築する(基礎インフラ手動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withterraform/">GPUクラスタを構築する(基礎インフラ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withstack/">GPUクラスタを構築する(スタティッククラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withautoscaling/">GPUクラスタを構築する(オンデマンドクラスタ自動構築編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-gpu-cluster-withubuntu/">GPUクラスタを構築する(Ubuntu OS編)</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-nfs-server-fss/">ファイル・ストレージでファイル共有ストレージを構築する</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-lustre-server-fswl/">File Storage with Lustreでファイル共有ストレージを構築する</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-nfs-server/">ブロック・ボリュームでファイル共有ストレージを構築する（BM.Optimized3.36編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-nfs-server-e6/">ブロック・ボリュームでファイル共有ストレージを構築する（BM.Standard.E6.256編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-nfs-server-nvme/">短期保存データ用高速ファイル共有ストレージを構築する</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/spinup-backup-server/">ベア・メタル・インスタンスNFSサーバ向けバックアップサーバを構築する</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/cluster-with-bv-base/">ブロック・ボリュームNFSサーバと基礎インフラ編HPC/GPUクラスタを組み合わせる</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/cluster-with-bv-stack/">ブロック・ボリュームNFSサーバと自動構築編HPC/GPUクラスタを組み合わせる</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-hpl/">HPL実行方法（BM.Optimized3.36編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-hpl-e5/">HPL実行方法（BM.Standard.E5.192編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-hpl-e6/">HPL実行方法（BM.Standard.E6.256編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-stream/">STREAM実行方法（BM.Optimized3.36編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-stream-e5/">STREAM実行方法（BM.Standard.E5.192編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-stream-e6/">STREAM実行方法（BM.Standard.E6.256編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-imb/">Intel MPI Benchmarks実行方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-nccltests/">NCCL Tests実行方法（BM.GPU4.8/BM.GPU.A100-v2.8 Oracle Linux編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-nccltests-ubuntu/">NCCL Tests実行方法（BM.GPU4.8/BM.GPU.A100-v2.8 Ubuntu編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/run-nccltests-h100/">NCCL Tests実行方法（BM.GPU.H100.8編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/bios-setting/">パフォーマンスに関連するベアメタルインスタンスのBIOS設定方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/stop-unused-service/">不要サービス停止によるパフォーマンスチューニング方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/topology-aware-cn-tuning/">クラスタ・ネットワークのトポロジーを考慮したノード間通信最適化方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/openfoam-tuning/">CFD解析フローのコストパフォーマンを向上させるOpenFOAM関連Tips</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/openmpi-perftips/">OpenMPIのMPI通信性能に影響するパラメータとその関連Tips</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/cpu-binding/">パフォーマンスを考慮したプロセス・スレッドのコア割当て指定方法（BM.Optimized3.36編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/cpu-binding-e5/">パフォーマンスを考慮したプロセス・スレッドのコア割当て指定方法（BM.Standard.E5.192編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/cpu-binding-e6/">パフォーマンスを考慮したプロセス・スレッドのコア割当て指定方法（BM.Standard.E6.256編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/openmpi-perftune/">OpenMPIのMPI集合通信チューニング方法（BM.Optimized3.36編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/openmpi-perftune-e5/">OpenMPIのMPI集合通信チューニング方法（BM.Standard.E5.192編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/openmpi-perftune-e6/">OpenMPIのMPI集合通信チューニング方法（BM.Standard.E6.256編）</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/papi-profiling/">PAPIでHPCアプリケーションをプロファイリング</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/scorep-profiling/" class="active">Score-P・Scalasca・CubeGUIで並列アプリケーションをプロファイリング</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/benchmark/profiling-tuning/">プロファイリング情報に基づく並列アプリケーションチューニング方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-connect-clusternetwork/">クラスタネットワーキングイメージを使ったクラスタ・ネットワーク接続方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/rdma-interface-configure/">クラスタ・ネットワーク接続用ネットワークインターフェース作成方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/osimage-for-cluster/">クラスタネットワーキングイメージの選び方</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-create-cnenabled-osimage/">クラスタ・ネットワーク未対応OSを使ったクラスタ・ネットワーク接続方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/determine-cnrelated-issue/">クラスタ・ネットワークに接続する計算/GPUノード作成時の問題判別方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-get-cnrelated-statistics/">クラスタ・ネットワーク統計情報の取得方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/nvme-filesystem/">ベアメタルインスタンスのNVMe SSDローカルディスク領域ファイルシステム作成方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-configure-sharedstorage/">HPC/GPUクラスタ向けファイル共有ストレージの最適な構築手法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/bv-sharedstorage-recovery/">ブロック・ボリュームを使用するNFSサーバのインスタンス障害からの復旧方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/boot-volume-extension/">計算/GPUノードのブート・ボリューム動的拡張方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/howto-choose-osbackuptool/">ファイル共有ストレージ向けバックアップ環境の最適な構築手法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/compute-name-resolution/">計算/GPUノードの効果的な名前解決方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/compute-os-customization/">計算/GPUノードデプロイ時の効果的なOSカスタマイズ方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/compute-host-list/">計算/GPUノードのホスト名リスト作成方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/cluster-resize/">計算/GPUノードの追加・削除・入れ替え方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/cluster-with-pdsh/">pdshで効率的にクラスタ管理オペレーションを実行</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/instance-principal-auth/">オンデマンドクラスタ実現のためのインスタンス・プリンシパル認証設定方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/log-monitoring/">OCIロギングとGrafanaを使用したHPC/GPUクラスタのログ監視方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/metric-monitoring/">OCIモニタリングとGrafanaを使用したHPC/GPUクラスタのメトリック監視方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/gpu-with-ubuntu/">UbuntuをOSとするHPC/機械学習ワークロード向けGPUインスタンス構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/build-openmpi/">Slurm環境での利用を前提とするUCX通信フレームワークベースのOpenMPI構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/setup-slurm-cluster/">Slurmによるリソース管理・ジョブ管理システム構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/install-blas/">線形代数演算ライブラリインストール・利用方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/install-openfoam/">OpenFOAMインストール・利用方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/slurm-tips/">Slurmによるリソース管理・ジョブ管理システム運用Tips</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/build-oraclelinux-hpcenv/">Oracle Linuxプラットフォーム・イメージベースのHPCワークロード実行環境構築方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/kdump-on-baremetal/">ベアメタルインスタンスのカーネルダンプ取得方法</a></li></p>
        
          <p></p><li><a href="/ocitutorials/hpc/tech-knowhow/site-to-site-vpn/">サイト間VPNによるOCIとの拠点間接続方法</a></li></p>
        
      </ul>
    </li>
  </ul>
</nav>
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Score-P・Scalasca・CubeGUIで並列アプリケーションをプロファイリング">
    <meta itemprop="description" content="並列アプリケーションは、ロードバランス不均衡やプロセス間通信の影響等で並列実行数の増加と共にスケーラビリティの低下が発生しますが、HPCワークロードの実行に最適なベアメタル・インスタンスでアプリケーションを高並列実行する場合、高価な計算資源を有効活用する観点から、スケーラビリティ低下の原因を調査しチューニングでスケーラビリティーを改善する開発プロセスを踏んだり、最も効率的な並列実行数を見極める必要があり、これらの判断に必要な情報を得るためにアプリケーションをプロファイリングすることが重要です。本プロファイリング関連Tipsは、ベアメタル・インスタンス上で実行するOpenMPやMPIでコーディングされた並列アプリケーションをオープンソースのScore-P、Scalasca、及びCubeGUIを駆使してプロファイリングし、これを効果的に実行するための有益な情報を取得する方法を解説します。">
    <meta itemprop="datePublished" content="2025-09-01T21:42:48+09:00">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> 目次</h4></header>
              <ul class="toc__menu"><li><a href="#0-概要">0. 概要</a></li><li><a href="#1-プロファイリング環境構築">1. プロファイリング環境構築</a><ul><li><a href="#1-1-hpcクラスタ構築">1-1. HPCクラスタ構築</a></li><li><a href="#1-2-前提条件ソフトウェアインストールセットアップ">1-2. 前提条件ソフトウェアインストール・セットアップ</a></li><li><a href="#1-3-score-pインストールセットアップ">1-3. Score-Pインストール・セットアップ</a></li><li><a href="#1-4-scalascaインストールセットアップ">1-4. Scalascaインストール・セットアップ</a></li><li><a href="#1-5-cubeguiインストールセットアップ">1-5. CubeGUIインストール・セットアップ</a></li></ul></li><li><a href="#2-プロファイリング手法データの取得">2. プロファイリング手法データの取得</a><ul><li><a href="#2-0-概要">2-0. 概要</a></li><li><a href="#2-1-事前準備">2-1. 事前準備</a></li><li><a href="#2-2-浮動小数点演算数を含まないプロファイリング手法データの取得">2-2. 浮動小数点演算数を含まないプロファイリング手法データの取得</a></li><li><a href="#2-3-浮動小数点演算数を含むプロファイリング手法データの取得">2-3. 浮動小数点演算数を含むプロファイリング手法データの取得</a></li></ul></li><li><a href="#3-プロファイリング手法データの確認">3. プロファイリング手法データの確認</a><ul><li><a href="#3-0-概要">3-0. 概要</a></li><li><a href="#3-1-浮動小数点演算数を含まないプロファイリング手法データの確認">3-1. 浮動小数点演算数を含まないプロファイリング手法データの確認</a></li><li><a href="#3-2-浮動小数点演算数を含むプロファイリング手法データの確認">3-2. 浮動小数点演算数を含むプロファイリング手法データの確認</a></li></ul></li><li><a href="#4-トレーシング手法データの取得">4. トレーシング手法データの取得</a></li><li><a href="#5-トレーシング手法データの確認">5. トレーシング手法データの確認</a></li></ul>
            </nav>
          </aside>
        
        <hr />
<h1 id="0-概要">0. 概要</h1>

<p><strong><a href="https://www.vi-hps.org/projects/score-p/">Score-P</a></strong> は、HPCに於ける高並列アプリケーションをスケーラブルで簡易にプロファイリング（※1）することを目的に開発されたオープンソースのプロファイリングツールで、以下の代表的な並列プログラミングモデルに対応しています。</p>

<ul>
  <li>スレッド並列
    <ul>
      <li>OpenMP</li>
      <li>Pthreads</li>
    </ul>
  </li>
  <li>プロセス並列
    <ul>
      <li>MPI</li>
      <li>SHMEM</li>
    </ul>
  </li>
  <li>GPU並列
    <ul>
      <li>CUDA</li>
      <li>OpenCL</li>
      <li>OpenACC</li>
    </ul>
  </li>
</ul>

<p>また <strong>Score-P</strong> は、並列アプリケーションの評価指標に対して、統計的に扱うプロファイリング手法（※1）とタイムスタンプと共に扱うトレーシング手法（※1）の何れにも対応しており、解析用途に合わせたプロファイリングが可能です。</p>

<p>※1）本プロファイリング関連Tipsでは、性能向上を目的とした並列アプリケーションの性能解析プロセス全般を <strong>プロファイリング</strong> と呼称し、この中で評価指標を統計的に扱う <strong>プロファイリング</strong> の1つの方法を <strong>プロファイリング手法</strong> と呼称します。これに対し、評価指標をタイムスタンプと共に扱う <strong>プロファイリング</strong> の1つの方法を <strong>トレーシング手法</strong> と呼称します。</p>

<p>また <strong>Score-P</strong> は、 <strong><a href="https://icl.utk.edu/papi/">PAPI</a></strong> が取得するハードウェアカウンタ等の情報を取り込むことで、以下のように浮動小数点演算数等の情報をサブルーチンや関数単位で集計することが可能です。</p>

<p><img src="cubegui_page01-2.png" alt="画面ショット" /></p>

<p><strong><a href="https://www.scalasca.org/">Scalasca</a></strong> は、 <strong>Score-P</strong> が出力するトレーシング手法のデータをタイムスタンプ情報を元に解析する機能を持ち、並列アプリケーションのクリティカルパスの特定やプロセス間・スレッド間で発生する待ち時間等、プロファイリング手法では得られない情報を提供します。</p>

<p>また <strong>Scalasca</strong> は、 <strong>Score-P</strong> のフロントエンドとしても機能し、殆どの <strong>Score-P</strong> の操作を <strong>Scalasca</strong> から実施することが可能です。</p>

<p><strong><a href="https://www.scalasca.org/scalasca/software/cube-4.x/download.html">CubeGUI</a></strong> は、<strong>Score-P</strong> が出力するプロファイリング手法のデータを読み込むことで、プロファイリング対象の並列アプリケーションを以下の3評価軸で表示し、</p>

<ul>
  <li>評価指標軸
    <ul>
      <li>CPU時間</li>
      <li>MPI通信データ量</li>
      <li>I/Oデータ量</li>
    </ul>
  </li>
  <li>コールツリー軸
    <ul>
      <li>サブルーチン・関数</li>
      <li>MPI関数</li>
      <li>OpenMPループ</li>
    </ul>
  </li>
  <li>システム位置軸
    <ul>
      <li>ノード</li>
      <li>MPIプロセス</li>
      <li>OpneMPスレッド</li>
    </ul>
  </li>
</ul>

<p>以下のようにGUIで視覚的に表示することで、</p>

<p><img src="cubegui_page01.png" alt="画面ショット" /></p>

<p>以下の観点で並列アプリケーションをプロファイリングすることが可能です。</p>

<ul>
  <li>MPI通信によるスケーラビリティへの影響
    <ul>
      <li>MPI通信が全体に対してどの程度の時間を占めているか</li>
      <li>最も通信データ量の多いMPI関数は何か</li>
      <li>各MPIプロセスのMPI通信データ量に偏りがあるか</li>
    </ul>
  </li>
  <li>ロードバランス不均衡によるスケーラビリティへの影響
    <ul>
      <li>MPIで並列化されたループの実行に各計算ノードがどの程度時間を要しているか</li>
      <li>MPIで並列化されたループの実行に各MPIプロセスがどの程度時間を要しているか</li>
      <li>OpenMPで並列化されたループの実行に各OpenMPスレッドがどの程度時間を要しているか</li>
    </ul>
  </li>
  <li>ホットスポットの特定
    <ul>
      <li>最も時間を要しているサブルーチンはどこか</li>
      <li>最もMPI通信データ量の多いMPI関数はどのサブルーチンから呼ばれているか</li>
    </ul>
  </li>
  <li>I/Oによるスケーラビリティへの影響
    <ul>
      <li>I/Oがどの程度の時間を要しているか</li>
    </ul>
  </li>
</ul>

<p>また <strong>CubeGUI</strong> は、 <strong>Scalasca</strong> がトレーシング手法のデータを解析した結果を読み込んで、以下のようにGUIで確認することが可能です。</p>

<p><img src="cubegui_page01-3.png" alt="画面ショット" /></p>

<p>以上の各ツールの関係は、 <strong><a href="https://perftools.pages.jsc.fz-juelich.de/cicd/scorep/tags/latest/html/">Score-Pのウェブサイト</a></strong> に記載のある以下のアーキテクチャ図が参考になります。</p>

<p><img src="https://perftools.pages.jsc.fz-juelich.de/cicd/scorep/tags/latest/html/score-p-overview.png" alt="プロファイリングツール関係図" /></p>

<p>以上を踏まえて本プロファイリング関連Tipsは、 <strong><a href="https://www.nas.nasa.gov/software/npb.html">NAS Parallel Benchmarks</a></strong> をプロファイリング対象の並列アプリケーションに使用し、 <strong>Score-P</strong> 、 <strong>Scalasca</strong> 、及び <strong>CubeGUI</strong> でプロファイリング手法とトレーシング手法を使用するプロファイリングの手順を解説します。</p>

<p>各ソフトウェアは、以下のバージョンを前提とします。</p>

<ul>
  <li>計算ノードOS ： <strong>Oracle Linux</strong> 8.10ベースのHPC <strong><a href="/ocitutorials/hpc/#5-13-クラスタネットワーキングイメージ">クラスタネットワーキングイメージ</a></strong> （※2）</li>
  <li>BastionノードOS ： <strong>Oracle Linux</strong> 8.10ベースのHPC <strong>クラスタネットワーキングイメージ</strong> （※2）</li>
  <li><strong><a href="https://www.open-mpi.org/">OpenMPI</a></strong> ：5.0.6（※3）</li>
  <li><strong>PAPI</strong> ：7.1.0</li>
  <li><strong>Score-P</strong> ：9.1</li>
  <li><strong>Scalasca</strong> ：2.6.2</li>
  <li><strong>CubeGUI</strong> ：4.9</li>
</ul>

<p>※2）<strong><a href="/ocitutorials/hpc/#3-oci-hpcテクニカルtips集">OCI HPCテクニカルTips集</a></strong> の <strong><a href="/ocitutorials/hpc/tech-knowhow/osimage-for-cluster/">クラスタネットワーキングイメージの選び方</a></strong> の <strong><a href="/ocitutorials/hpc/tech-knowhow/osimage-for-cluster/#1-クラスタネットワーキングイメージ一覧">1. クラスタネットワーキングイメージ一覧</a></strong> のイメージ <strong>No.12</strong> です。<br />
※3） <strong><a href="/ocitutorials/hpc/#3-oci-hpcテクニカルtips集">OCI HPCテクニカルTips集</a></strong> の <strong><a href="/ocitutorials/hpc/tech-knowhow/build-openmpi/">Slurm環境での利用を前提とするUCX通信フレームワークベースのOpenMPI構築方法</a></strong> に従って構築された <strong>OpenMPI</strong> です。</p>

<p>本プロファイリング関連Tipsで使用するプロファイリング環境は、プロファイリング対象の並列アプリケーションを <strong>Score-P</strong> や <strong>Scalasca</strong> と共に実行する計算ノードに <strong><a href="/ocitutorials/hpc/#5-1-クラスタネットワーク">クラスタ・ネットワーク</a></strong> で相互接続する2ノードの <strong><a href="https://docs.oracle.com/ja-jp/iaas/Content/Compute/References/computeshapes.htm#bm-hpc-optimized">BM.Optimized3.36</a></strong> を使用し、計算ノードで採取したプロファイリングのデータを <strong>CubeGUI</strong> で解析するBastionノードに1ノードの <strong><a href="https://docs.oracle.com/ja-jp/iaas/Content/Compute/References/computeshapes.htm#flexible">VM.Optimized3.Flex</a></strong> を使用します。<br />
ここで <strong>CubeGUI</strong> がX11ベースのアプリケーションのため、この操作画面を表示するXサーバの稼働する <strong>CubeGUI</strong> 操作端末を用意します。</p>

<p><img src="architecture_diagram.png" alt="システム構成図" /></p>

<p>以降では、以下の順に解説します。</p>

<ol>
  <li><strong><a href="#1-プロファイリング環境構築">プロファイリング環境構築</a></strong></li>
  <li><strong><a href="#2-プロファイリング手法データの取得">プロファイリング手法データの取得</a></strong></li>
  <li><strong><a href="#3-プロファイリング手法データの確認">プロファイリング手法データの確認</a></strong></li>
  <li><strong><a href="#4-トレーシング手法データの取得">トレーシング手法データの取得</a></strong></li>
  <li><strong><a href="#5-トレーシング手法データの確認">トレーシング手法データの確認</a></strong></li>
</ol>

<hr />
<h1 id="1-プロファイリング環境構築">1. プロファイリング環境構築</h1>

<h2 id="1-1-hpcクラスタ構築">1-1. HPCクラスタ構築</h2>

<p>本章は、本プロファイリング関連Tipsで使用するHPCクラスタを構築します。</p>

<p>この構築は、 <strong><a href="/ocitutorials/hpc/#1-oci-hpcチュートリアル集">OCI HPCチュートリアル集</a></strong> の <strong><a href="/ocitutorials/hpc/spinup-cluster-network/">HPCクラスタを構築する(基礎インフラ手動構築編)</a></strong> の手順に従い実施します。</p>

<p>この際、計算ノードとBastionノードを以下のように構成します。</p>

<ul>
  <li>計算ノード <strong>ブート・ボリューム</strong> サイズ ： 100GB以上（インストールするソフトウェアの容量確保のため）</li>
  <li>計算ノードSMT : 無効（※4）</li>
  <li>Bastionノード <strong>ブート・ボリューム</strong> サイズ ： 200GB以上（インストールするソフトウェアの容量確保のため）</li>
  <li>Bastionノードコア数 ： 8コア（ <strong>CubeGUI</strong> のコンパイル高速化のため）</li>
</ul>

<p>※4）SMTを無効化する方法は、 <strong><a href="/ocitutorials/hpc/#2-oci-hpcパフォーマンス関連情報">OCI HPCパフォーマンス関連情報</a></strong> の <strong><a href="/ocitutorials/hpc/benchmark/bios-setting/">パフォーマンスに関連するベアメタルインスタンスのBIOS設定方法</a></strong> を参照してください。</p>

<p>また計算ノードは、プロファイリング利用ユーザのホームディレクトリをNFSで共有します。</p>

<h2 id="1-2-前提条件ソフトウェアインストールセットアップ">1-2. 前提条件ソフトウェアインストール・セットアップ</h2>

<p>本章は、本プロファイリング関連Tipsで使用する <strong>Score-P</strong> の前提条件ソフトウェアとして、計算ノードに <strong>OpenMPI</strong> と <strong>PAPI</strong> をインストール・セットアップします。</p>

<p>この方法は、以下コンテンツのインストール・セットアップの章を参考に、この順番で実行します。</p>

<ol>
  <li><strong><a href="/ocitutorials/hpc/tech-knowhow/build-openmpi/">Slurm環境での利用を前提とするUCX通信フレームワークベースのOpenMPI構築方法</a></strong></li>
  <li><strong><a href="/ocitutorials/hpc/benchmark/papi-profiling/">PAPIでHPCアプリケーションをプロファイリング</a></strong></li>
</ol>

<p>なお本章の作業は、全ての計算ノードで実施します。</p>

<h2 id="1-3-score-pインストールセットアップ">1-3. Score-Pインストール・セットアップ</h2>

<p>本章は、 <strong>Score-P</strong> を計算ノードにインストールし、利用に必要な環境設定を行います。<br />
なお本章の作業は、全ての計算ノードに実施します。</p>

<p>以下コマンドをrootユーザで実行し、 <strong>Score-P</strong> の前提条件ソフトウェアをインストールします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>yum-config-manager <span class="nt">--enable</span> ol8_codeready_builder ol8_developer_EPEL
<span class="nv">$ </span>dnf <span class="nb">install</span> <span class="nt">-y</span> binutils-devel libunwind libunwind-devel gcc-plugin-devel llvm-devel clang-devel cmake
</code></pre></div></div>

<p>次に、以下コマンドをrootユーザで実行し、 <strong>Score-P</strong> をインストールします。<br />
これにより、 <strong>Score-P</strong> が <strong>/opt/scorep</strong> にインストールされます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> wget https://perftools.pages.jsc.fz-juelich.de/cicd/scorep/tags/scorep-9.1/scorep-9.1.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./scorep-9.1.tar.gz
<span class="nv">$ </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/opt/openmpi/bin:<span class="nv">$PATH</span>
<span class="nv">$ </span><span class="nb">cd </span>scorep-9.1 <span class="o">&amp;&amp;</span> ./configure <span class="nt">--with-libgotcha</span><span class="o">=</span>download
<span class="nv">$ </span>make <span class="nt">-j</span> 36 <span class="o">&amp;&amp;</span> make <span class="nb">install</span>
</code></pre></div></div>

<p>次に、以下コマンドを <strong>Score-P</strong> を利用するユーザで実行し、 <strong>Score-P</strong> 実行に必要な環境変数を設定します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"export PATH=/opt/scorep/bin:</span><span class="se">\$</span><span class="s2">PATH"</span> | <span class="nb">tee</span> <span class="nt">-a</span> ~/.bashrc
<span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</code></pre></div></div>

<hr />
<h2 id="1-4-scalascaインストールセットアップ">1-4. Scalascaインストール・セットアップ</h2>

<p>本章は、 <strong>Scalasca</strong> を計算ノードにインストールし、利用に必要な環境設定を行います。<br />
なお本章の作業は、全ての計算ノードに実施します。</p>

<p>以下コマンドをrootユーザで実行し、 <strong>Scalasca</strong> をインストールします。<br />
これにより、 <strong>Scalasca</strong> が <strong>/opt/scalasca</strong> にインストールされます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> wget https://apps.fz-juelich.de/scalasca/releases/scalasca/2.6/dist/scalasca-2.6.2.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./scalasca-2.6.2.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>scalasca-2.6.2 <span class="o">&amp;&amp;</span> ./configure
<span class="nv">$ </span>make <span class="nt">-j</span> 36 <span class="o">&amp;&amp;</span> make <span class="nb">install</span>
</code></pre></div></div>

<p>次に、以下コマンドを <strong>Scalasca</strong> を利用するユーザで実行し、 <strong>Scalasca</strong> 実行に必要な環境変数を設定します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"export PATH=/opt/scalasca/bin:</span><span class="se">\$</span><span class="s2">PATH"</span> | <span class="nb">tee</span> <span class="nt">-a</span> ~/.bashrc
<span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</code></pre></div></div>

<p>次に、以下コマンドをrootユーザで実行した結果となるよう、 <strong>sshd_config</strong> ファイルを修正します。<br />
これは、 <strong>Score-P</strong> と <strong>Scalasca</strong> 実行に必要な環境変数をSSH経由でリモートノードに引き渡すために必要です。<br />
なおこの手順と次の手順は、プロファイリングジョブをジョブスケジューラを介して実行することでリモートノードへの環境変数の引き渡しが行われる場合は、実施する必要がありません。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>diff /etc/ssh/sshd_config_org /etc/ssh/sshd_config
117c117
&lt; <span class="c">#PermitUserEnvironment no</span>
<span class="nt">---</span>
<span class="o">&gt;</span> PermitUserEnvironment <span class="nb">yes
</span>135a136
<span class="o">&gt;</span> AcceptEnv SCOREP_<span class="k">*</span> SCAN_<span class="k">*</span>
<span class="err">$</span>
</code></pre></div></div>

<p>次に、以下コマンドをrootユーザで実行し、先の <strong>sshd_config</strong> ファイルの修正を反映します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>systemctl restart sshd
</code></pre></div></div>

<p>次に、以下のファイルを <strong>Score-P</strong> を利用するユーザで作成し、このパーミッションを <strong>600</strong> とします。<br />
これは、 <strong>Score-P</strong> と <strong>Scalasca</strong> 実行に必要な環境変数をSSH経由でリモートノードに引き渡すために必要です。<br />
なおこの手順は、プロファイリングジョブをジョブスケジューラを介して実行することでリモートノードへの環境変数の引き渡しが行われる場合は、実施する必要がありません。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ~/.ssh/config 
Host <span class="k">*</span>
SendEnv SCOREP_<span class="k">*</span> SCAN_<span class="k">*</span>
<span class="err">$</span>
</code></pre></div></div>

<h2 id="1-5-cubeguiインストールセットアップ">1-5. CubeGUIインストール・セットアップ</h2>

<p>本章は、 <strong>CubeGUI</strong> をBastionノードにインストールし、利用に必要な環境設定を行います。</p>

<p>以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> の前提条件ソフトウェアである <strong><a href="https://www.qt.io/">Qt</a></strong> の前提条件ソフトウェアをインストールします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>yum-config-manager <span class="nt">--enable</span> ol8_codeready_builder ol8_developer_EPEL
<span class="nv">$ </span><span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">-y</span> cmake mesa-libGL mesa-libGL-devel mesa-dri-drivers git xauth xcb-proto xcb-util-devel xcb-util-wm xcb-util-wm-devel xcb-util-cursor xcb-util-cursor-devel libXrender-devel xcb-util-keysyms xcb-util-keysyms-devel libxkbcommon-devel libxkbcommon-x11 libxkbcommon-x11-devel fontconfig-devel freetype-devel libXext-devel libSM-devel libICE-devel
</code></pre></div></div>

<p>次に、以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> の前提条件ソフトウェアである <strong>Qt</strong> をインストールします。<br />
これにより、 <strong>Qt</strong> が <strong>/usr/local/Qt-5.15.17</strong> にインストールされます。<br />
なお、makeコマンドの並列数はBastionノードのコア数に合わせて調整します。<br />
また本手順は、8コアのVMインスタンスで30分程度を要します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> git clone https://code.qt.io/qt/qt5.git
<span class="nv">$ </span><span class="nb">cd </span>qt5 <span class="o">&amp;&amp;</span> git checkout 5.15
<span class="nv">$ </span>perl init-repository
<span class="nv">$ </span>./configure <span class="nt">-opensource</span> <span class="nt">-confirm-license</span> <span class="nt">-nomake</span> examples <span class="nt">-nomake</span> tests
<span class="nv">$ </span>make <span class="nt">-j</span> 16 <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div></div>

<p>次に、以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> の前提条件ソフトウェアである <strong>CubeLib</strong> をインストールします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> wget https://apps.fz-juelich.de/scalasca/releases/cube/4.9/dist/cubelib-4.9.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./cubelib-4.9.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>cubelib-4.9 <span class="o">&amp;&amp;</span> ./configure
<span class="nv">$ </span>make <span class="nt">-j</span> 16 <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div></div>

<p>次に、以下コマンドをopcユーザで実行し、 <strong>CubeGUI</strong> をインストールします。<br />
これにより、 <strong>CubeGUI</strong> が <strong>/opt/cubegui</strong> にインストールされます。<br />
なお、makeコマンドの並列数はBastionノードのコア数に合わせて調整します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> wget https://apps.fz-juelich.de/scalasca/releases/cube/4.9/dist/cubegui-4.9.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./cubegui-4.9.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>cubegui-4.9 <span class="o">&amp;&amp;</span> ./configure <span class="nt">--with-qt</span><span class="o">=</span>/usr/local/Qt-5.15.17/bin <span class="nt">--with-cubelib</span><span class="o">=</span>/opt/cubelib/bin
<span class="nv">$ </span>make <span class="nt">-j</span> 16 <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div></div>

<p>次に、以下コマンドをプロファイリング利用ユーザで実行し、 <strong>CubeGUI</strong> 実行に必要な環境変数を設定します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"export PATH=/usr/local/Qt-5.15.17/bin:/opt/cubegui/bin:</span><span class="se">\$</span><span class="s2">PATH"</span> | <span class="nb">tee</span> <span class="nt">-a</span> ~/.bashrc
<span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</code></pre></div></div>

<p>次に、Xサーバの稼働する <strong>CubeGUI</strong> 操作端末から以下コマンドを実行し、Xフォワードを有効にしてBastionノードにプロファイリング利用ユーザでログインします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh <span class="nt">-X</span> user@bastion_IP
Activate the web console with: systemctl <span class="nb">enable</span> <span class="nt">--now</span> cockpit.socket

Last login: Tue Apr 23 10:35:11 2024 from x.y.z.w
/usr/bin/xauth:  file /home/opc/.Xauthority does not exist
<span class="nv">$ </span><span class="nb">printenv </span>DISPLAY
localhost:10.0
<span class="err">$</span>
</code></pre></div></div>

<p>次に、以下コマンドをプロファイリング利用ユーザで実行し、</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cube
</code></pre></div></div>

<p>以下のように <strong>CubeGUI</strong> のスタート画面が起動することを確認します。</p>

<p><img src="cubegui_page02.png" alt="画面ショット" /></p>

<hr />
<h1 id="2-プロファイリング手法データの取得">2. プロファイリング手法データの取得</h1>

<h2 id="2-0-概要">2-0. 概要</h2>

<p>本章は、<strong>NAS Parallel Benchmarks</strong> をプロファイリング対象とし、 <strong>Scalasca</strong> から起動する <strong>Score-P</strong> でプロファイリング手法によるプロファイリングを実施します。<br />
ここでは、ノードあたり36コアを搭載する <strong>BM.Optimized3.36</strong> を2ノード使用することから、36 MPIプロセス・2 OpenMPスレッドの組み合わせを使用します。<br />
この際、プロファイリングによるオーバーヘッドを考慮した精度の良いプロファイリングを <strong>PAPI</strong> による浮動小数点演算数を含まない場合と含む場合で取得するため、以下の手順で実施します。</p>

<ol>
  <li>事前準備
    <ul>
      <li><strong>NAS Parallel Benchmarks</strong> バイナリの作成</li>
      <li>プロファイリングを実施しない場合の実行時間を計測</li>
      <li>プロファイリングを実施した場合の実行時間を計測</li>
      <li>両者に隔たりがある場合プロファイリング対象を限定するフィルタを作成</li>
    </ul>
  </li>
  <li>浮動小数点演算数を含まないプロファイリング手法データの取得
    <ul>
      <li>フィルタを適用して浮動小数点演算数を含まないプロファイリングを実施</li>
      <li>先の実行時間の隔たりが解消していることを確認</li>
    </ul>
  </li>
  <li>浮動小数点演算数を含むプロファイリング手法データの取得
    <ul>
      <li>フィルタを適用して浮動小数点演算数を含むプロファイリングを実施</li>
      <li>先の実行時間の隔たりが解消していることを確認</li>
    </ul>
  </li>
</ol>

<h2 id="2-1-事前準備">2-1. 事前準備</h2>
<p><a href="#2-1-事前準備"></a>
以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、プロファイリングを実施しない <strong>NAS Parallel Benchmarks</strong> のバイナリ（<strong>bt-mz.D.x_wo_scorep</strong>）とプロファイリングを実施する <strong>NAS Parallel Benchmarks</strong> のバイナリ（<strong>bt-mz.D.x_wi_scorep</strong>）を作成します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/<span class="sb">`</span><span class="nb">hostname</span><span class="sb">`</span> <span class="o">&amp;&amp;</span> wget https://www.nas.nasa.gov/assets/npb/NPB3.4.3-MZ.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> ./NPB3.4.3-MZ.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>NPB3.4.3-MZ/NPB3.4-MZ-MPI
<span class="nv">$ </span><span class="nb">cp </span>config/make.def.template config/make.def
<span class="nv">$ </span>make bt-mz <span class="nv">CLASS</span><span class="o">=</span>D
<span class="nv">$ </span><span class="nb">mv </span>bin/bt-mz.D.x bin/bt-mz.D.x_wo_scorep
<span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/^FC = mpif90/FC = scorep-mpif90/g'</span> config/make.def
<span class="nv">$ </span>diff config/make.def.template config/make.def
32c32
&lt; FC <span class="o">=</span> mpif90
<span class="nt">---</span>
<span class="o">&gt;</span> FC <span class="o">=</span> scorep-mpif90
<span class="nv">$ </span>make clean
<span class="nv">$ </span>make bt-mz <span class="nv">CLASS</span><span class="o">=</span>D
<span class="nv">$ </span><span class="nb">mv </span>bin/bt-mz.D.x bin/bt-mz.D.x_wi_scorep
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、プロファイリングを実施しない場合の実行時間を計測します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-machinefile</span> ~/hostlist.txt <span class="nt">-x</span> <span class="nv">UCX_NET_DEVICES</span><span class="o">=</span>mlx5_2:1 <span class="nt">-x</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span>2 <span class="nt">-bind-to</span> none ./bin/bt-mz.D.x_wo_scorep | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
 Time <span class="k">in </span>seconds <span class="o">=</span>                   168.55
<span class="err">$</span>
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、プロファイリングを実施した場合の実行時間を計測します。<br />
この実行により、カレントディレクトリにディレクトリ <strong>scorep_bt-mz_18p36xO_sum</strong> が作成され、ここに取得したプロファイリングデータが格納されます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scalasca <span class="nt">-analyze</span> mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-machinefile</span> ~/hostlist.txt <span class="s2">"-x UCX_NET_DEVICES=mlx5_2:1"</span> <span class="s2">"-x OMP_NUM_THREADS=2"</span> <span class="s2">"-bind-to none"</span> ./bin/bt-mz.D.x_wi_scorep 2&gt;&amp;1 | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
 Time <span class="k">in </span>seconds <span class="o">=</span>                   361.36
<span class="err">$</span>
</code></pre></div></div>

<p>次に、両者の実行時間に2倍以上の隔たりがあるため、以下のコマンドを計算ノードのプロファイリング利用ユーザで実行し、プロファイリングのオーバーヘッドの原因を調査します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scalasca <span class="nt">-examine</span> <span class="nt">-s</span> scorep_bt-mz_18p36xO_sum
INFO: Post-processing runtime summarization report <span class="o">(</span>profile.cubex<span class="o">)</span>...
/opt/scorep/bin/scorep-score  <span class="nt">-r</span> ./scorep_bt-mz_18p36xO_sum/profile.cubex <span class="o">&gt;</span> ./scorep_bt-mz_18p36xO_sum/scorep.score
INFO: Score report written to ./scorep_bt-mz_18p36xO_sum/scorep.score
<span class="nv">$ </span><span class="nb">head</span> <span class="nt">-n</span> 35 scorep_bt-mz_18p36xO_sum/scorep.score

Estimated aggregate size of event trace:                   3329GB
Estimated requirements <span class="k">for </span>largest trace buffer <span class="o">(</span>max_buf<span class="o">)</span>: 94GB
Estimated memory requirements <span class="o">(</span>SCOREP_TOTAL_MEMORY<span class="o">)</span>:       94GB
<span class="o">(</span>warning: The memory requirements cannot be satisfied by Score-P to avoid
 intermediate flushes when tracing. Set <span class="nv">SCOREP_TOTAL_MEMORY</span><span class="o">=</span>4G to get the
 maximum supported memory or reduce requirements using USR regions filters.<span class="o">)</span>

flt     <span class="nb">type     </span>max_buf[B]          visits  <span class="nb">time</span><span class="o">[</span>s] <span class="nb">time</span><span class="o">[</span>%] <span class="nb">time</span>/visit[us]  region
         ALL 99,883,283,163 137,448,437,987 25760.66   100.0           0.19  ALL
         USR 99,849,533,550 137,419,676,413 12396.99    48.1           0.09  USR
         OMP     29,449,094      24,287,232 12827.09    49.8         528.14  OMP
         COM      2,660,710       3,613,660    11.28     0.0           3.12  COM
         MPI      1,793,380         860,646   525.31     2.0         610.36  MPI
      SCOREP             41              36     0.00     0.0          31.35  SCOREP

         USR 32,473,108,434  44,677,967,872  5688.95    22.1           0.13  binvcrhs
         USR 32,473,108,434  44,677,967,872  4001.02    15.5           0.09  matmul_sub
         USR 32,473,108,434  44,677,967,872  2419.04     9.4           0.05  matvec_sub
         USR    858,664,976   1,152,495,616   139.60     0.5           0.12  lhsinit
         USR    858,664,976   1,152,495,616    91.55     0.4           0.08  binvrhs
         USR    783,427,736   1,080,078,336    56.47     0.2           0.05  exact_solution
         OMP      2,533,092       1,028,096     0.13     0.0           0.12  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:206
         OMP      2,533,092       1,028,096     0.13     0.0           0.12  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:217
         OMP      2,533,092       1,028,096     0.14     0.0           0.13  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:245
         OMP      2,533,092       1,028,096     0.13     0.0           0.13  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:256
         OMP      1,271,592         516,096     1.20     0.0           2.33  <span class="o">!</span><span class="nv">$omp</span> parallel @rhs.f90:29
         OMP      1,266,546         514,048     0.33     0.0           0.65  <span class="o">!</span><span class="nv">$omp</span> parallel @z_solve.f90:44
         OMP      1,266,546         514,048     0.26     0.0           0.51  <span class="o">!</span><span class="nv">$omp</span> parallel @x_solve.f90:47
         OMP      1,266,546         514,048     0.32     0.0           0.62  <span class="o">!</span><span class="nv">$omp</span> parallel @y_solve.f90:44
         OMP      1,266,546         514,048     0.16     0.0           0.32  <span class="o">!</span><span class="nv">$omp</span> parallel @add.f90:23
         MPI        781,865         286,642     0.41     0.0           1.42  MPI_Irecv
         MPI        781,865         286,642     1.04     0.0           3.63  MPI_Isend
         COM        757,016       1,028,096     2.23     0.0           2.17  copy_x_face
         COM        757,016       1,028,096     2.10     0.0           2.04  copy_y_face
<span class="err">$</span>
</code></pre></div></div>

<p>この出力から、呼び出された回数を示す <strong>visits</strong> 列の値が大きい <strong>region</strong> 列を特定し、これに従いプロファイリング対象からこれらの <strong>region</strong> を除外する以下のフィルタを作成します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> ./scorep.filt
SCOREP_REGION_NAMES_BEGIN
    EXCLUDE
        binvcrhs
        matmul_sub
        matvec_sub
        lhsinit
        binvrhs
        exact_solution
SCOREP_REGION_NAMES_END
<span class="err">$</span>
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、先のプロファイリングデータを格納するディレクトリを次の実行に備えて別名に変更します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mv </span>scorep_bt-mz_18p36xO_sum prof_wof_wopapi
</code></pre></div></div>

<h2 id="2-2-浮動小数点演算数を含まないプロファイリング手法データの取得">2-2. 浮動小数点演算数を含まないプロファイリング手法データの取得</h2>

<p>以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、フィルタを適用して浮動小数点演算数を含まないプロファイリング手法データを取得します。<br />
この際、その実行時間を <strong><a href="#2-1-事前準備">2.1. 事前準備</a></strong> のプロファイリングを実施しない場合のもの（168.55秒）と比較し、両者の隔たりが解消していることを確認します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scalasca <span class="nt">-analyze</span> <span class="nt">-f</span> ./scorep.filt mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-machinefile</span> ~/hostlist.txt <span class="s2">"-x UCX_NET_DEVICES=mlx5_2:1"</span> <span class="s2">"-x OMP_NUM_THREADS=2"</span> <span class="s2">"-bind-to none"</span> ./bin/bt-mz.D.x_wi_scorep 2&gt;&amp;1 | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
 Time <span class="k">in </span>seconds <span class="o">=</span>                   173.31
<span class="err">$</span>
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、浮動小数点演算数を含まないプロファイリングレポートを作成します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scalasca <span class="nt">-examine</span> <span class="nt">-s</span> scorep_bt-mz_18p36xO_sum
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、フィルタの適用により除外した <strong>region</strong> が表示されないことを確認します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">head</span> <span class="nt">-n</span> 35 scorep_bt-mz_18p36xO_sum/scorep.score
Estimated aggregate size of event trace:                   1155MB
Estimated requirements <span class="k">for </span>largest trace buffer <span class="o">(</span>max_buf<span class="o">)</span>: 33MB
Estimated memory requirements <span class="o">(</span>SCOREP_TOTAL_MEMORY<span class="o">)</span>:       37MB
<span class="o">(</span>hint: When tracing <span class="nb">set </span><span class="nv">SCOREP_TOTAL_MEMORY</span><span class="o">=</span>37MB to avoid intermediate flushes
 or reduce requirements using USR regions filters.<span class="o">)</span>

flt     <span class="nb">type </span>max_buf[B]     visits  <span class="nb">time</span><span class="o">[</span>s] <span class="nb">time</span><span class="o">[</span>%] <span class="nb">time</span>/visit[us]  region
         ALL 34,411,239 29,464,803 12311.52   100.0         417.84  ALL
         OMP 29,449,094 24,287,232 12006.05    97.5         494.34  OMP
         COM  2,660,710  3,613,660    12.29     0.1           3.40  COM
         MPI  1,793,380    860,646   292.80     2.4         340.21  MPI
         USR    508,014    703,229     0.39     0.0           0.55  USR
      SCOREP         41         36     0.00     0.0          30.41  SCOREP

         OMP  2,533,092  1,028,096     0.13     0.0           0.12  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:206
         OMP  2,533,092  1,028,096     0.13     0.0           0.12  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:217
         OMP  2,533,092  1,028,096     0.14     0.0           0.13  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:245
         OMP  2,533,092  1,028,096     0.13     0.0           0.13  <span class="o">!</span><span class="nv">$omp</span> parallel @exch_qbc.f90:256
         OMP  1,271,592    516,096     1.21     0.0           2.35  <span class="o">!</span><span class="nv">$omp</span> parallel @rhs.f90:29
         OMP  1,266,546    514,048     0.53     0.0           1.03  <span class="o">!</span><span class="nv">$omp</span> parallel @z_solve.f90:44
         OMP  1,266,546    514,048     0.47     0.0           0.92  <span class="o">!</span><span class="nv">$omp</span> parallel @x_solve.f90:47
         OMP  1,266,546    514,048     0.53     0.0           1.03  <span class="o">!</span><span class="nv">$omp</span> parallel @y_solve.f90:44
         OMP  1,266,546    514,048     0.16     0.0           0.31  <span class="o">!</span><span class="nv">$omp</span> parallel @add.f90:23
         MPI    781,865    286,642     0.39     0.0           1.37  MPI_Irecv
         MPI    781,865    286,642     1.00     0.0           3.50  MPI_Isend
         COM    757,016  1,028,096     2.57     0.0           2.50  copy_x_face
         COM    757,016  1,028,096     2.42     0.0           2.35  copy_y_face
         OMP    757,016  1,028,096    11.79     0.1          11.47  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:206
         OMP    757,016  1,028,096     1.32     0.0           1.29  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @exch_qbc.f90:215
         OMP    757,016  1,028,096     8.67     0.1           8.43  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:217
         OMP    757,016  1,028,096     1.05     0.0           1.02  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @exch_qbc.f90:226
         OMP    757,016  1,028,096    18.53     0.2          18.03  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:245
         OMP    757,016  1,028,096     2.33     0.0           2.27  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @exch_qbc.f90:254
         OMP    757,016  1,028,096    12.09     0.1          11.76  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:256
<span class="err">$</span>
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、プロファイリングデータ格納ディレクトリを次の実行に備えて別名に変更します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mv </span>scorep_bt-mz_18p36xO_sum prof_wif_wopapi
</code></pre></div></div>

<h2 id="2-3-浮動小数点演算数を含むプロファイリング手法データの取得">2-3. 浮動小数点演算数を含むプロファイリング手法データの取得</h2>

<p>以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、フィルタを適用して浮動小数点演算数を含むプロファイリング手法データを取得します。<br />
この際、その実行時間を <strong><a href="#2-1-事前準備">2.1. 事前準備</a></strong> のプロファイリングを実施しない場合のもの（168.55秒）と比較し、両者に大きな隔たりが無いことを確認します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ SCOREP_METRIC_PAPI</span><span class="o">=</span>PAPI_FP_OPS scalasca <span class="nt">-analyze</span> <span class="nt">-f</span> ./scorep.filt mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-machinefile</span> ~/hostlist.txt <span class="s2">"-x UCX_NET_DEVICES=mlx5_2:1"</span> <span class="s2">"-x OMP_NUM_THREADS=2"</span> <span class="s2">"-bind-to none"</span> ./bin/bt-mz.D.x_wi_scorep 2&gt;&amp;1 | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
 Time <span class="k">in </span>seconds <span class="o">=</span>                   174.21
<span class="err">$</span>
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、浮動小数点演算数を含むプロファイリングレポートを作成します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scalasca <span class="nt">-examine</span> <span class="nt">-s</span> scorep_bt-mz_18p36xO_sum
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、プロファイリングデータ格納ディレクトリを次の実行に備えて別名に変更します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mv </span>scorep_bt-mz_18p36xO_sum prof_wif_wipapi
</code></pre></div></div>

<hr />
<h1 id="3-プロファイリング手法データの確認">3. プロファイリング手法データの確認</h1>

<h2 id="3-0-概要">3-0. 概要</h2>

<p>本章は、先に取得したプロファイリング手法のデータを、 浮動小数点演算数を含まないものと含むものに分けて、その確認を行います。<br />
なお、 <strong><a href="#2-プロファイリング手法データの取得">2. プロファイリング手法データの取得</a></strong> により、十分精度の期待できるプロファイリング手法を用いたプロファイリングのデータが計算ノードのプロファイリング利用ユーザのホームディレクトリ配下の以下ディレクトリに作成されているため、以降の手順に備えてこれらをBastionノードのプロファイリング利用ユーザのホームディレクトリ配下に予めコピーしておきます。</p>

<ul>
  <li><strong>prof_wif_wopapi</strong> ：浮動小数点演算数を含まない</li>
  <li><strong>prof_wif_wipapi</strong> ：浮動小数点演算数を含む</li>
</ul>

<h2 id="3-1-浮動小数点演算数を含まないプロファイリング手法データの確認">3-1. 浮動小数点演算数を含まないプロファイリング手法データの確認</h2>

<p>以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、トータル時間を評価指標としたプロファイリング結果を表示します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scalasca <span class="nt">-examine</span> <span class="nt">-s</span> <span class="nt">-x</span> <span class="s2">"-s totaltime"</span> prof_wif_wopapi
/opt/scorep/bin/scorep-score  <span class="nt">-s</span> totaltime <span class="nt">-r</span> ./prof_wif_wopapi/profile.cubex <span class="o">&gt;</span> ./prof_wif_wopapi/scorep.score
INFO: Score report written to ./prof_wif_wopapi/scorep.score
<span class="nv">$ </span><span class="nb">head</span> <span class="nt">-n</span> 35 prof_wif_wopapi/scorep.score

Estimated aggregate size of event trace:                   1155MB
Estimated requirements <span class="k">for </span>largest trace buffer <span class="o">(</span>max_buf<span class="o">)</span>: 33MB
Estimated memory requirements <span class="o">(</span>SCOREP_TOTAL_MEMORY<span class="o">)</span>:       37MB
<span class="o">(</span>hint: When tracing <span class="nb">set </span><span class="nv">SCOREP_TOTAL_MEMORY</span><span class="o">=</span>37MB to avoid intermediate flushes
 or reduce requirements using USR regions filters.<span class="o">)</span>

flt     <span class="nb">type </span>max_buf[B]     visits  <span class="nb">time</span><span class="o">[</span>s] <span class="nb">time</span><span class="o">[</span>%] <span class="nb">time</span>/visit[us]  region
         ALL 34,411,239 29,464,803 12311.52   100.0         417.84  ALL
         OMP 29,449,094 24,287,232 12006.05    97.5         494.34  OMP
         MPI  1,793,380    860,646   292.80     2.4         340.21  MPI
         COM  2,660,710  3,613,660    12.29     0.1           3.40  COM
         USR    508,014    703,229     0.39     0.0           0.55  USR
      SCOREP         41         36     0.00     0.0          30.41  SCOREP

         OMP    378,508    514,048  3658.84    29.7        7117.71  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @z_solve.f90:51
         OMP    378,508    514,048  3477.48    28.2        6764.89  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @y_solve.f90:51
         OMP    378,508    514,048  3239.27    26.3        6301.49  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @x_solve.f90:53
         OMP    380,016    516,096   333.57     2.7         646.34  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:77
         OMP    380,016    516,096   323.50     2.6         626.81  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:292
         OMP    380,016    516,096   319.04     2.6         618.18  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:182
         MPI    228,410    286,642   263.62     2.1         919.67  MPI_Waitall
         OMP    380,016    516,096   138.30     1.1         267.98  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:59
         OMP    378,508    514,048   132.91     1.1         258.56  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @add.f90:23
         OMP    380,016    516,096   132.86     1.1         257.44  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:34
         OMP    380,016    516,096    40.97     0.3          79.38  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @rhs.f90:399
         OMP    378,508    514,048    38.46     0.3          74.82  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @z_solve.f90:427
         OMP    378,508    514,048    37.75     0.3          73.44  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @y_solve.f90:405
         MPI         84         36    24.29     0.2      674607.15  MPI_Init
         OMP    757,016  1,028,096    18.53     0.2          18.03  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:245
         OMP    378,508    514,048    14.36     0.1          27.93  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @x_solve.f90:406
         OMP    380,016    516,096    13.04     0.1          25.27  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @rhs.f90:410
         OMP    380,016    516,096    12.58     0.1          24.37  <span class="o">!</span><span class="nv">$omp</span> implicit barrier @rhs.f90:69
         OMP    757,016  1,028,096    12.09     0.1          11.76  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:256
         OMP    757,016  1,028,096    11.79     0.1          11.47  <span class="o">!</span><span class="nv">$omp</span> <span class="k">do</span> @exch_qbc.f90:206
<span class="err">$</span>
</code></pre></div></div>

<p>この出力から、以下のことがわかります。</p>

<ul>
  <li>以下のソースプログラム中のOpenMPループでそれぞれトータル時間の30%弱を占めている
    <ul>
      <li><strong>z_solve.f90</strong> の51行目</li>
      <li><strong>y_solve.f90</strong> の51行目</li>
      <li><strong>x_solve.f90</strong> の53行目</li>
    </ul>
  </li>
  <li>MPI通信時間がトータル時間の <strong>2.4%</strong> を占めている</li>
  <li>MPI_Waitall関数がトータル時間の <strong>2.1%</strong> を占めておりこの分プロセス間のロードバランスに問題がある</li>
</ul>

<p>次に、以下コマンドをBastionノードのプロファイリング利用ユーザで実行し、 <strong>CubeGUI</strong> を起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cube path_to_dir/prof_wif_wopapi/profile.cubex
</code></pre></div></div>

<p><img src="cubegui_page03.png" alt="画面ショット" /></p>

<p>次に、以下画面の評価指標軸で <strong>Time</strong> をクリックし、トータル時間が12,300秒であることを確認します。</p>

<p><img src="cubegui_page04.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で色がより赤に近いサブルーチンを辿り、最上位のサブルーチンで最も時間を占めている <strong>adi</strong> を突き止めます。</p>

<p><img src="cubegui_page05.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で更に時間を要しているサブルーチンを辿り、先に確認したそれぞれ30％弱のトータル時間を占めているOpenMPループが以下の順に呼び出されていることを確認します。</p>

<ul>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>x_solve</strong> -&gt; <strong>x_solve.f90</strong> の53行目</li>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>y_solve</strong> -&gt; <strong>y_solve.f90</strong> の51行目</li>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>z_solve</strong> -&gt; <strong>z_solve.f90</strong> の51行目</li>
</ul>

<p><img src="cubegui_page06.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で <strong>x_solve.f90:53</strong> をクリックし、システム位置軸を1階層下がり、このOpenMPループの3,196.35秒の内訳が2台の計算ノードでそれぞれ1,624.47秒と1,571.88秒であることを確認します。</p>

<p><img src="cubegui_page07.png" alt="画面ショット" /></p>

<p>次に、以下画面のシステム位置軸を更に1階層下がり、このOpenMPループの3,196.35秒の内訳が36個のMPIプロセスにどのように配分されているかを確認します。</p>

<p><img src="cubegui_page08.png" alt="画面ショット" /></p>

<p>次に、以下画面のシステム位置軸で1番目の計算ノードのランク0のMPIプロセスをクリックし、このMPIプロセスの89.36秒の内訳が2個のOpenMPスレッドにどのように配分されているかを確認します。</p>

<p><img src="cubegui_page09.png" alt="画面ショット" /></p>

<p>次に、以下画面の評価指標軸で <strong>bytes_sent</strong> をクリックし、MPI通信の総送信データ量が43.1Gバイトであることを確認します。</p>

<p><img src="cubegui_page10.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で色がより赤に近いサブルーチンを辿り、ほぼ全てのデータを送信しているのが以下の順に呼び出さたMPI_Isend関数であることを確認します。</p>

<ul>
  <li><strong>bt_mz</strong> -&gt; <strong>exch_qbc</strong> -&gt; <strong>MPI_Isend</strong></li>
</ul>

<p><img src="cubegui_page11.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で <strong>MPI_Isend</strong> をクリックし、システム位置軸を1階層下がり、このMPI_Isend関数の総データ量の43.1Gバイトの内訳が2台の計算ノードでそれぞれ21.5Gバイトと21.6Gバイトであることを確認します。</p>

<p><img src="cubegui_page12.png" alt="画面ショット" /></p>

<p>次に、以下画面のシステム位置軸を更に1階層下がり、このMPI_Isend関数の総データ量の43.1Gバイトの内訳が36個のMPIプロセスにどのように配分されているかを確認します。</p>

<p><img src="cubegui_page13.png" alt="画面ショット" /></p>

<hr />
<h2 id="3-2-浮動小数点演算数を含むプロファイリング手法データの確認">3-2. 浮動小数点演算数を含むプロファイリング手法データの確認</h2>

<p>以下コマンドをBastionノードのプロファイリング利用ユーザで実行し、 <strong>CubeGUI</strong> を起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cube path_to_dir/prof_wif_wipapi/profile.cubex
</code></pre></div></div>

<p><img src="cubegui_page14.png" alt="画面ショット" /></p>

<p>次に、以下画面の評価指標軸で <strong>PAPI_FP_OPS</strong> をクリックし、総浮動小数点演算数が50.2TFLOPであることを確認します。</p>

<p><img src="cubegui_page15.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で色がより赤に近いサブルーチンを辿り、最上位のサブルーチンで最も浮動小数点演算数の多い <strong>adi</strong> を突き止めます。</p>

<p><img src="cubegui_page16.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で更に時間を要しているサブルーチンを辿り、最も浮動小数点演算数の多い3個のOpenMPループでそれぞれ14.5TFLOP、14.6TFLOP、及び14.6TFLOP実行され、これらが以下の順に呼び出されていることを確認します。</p>

<ul>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>x_solve</strong> -&gt; <strong>x_solve.f90</strong> の53行目</li>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>y_solve</strong> -&gt; <strong>y_solve.f90</strong> の51行目</li>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>z_solve</strong> -&gt; <strong>z_solve.f90</strong> の51行目</li>
</ul>

<p><img src="cubegui_page17.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で <strong>x_solve.f90:53</strong> をクリックし、システム位置軸を1階層下がり、このOpenMPループの14.5TFLOPの内訳が2台の計算ノードでそれぞれ7.24TFLOPと7.22TFLOPであることを確認します。</p>

<p><img src="cubegui_page18.png" alt="画面ショット" /></p>

<p>次に、以下画面のシステム位置軸を更に1階層下がり、このOpenMPループの14.5TFLOPの内訳が36個のMPIプロセスにどのように配分されているかを確認します。</p>

<p><img src="cubegui_page19.png" alt="画面ショット" /></p>

<p>次に、以下画面のシステム位置軸で1番目の計算ノードのランク0のMPIプロセスをクリックし、このMPIプロセスの402GFLOPの内訳が2個のOpenMPスレッドにどのように配分されているかを確認します。</p>

<p><img src="cubegui_page20.png" alt="画面ショット" /></p>

<hr />
<h1 id="4-トレーシング手法データの取得">4. トレーシング手法データの取得</h1>

<p>本章は、<strong>NAS Parallel Benchmarks</strong> をプロファイリング対象とし、 <strong>Scalasca</strong> から起動する <strong>Score-P</strong> でトレーシング手法によるプロファイリングを取得します。<br />
ここでは、先のプロファイリング手法と同様36 MPIプロセス・2 OpenMPスレッドの組み合わせを使用します。<br />
この際、プロファイリングによるオーバーヘッド発生を考慮した精度の良いプロファイリングデータを取得するため、先のプロファイリング手法で作成したフィルタを使用します。</p>

<p>以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、フィルタを適用してトレーシング手法データを取得します。<br />
この際、その実行時間を <strong><a href="#2-1-事前準備">2.1. 事前準備</a></strong> のプロファイリングを実施しない場合のもの（168.55秒）と比較し、両者に大きな隔たりが無いことを確認します。<br />
ここで、 <strong><a href="#2-2-浮動小数点演算数を含まないプロファイリング手法データの取得">2.2. 浮動小数点演算数を含まないプロファイリング手法データの取得</a></strong> のフィルタを適用した際のプロファイリングレポートの出力 <strong>Estimated memory requirements (SCOREP_TOTAL_MEMORY)</strong> に表示されているトレーシング手法のデータを格納するために必要なメモリ領域サイズの37MBを環境変数に指定して実行することに留意します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ SCOREP_TOTAL_MEMORY</span><span class="o">=</span>37M scalasca <span class="nt">-analyze</span> <span class="nt">-q</span> <span class="nt">-t</span> <span class="nt">-f</span> ./scorep.filt mpirun <span class="nt">-n</span> 36 <span class="nt">-N</span> 18 <span class="nt">-machinefile</span> ~/hostlist.txt <span class="s2">"-x UCX_NET_DEVICES=mlx5_2:1"</span> <span class="s2">"-x OMP_NUM_THREADS=2"</span> <span class="s2">"-bind-to none"</span> ./bin/bt-mz.D.x_wi_scorep 2&gt;&amp;1 | <span class="nb">grep</span> <span class="s2">"Time in seconds"</span>
 Time <span class="k">in </span>seconds <span class="o">=</span>                   174.91
</code></pre></div></div>

<p>次に、以下コマンドを計算ノードのプロファイリング利用ユーザで実行し、プロファイリングデータ格納ディレクトリを次の実行に備えて別名に変更します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mv </span>scorep_bt-mz_18p36xO_trace trac_wif
</code></pre></div></div>

<hr />
<h1 id="5-トレーシング手法データの確認">5. トレーシング手法データの確認</h1>

<p>本章は、先に取得したトレーシング手法のデータを確認します。<br />
なお、 <strong><a href="#4-トレーシング手法データの取得">4. トレーシング手法データの取得</a></strong> により、十分精度の期待できるトレーシング手法を用いたプロファイリングのデータが計算ノードのプロファイリング利用ユーザのホームディレクトリ配下のディレクトリ <strong>trac_wif</strong> に作成されているため、以降の手順に備えてこれをBastionノードのプロファイリング利用ユーザのホームディレクトリ配下に予めコピーしておきます。</p>

<p>以下コマンドをBastionノードのプロファイリング利用ユーザで実行し、 <strong>CubeGUI</strong> を起動します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cube path_to_dir/trac_wif/scout.cubex
</code></pre></div></div>

<p><img src="cubegui_page21.png" alt="画面ショット" /></p>

<p>次に、以下画面の評価指標軸で <strong>Critical path profile</strong> をクリックし、プログラム実行時のクリティカルパスに176.93秒要していることを確認します。</p>

<p><img src="cubegui_page22.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で色がより赤に近いサブルーチンを辿り、最上位のサブルーチンで最もクリティカルパスに占める実行時間の多い <strong>adi</strong> を突き止めます。</p>

<p><img src="cubegui_page23.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で更に実行時間の多いサブルーチンを辿り、最もクリティカルパスに占める実行時間の多い3個のOpenMPループでそれぞれ45.72秒、49.72秒、及び53.36秒を要し、これらが以下の順に呼び出されていることを確認します。</p>

<ul>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>x_solve</strong> -&gt; <strong>x_solve.f90</strong> の53行目</li>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>y_solve</strong> -&gt; <strong>y_solve.f90</strong> の51行目</li>
  <li><strong>bt_mz</strong> -&gt; <strong>adi</strong> -&gt; <strong>z_solve</strong> -&gt; <strong>z_solve.f90</strong> の51行目</li>
</ul>

<p><img src="cubegui_page24.png" alt="画面ショット" /></p>

<p>次に、以下画面のコールツリー軸で <strong>x_solve.f90:53</strong> をクリックし、システム位置軸を1階層下がり、このOpenMPループの45.72秒の内訳が2台の計算ノードでそれぞれ45.37秒と0.35秒であり、片側の計算ノードでほぼすべてのクリティカルパスの実行時間が占められていることを確認します。</p>

<p><img src="cubegui_page25.png" alt="画面ショット" /></p>

<p>次に、以下画面のシステム位置軸を更に1階層下がり、このOpenMPループの45.72秒の内訳が36個のMPIプロセスにどのように配分されているかを確認、ランク11のMPIプロセスで大部分のクリティカルパスの実行時間が占められていることを確認します。</p>

<p><img src="cubegui_page26.png" alt="画面ショット" /></p>

<p>次に、以下画面のシステム位置軸で1番目の計算ノードのランク11のMPIプロセスをクリックし、このMPIプロセスの36.63秒の内訳が2個のOpenMPスレッドにどのように配分されているかを確認します。</p>

<p><img src="cubegui_page27.png" alt="画面ショット" /></p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新日時:</strong> <time class="dt-published" datetime="2025-09-01T21:42:48+09:00">September 1, 2025</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">共有</h4>

  <a href="https://x.com/intent/tweet?text=Score-P%E3%83%BBScalasca%E3%83%BBCubeGUI%E3%81%A7%E4%B8%A6%E5%88%97%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AA%E3%83%B3%E3%82%B0%20https%3A%2F%2Foracle-japan.github.io%2Focitutorials%2Fhpc%2Fbenchmark%2Fscorep-profiling%2F" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Foracle-japan.github.io%2Focitutorials%2Fhpc%2Fbenchmark%2Fscorep-profiling%2F" class="btn btn--facebook" aria-label="Share on Facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 Facebook">
    <i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://oracle-japan.github.io/ocitutorials/hpc/benchmark/scorep-profiling/" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

  <a href="https://bsky.app/intent/compose?text=Score-P%E3%83%BBScalasca%E3%83%BBCubeGUI%E3%81%A7%E4%B8%A6%E5%88%97%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AA%E3%83%B3%E3%82%B0%20https%3A%2F%2Foracle-japan.github.io%2Focitutorials%2Fhpc%2Fbenchmark%2Fscorep-profiling%2F" class="btn btn--bluesky" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 Bluesky">
    <i class="fab fa-fw fa-bluesky" aria-hidden="true"></i><span> Bluesky</span>
  </a>
</section>


      
  <nav class="pagination">
    
      <a href="/ocitutorials/hpc/benchmark/papi-profiling/" class="pagination--pager" title="PAPIでHPCアプリケーションをプロファイリング">前へ</a>
    
    
      <a href="/ocitutorials/hpc/benchmark/profiling-tuning/" class="pagination--pager" title="プロファイリング情報に基づく並列アプリケーションチューニング方法">次へ</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">関連記事</h2>
  <div class="grid__wrapper">
    
  </div>
</div>

  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="検索キーワードを入力してください..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>フォロー</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/#ocijp" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/oracle-japan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/ocitutorials/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2025 <a href="https://oracle-japan.github.io">Oracle Cloud Infrastructure チュートリアル</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/ocitutorials/assets/js/main.min.js"></script>




<script src="/ocitutorials/assets/js/lunr/lunr.min.js"></script>
<script src="/ocitutorials/assets/js/lunr/lunr-store.js"></script>
<script src="/ocitutorials/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6W7FEC5CEH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6W7FEC5CEH', { 'anonymize_ip': false});
</script>







  
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
  
    <script src="/ocitutorials/assets/js/clipboardrouge.js"></script>
  
    <script src="/ocitutorials/assets/js/tabs.js"></script>
  
    <script src="/ocitutorials/assets/js/sidebar.js"></script>
  


  </body>
</html>
