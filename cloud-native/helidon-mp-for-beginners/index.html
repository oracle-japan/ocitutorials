<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="ja-JP" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Helidon(MP)を始めてみよう | Oracle Cloud Infrastructure チュートリアル</title>
<meta name="description" content="Helidon MPは、Oracleが提供するMicroProfile準拠のマイクロサービスの開発に適したJavaアプリケーションフレームワークです。こちらのハンズオンは、サンプルアプリケーションの構築を通して、Helidonの特徴や使いやすさを学んでいただけるコンテンツになっています。">


  <meta name="author" content="Oracle Japan Solution Engineers">
  
  <meta property="article:author" content="Oracle Japan Solution Engineers">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="Oracle Cloud Infrastructure チュートリアル">
<meta property="og:title" content="Helidon(MP)を始めてみよう">
<meta property="og:url" content="https://oracle-japan.github.io/ocitutorials/cloud-native/helidon-mp-for-beginners/">


  <meta property="og:description" content="Helidon MPは、Oracleが提供するMicroProfile準拠のマイクロサービスの開発に適したJavaアプリケーションフレームワークです。こちらのハンズオンは、サンプルアプリケーションの構築を通して、Helidonの特徴や使いやすさを学んでいただけるコンテンツになっています。">



  <meta property="og:image" content="https://oracle-japan.github.io/ocitutorials/assets/images/rh01-cloud-home-pine-background.jpg">





  <meta property="article:published_time" content="2024-08-02T00:22:37+09:00">






<link rel="canonical" href="https://oracle-japan.github.io/ocitutorials/cloud-native/helidon-mp-for-beginners/">












<!-- end _includes/seo.html -->



  <link href="/ocitutorials/feed.xml" type="application/atom+xml" rel="alternate" title="Oracle Cloud Infrastructure チュートリアル Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/ocitutorials/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/ocitutorials/"><img src="/ocitutorials/assets/images/social-og-oracle-badge.jpg" alt="OCI チュートリアル"></a>
        
        <a class="site-title" href="/ocitutorials/">
          OCI チュートリアル
          <span class="site-subtitle">Oracle Cloud Infrastructure を使ってみよう</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/ocitutorials/#%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E4%B8%80%E8%A6%A7"
                
                
              >チュートリアル一覧</a>
            </li><li class="masthead__menu-item">
              <a
                href="/ocitutorials/about/"
                
                
              >このサイトについて</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">メニュー</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: url('/ocitutorials/assets/images/rh01-cloud-home-pine-background.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Helidon(MP)を始めてみよう

        
      </h1>
      
        <p class="page__lead">Helidon MPは、Oracleが提供するMicroProfile準拠のマイクロサービスの開発に適したJavaアプリケーションフレームワークです。こちらのハンズオンは、サンプルアプリケーションの構築を通して、Helidonの特徴や使いやすさを学んでいただけるコンテンツになっています。
</p>
      
      


      
    </div>
  
  
</div>






  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/" itemprop="item"><span itemprop="name">ホーム</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">></span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ocitutorials/cloud-native" itemprop="item"><span itemprop="name">Cloud native</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">></span>
      
    
      
      
        <li class="current">Helidon(MP)を始めてみよう</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">メニュー</label>
  <ul class="nav__items">
    <li>
      
      <a href=""><span class="nav__sub-title">Cloud Native編</span></a>
      <ul>
        
        
          <p></p><li><a href="/ocitutorials/cloud-native/devops-for-commons/">Oracle Cloud Infrastructure(OCI) DevOps事前準備</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/devops-for-beginners-compute/">Oracle Cloud Infrastructure(OCI) DevOpsことはじめ-Compute編-</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/devops-for-beginners-oke/">Oracle Cloud Infrastructure(OCI) DevOpsことはじめ-OKE編-</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/devops-for-beginners-functions/">Oracle Cloud Infrastructure(OCI) DevOpsことはじめ-Oracle Functions編-</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/ci-for-beginners/">OCI Container Instances をプロビジョニングしよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/oke-for-commons/">Oracle Container Engine for Kubernetes(OKE)をプロビジョニングしよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/oke-for-beginners/">Oracle Container Engine for Kubernetes(OKE)でKubernetesを動かしてみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/oke-for-intermediates/">KubernetesでサンプルアプリケーションのデプロイとCI/CDを体験してみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/oke-for-advances/">Oracle Container Engine for Kubernetes(OKE)でサンプルマイクロサービスアプリケーションをデプロイしてオブザバビリティツールを利用してみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/oke-observability-for-advances/">Oracle Container Engine for Kubernetes(OKE)でサンプルマイクロサービスアプリケーションをデプロイしてOCIのオブザバビリティサービスを利用してみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/fn-for-beginners/">Fn Project ハンズオン</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/functions-for-beginners/">Oracle Functions ハンズオン</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/functions-apigateway-for-beginners/">Oracle Cloud Infrasturcture API Gateway + Oracle Functionsハンズオン</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/functions-vmshape-for-intermediates/">Oracle Functionsを利用した仮想マシン (VM) のシェイプ変更</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/functions-ords-for-intermediates/">Oracle Functionsを利用したORDSでのデータベースアクセス</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/functions-nosql-for-intermediates/">Oracle Functionsを利用したNoSQLデータベースアクセス</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/functions-apigateway-for-intermediates/">Oracle Functionsを利用したAPI Gatewayの認証</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/apigateway-for-beginners/">OCI API Gatewayハンズオン</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/osm-for-beginners/">OCI Service Meshを使ってサービスメッシュ環境を作ろう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/helidon-mp-for-beginners/" class="active">Helidon(MP)を始めてみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/helidon-se-for-beginners/">Helidon(SE)を始めてみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/wls-for-oci-provisioning/">WebLogic Server for OCIをプロビジョニングしてみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/wls-for-oci-migration/">WebLogic Server for OCIにアプリケーションを移行してみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/wls-for-oke-provisioning/">WebLogic Server for OKEをプロビジョニングしてみよう</a></li></p>
        
          <p></p><li><a href="/ocitutorials/cloud-native/microtx-for-beginners/">Oracle Transaction Manager for Microservices(MicroTx)を体験してみよう</a></li></p>
        
      </ul>
    </li>
  </ul>
</nav>
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Helidon(MP)を始めてみよう">
    <meta itemprop="description" content="Helidon MPは、Oracleが提供するMicroProfile準拠のマイクロサービスの開発に適したJavaアプリケーションフレームワークです。こちらのハンズオンは、サンプルアプリケーションの構築を通して、Helidonの特徴や使いやすさを学んでいただけるコンテンツになっています。">
    <meta itemprop="datePublished" content="2024-08-02T00:22:37+09:00">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> 目次</h4></header>
              <ul class="toc__menu"><li><a href="#前提条件">前提条件</a></li><li><a href="#事前準備">事前準備</a><ul><li><a href="#mavenのインストール">Mavenのインストール</a></li></ul></li><li><a href="#1helidon-cliでベースプロジェクトを作成してみよう">1.Helidon CLIでベースプロジェクトを作成してみよう</a></li><li><a href="#2サンプルアプリケーションを動かしてみよう">2.サンプルアプリケーションを動かしてみよう</a><ul><li><a href="#2-1-サンプルアプリケーションのディレクトリ構成を確認しよう">2-1. サンプルアプリケーションのディレクトリ構成を確認しよう</a></li><li><a href="#2-2-サンプルアプリケーションの設定ファイルを確認しよう">2-2. サンプルアプリケーションの設定ファイルを確認しよう</a></li><li><a href="#2-3-サンプルアプリケーションのソースコードprefecturejavaを確認しよう">2-3. サンプルアプリケーションのソースコード(Prefecture.java)を確認しよう</a></li><li><a href="#2-4-サンプルアプリケーションのソースコードprefectureresourcejavaを確認しよう">2-4. サンプルアプリケーションのソースコード(PrefectureResource.java)を確認しよう</a></li><li><a href="#2-5-サンプルアプリケーションの動作を確認しよう">2-5. サンプルアプリケーションの動作を確認しよう</a></li></ul></li><li><a href="#3サンプルアプリケーションを拡張してみよう">3.サンプルアプリケーションを拡張してみよう</a><ul><li><a href="#3-1-都道府県エリアを管理するentityを作成しよう">3-1. 都道府県エリアを管理するEntityを作成しよう</a></li><li><a href="#3-2-都道府県エリアを取得するrestインタフェースを作成しよう">3-2. 都道府県エリアを取得するRESTインタフェースを作成しよう</a></li><li><a href="#3-3-都道府県エリアの情報を元の都道府県情報に追加しよう">3-3. 都道府県エリアの情報を元の都道府県情報に追加しよう</a></li><li><a href="#3-4-persistencexmlを変更しよう">3-4. persistence.xmlを変更しよう</a></li><li><a href="#3-5-ddlを編集しよう">3-5. DDLを編集しよう</a></li><li><a href="#3-6-拡張したサンプルアプリケーションを動かしてみよう">3-6. 拡張したサンプルアプリケーションを動かしてみよう</a></li></ul></li><li><a href="#まとめ">まとめ</a></li></ul>
            </nav>
          </aside>
        
        <p><strong>チュートリアル一覧に戻る :</strong> <a href="../..">Oracle Cloud Infrastructure チュートリアル</a></p>

<p>Oracleでは、マイクロサービスの開発に適した軽量なJavaアプリケーションフレームワークとして<code class="language-plaintext highlighter-rouge">Helidon</code>を開発しています。<br />
Helidonは、SEとMPという2つのエディションがあります。<br />
このチュートリアルでは、MicroProfile準拠のエディションであるMPの方を取り上げていきます。</p>

<p class="notice--info"><strong>MicroProfileについて</strong><br />
MicroProfileは、マイクロサービス環境下で複数言語との相互連携を保ちながら、サービスを構築するために複数ベンダーによって策定されているJavaの標準仕様のことです。<br />
詳細は<a href="https://microprofile.io/">こちら</a>をご確認ください。</p>

<h2 id="前提条件">前提条件</h2>
<ul>
  <li><a href="/ocitutorials/adb/adb101-provisioning/#2-adbインスタンスを作成してみよう">こちら</a>の手順が完了していること
    <ul>
      <li>このチュートリアルでは、データベースとしてOracle Cloud Infrastructure上の自律型データベースであるAutonomous Transaction Processing(以降、ATPとします)を利用します</li>
    </ul>
  </li>
  <li><a href="/ocitutorials/adb/adb104-connect-using-wallet/#1-クレデンシャルウォレットのダウンロード">こちら</a>の手順が完了していること
    <ul>
      <li>このチュートリアルでは、ATPに接続するためにクレデンシャル・ウォレットを利用します。事前にクレデンシャル・ウォレットをダウンロードしてください</li>
      <li>実施する手順は<code class="language-plaintext highlighter-rouge">1. クレデンシャル・ウォレットのダウンロード</code>のみで問題ありません</li>
    </ul>
  </li>
  <li>ハンズオン環境のVMイメージに<a href="https://docs.oracle.com/en-us/iaas/oracle-linux/developer/index.htm">Oracle Linux Cloud Developer image</a>を利用すること
    <ul>
      <li>Oracle Linux Cloud Developer imageには、このチュートリアルで利用するJDK 21とGitコマンドがインストールされています</li>
    </ul>
  </li>
</ul>

<p class="notice--info"><strong>Helidonのビルドおよび動作環境について</strong><br />
Helidon4.xをビルドおよび動作させるにはJDK 21以上が必要です。</p>

<h2 id="事前準備">事前準備</h2>
<p>ここでは、このチュートリアルを実施するための事前準備を行います。<br />
予め、Oracle Linux Cloud Developer imageでVMが作成されていることを前提とします。</p>

<h3 id="mavenのインストール">Mavenのインストール</h3>

<p>アプリケーションのプロジェクト作成やビルドに必要なMavenコマンドをインストールします。</p>

<p>Mavenのバイナリをダウンロードします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dlcdn.apache.org/maven/maven-3/3.9.6/binaries/apache-maven-3.9.6-bin.zip
</code></pre></div></div>

<p>ダウンロードしたバイナリを解凍します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unzip apache-maven-3.9.6-bin.zip
</code></pre></div></div>

<p>PATHを通します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mv </span>apache-maven-3.9.6 /usr/bin
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PATH</span><span class="s2">:/usr/bin/apache-maven-3.9.6/bin"</span>
</code></pre></div></div>

<p>mavenコマンドが実行できることを確認します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn <span class="nt">--version</span>
</code></pre></div></div>

<p>以下のように表示されれば問題ありません。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>opc@helidon ~]<span class="nv">$ </span>mvn <span class="nt">--version</span>
Apache Maven 3.9.6 <span class="o">(</span>bc0240f3c744dd6b6ec2920b3cd08dcc295161ae<span class="o">)</span>
Maven home: /usr/bin/apache-maven-3.9.6
Java version: 21.0.2, vendor: Oracle Corporation, runtime: /usr/lib64/graalvm/graalvm-java21
Default locale: en_US, platform encoding: UTF-8
OS name: <span class="s2">"linux"</span>, version: <span class="s2">"5.15.0-203.146.5.1.el8uek.x86_64"</span>, <span class="nb">arch</span>: <span class="s2">"amd64"</span>, family: <span class="s2">"unix"</span>
</code></pre></div></div>

<h2 id="1helidon-cliでベースプロジェクトを作成してみよう">1.Helidon CLIでベースプロジェクトを作成してみよう</h2>
<p>ここでは、Helidon CLIを利用して、ベースプロジェクトを作成してみます。</p>

<p>Helidonをセットアップするには<code class="language-plaintext highlighter-rouge">Helidon CLI</code>が便利です。<br />
このチュートリアルでは、Linux環境の前提で手順を進めますが、WindowsやMac OSでも同じようにインストールすることができます。</p>

<p>まずは、curlコマンドを利用してバイナリを取得し、実行可能な状態にします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-O</span> https://helidon.io/cli/latest/linux/helidon
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x ./helidon
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mv</span> ./helidon /usr/bin/
</code></pre></div></div>

<p>これで、Helidon CLIのインストールは完了です！</p>

<p>上記が完了すると、<code class="language-plaintext highlighter-rouge">helidon</code>コマンドが利用可能になります。<br />
まず初めに、<code class="language-plaintext highlighter-rouge">init</code>コマンドを叩いてみましょう。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helidon init
</code></pre></div></div>

<p>ベースプロジェクトを構築するためのインタラクティブなプロンプトが表示されます。<br />
以下のように入力していきます。</p>

<table>
  <thead>
    <tr>
      <th>項目</th>
      <th>入力パラメータ</th>
      <th>備考</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Helidon versions</td>
      <td>1</td>
      <td>最新の<code class="language-plaintext highlighter-rouge">4.0.8</code></td>
    </tr>
    <tr>
      <td>Helidon Flavor</td>
      <td>2</td>
      <td>mp</td>
    </tr>
    <tr>
      <td>Application Type</td>
      <td>2</td>
      <td>databse</td>
    </tr>
    <tr>
      <td>Media Support</td>
      <td>1</td>
      <td>Jackson</td>
    </tr>
    <tr>
      <td>JPA Implementation</td>
      <td>(そのままEnter)</td>
      <td>Hibernate</td>
    </tr>
    <tr>
      <td>Connection Pool</td>
      <td>(そのままEnter)</td>
      <td>HikariCP</td>
    </tr>
    <tr>
      <td>Database Server</td>
      <td>3</td>
      <td>Oracle DB</td>
    </tr>
    <tr>
      <td>Auto DDL</td>
      <td>yes</td>
      <td>DDLの作成</td>
    </tr>
    <tr>
      <td>Persistence Unit Name</td>
      <td>test</td>
      <td>JPAのユニット名</td>
    </tr>
    <tr>
      <td>Datasource Name</td>
      <td>test</td>
      <td>データベース名</td>
    </tr>
    <tr>
      <td>Project groupId</td>
      <td>com.example.handson.helidon</td>
      <td>プロジェクトのグループID</td>
    </tr>
    <tr>
      <td>Project artifactId</td>
      <td>helidon-handson</td>
      <td>Jarファイル名</td>
    </tr>
    <tr>
      <td>Project version</td>
      <td>(そのままEnter)</td>
      <td>アプリのバージョン</td>
    </tr>
    <tr>
      <td>Java package name</td>
      <td>com.example.handson.helidon</td>
      <td>Javaのパッケージ名</td>
    </tr>
    <tr>
      <td>Start development loop</td>
      <td>n</td>
      <td>開発モードで起動するかどうか</td>
    </tr>
  </tbody>
</table>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>opc@helidon ~]<span class="nv">$ </span>helidon init
Helidon versions
  <span class="o">(</span>1<span class="o">)</span> 4.0.8 
  <span class="o">(</span>2<span class="o">)</span> 3.2.8 
  <span class="o">(</span>3<span class="o">)</span> 2.6.7 
  <span class="o">(</span>4<span class="o">)</span> Show all versions 
Enter selection <span class="o">(</span>default: 1<span class="o">)</span>: 1    

Helidon version: 4.0.8

| Helidon Flavor

Select a Flavor
  <span class="o">(</span>1<span class="o">)</span> se | Helidon SE
  <span class="o">(</span>2<span class="o">)</span> mp | Helidon MP
Enter selection <span class="o">(</span>default: 1<span class="o">)</span>: 2

| Application Type

Select an Application Type
  <span class="o">(</span>1<span class="o">)</span> quickstart | Quickstart
  <span class="o">(</span>2<span class="o">)</span> database   | Database
  <span class="o">(</span>3<span class="o">)</span> custom     | Custom
  <span class="o">(</span>4<span class="o">)</span> oci        | OCI
Enter selection <span class="o">(</span>default: 1<span class="o">)</span>: 2

| Media Support

Select a JSON library
  <span class="o">(</span>1<span class="o">)</span> jackson | Jackson
  <span class="o">(</span>2<span class="o">)</span> jsonb   | JSON-B
Enter selection <span class="o">(</span>default: 2<span class="o">)</span>: 1

| Database

Select a JPA Implementation
  <span class="o">(</span>1<span class="o">)</span> hibernate   | Hibernate
  <span class="o">(</span>2<span class="o">)</span> eclipselink | EclipseLink
Enter selection <span class="o">(</span>default: 1<span class="o">)</span>: 1
Select a Connection Pool
  <span class="o">(</span>1<span class="o">)</span> hikaricp | HikariCP
  <span class="o">(</span>2<span class="o">)</span> ucp      | UCP
Enter selection <span class="o">(</span>default: 1<span class="o">)</span>: 1
Select a Database Server
  <span class="o">(</span>1<span class="o">)</span> h2       | H2
  <span class="o">(</span>2<span class="o">)</span> mysql    | MySQL
  <span class="o">(</span>3<span class="o">)</span> oracledb | Oracle DB
Enter selection <span class="o">(</span>default: 1<span class="o">)</span>: 3
Auto DDL <span class="o">(</span><span class="nb">yes</span>/no<span class="o">)</span> <span class="o">(</span>default: no<span class="o">)</span>: <span class="nb">yes
</span>Persistence Unit Name <span class="o">(</span>default: pu1<span class="o">)</span>: <span class="nb">test
</span>Datasource Name <span class="o">(</span>default: ds1<span class="o">)</span>: <span class="nb">test</span>

| Customize Project

Project groupId <span class="o">(</span>default: me.opc-helidon<span class="o">)</span>: com.example.handson.helidon
Project artifactId <span class="o">(</span>default: database-mp<span class="o">)</span>: helidon-handson
Project version <span class="o">(</span>default: 1.0-SNAPSHOT<span class="o">)</span>: 
Java package name <span class="o">(</span>default: me.opc.mp.database<span class="o">)</span>: com.example.handson.helidon

Directory /home/opc/helidon-handson already exists, generating unique name
Switch directory to /home/opc/helidon-handson-2 to use CLI

Start development loop? <span class="o">(</span>default: n<span class="o">)</span>: n
<span class="o">[</span>opc@helidon ~]<span class="nv">$ </span>
</code></pre></div></div>

<p class="notice--info"><strong>Helidon CLIについて</strong><br />
Helidon CLIでは、今回作成するベースプロジェクト以外にも様々なタイプのベースプロジェクトの作成が可能です。ぜひ、遊んでみて頂ければと思います！</p>

<p>これで、Helidon MPのベースプロジェクトが作成されます。</p>

<p>このように、 Helidon CLIを利用すると、簡単にベースプロジェクトを構築することができます。</p>

<p>この後は、事前に用意したサンプルアプリケーションを元にチュートリアルを行っていきます。<br />
(サンプルアプリケーションも、Helidon CLIをベースに作成したものです)</p>

<h2 id="2サンプルアプリケーションを動かしてみよう">2.サンプルアプリケーションを動かしてみよう</h2>
<p>ここでは、事前に用意したサンプルアプリケーションを動かしてみます。</p>

<h3 id="2-1-サンプルアプリケーションのディレクトリ構成を確認しよう">2-1. サンプルアプリケーションのディレクトリ構成を確認しよう</h3>

<p>GitHubから、サンプルアプリケーションをcloneします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/oracle-japan/helidon-handson.git
</code></pre></div></div>

<p>このサンプルアプリケーションは、RESTインタフェースで都道府県名を取得するアプリケーションです。<br />
図で表すと以下のようなイメージになります。</p>

<p><img src="002.png" alt="画面ショット" /></p>

<p>サンプルアプリケーションのディレクトリ構成を確認してみます。</p>

<p>ソースコードの中身については、後ほど解説します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── README.md
├── pom.xml --&gt; mavenの設定ファイル
└── src
    └── main
        ├── java
        │   └── com
        │       └── example
        │           └── handson
        │               └── helidon
        │                   ├── Prefecture.java  --&gt; テーブルに紐づくEntityクラス
        │                   ├── PrefectureResource.java  --&gt; RESTインターフェースを実装しているクラス
        │                   └── package-info.java  --&gt; パッケージファイル
        └── resources
            ├── META-INF
            │   ├── beans.xml --&gt; CDIの設定ファイル
            │   ├── init_script.sql  --&gt; サンプルアプリケーションの初期データを登録するDDLファイル
            │   ├── microprofile-config.properties  --&gt; Helidon MPの構成ファイル
            │   ├── native-image
            │   │   ├── native-image.properties
            │   │   └── reflect-config.json
            │   └── persistence.xml  --&gt; JPAに関する設定ファイル
            ├── hibernate.properties  --&gt; Hibernateに関する設定ファイル
            └── logging.properties  --&gt; ログに関する設定ファイル

10 directories, 13 files
</code></pre></div></div>

<h3 id="2-2-サンプルアプリケーションの設定ファイルを確認しよう">2-2. サンプルアプリケーションの設定ファイルを確認しよう</h3>

<p>このサンプルアプリケーションのソースコードについて少しみていきます。</p>

<p>このサンプルアプリケーションは、<code class="language-plaintext highlighter-rouge">JAX-RS + JPA/JTA</code>で構築しています。<br />
また、Helidon MPはJava EE／Jakarta EEの開発者になじみのあるコードスタイルになります。<br />
そのため、この後のソースコードの解説では特にJAX-RSやJPA/JTAに基づいて説明していきます。</p>

<p>まず初めに、設定ファイル<code class="language-plaintext highlighter-rouge">src/main/resources/META-INF/microprofile-config.properties</code>からみていきます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Datasource properties</span>
<span class="s">javax.sql.DataSource.test.dataSourceClassName=oracle.jdbc.pool.OracleDataSource</span>
<span class="s">javax.sql.DataSource.test.dataSource.url=jdbc:oracle:thin:@</span>
<span class="s">javax.sql.DataSource.test.dataSource.user=admin</span>
<span class="s">javax.sql.DataSource.test.dataSource.password=</span>
</code></pre></div></div>

<p>冒頭の4行は、データベースの接続設定を定義する部分です。<br />
この後、<a href="#2-5-サンプルアプリケーションの動作を確認しよう">2-5. サンプルアプリケーションの動作を確認しよう</a>で詳しくみていきます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Microprofile server properties</span>
<span class="s">server.port=8080</span>
<span class="s">server.host=0.0.0.0</span>
</code></pre></div></div>

<p>次の2行がサーバに関する設定です。<br />
ここでは、<code class="language-plaintext highlighter-rouge">http://localhost:8080</code>で起動できるように設定しています。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Change the following to true to enable the optional MicroProfile Metrics REST.request metrics</span>
<span class="s">metrics.rest-request.enabled=false</span>
</code></pre></div></div>

<p>最後の行は、メトリクスの利用可否です。<br />
今回は、<code class="language-plaintext highlighter-rouge">false</code>にしていますが、<code class="language-plaintext highlighter-rouge">true</code>で設定した場合、MicroProfile仕様に基づいてメトリクスを利用可能です。<br />
その場合、Prometheusなどのモニタリングツールを利用して、メトリクス監視を行うことができます。</p>

<p>次に、<code class="language-plaintext highlighter-rouge">src/main/resources/META-INF/persistence.xml</code>です。</p>

<p>ここでは、JPAに関する設定を行っています。</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;persistence-unit</span> <span class="na">name=</span><span class="s">"test"</span> <span class="na">transaction-type=</span><span class="s">"JTA"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>この部分で、JPAのユニット名を<code class="language-plaintext highlighter-rouge">test</code>と定義しています。<br />
このユニット名は、後ほど、ソースコードの中でEntityManagerの定義を行う際に利用します。<br />
また、今回はトランザクションは<code class="language-plaintext highlighter-rouge">JTA</code>で管理することもここで定義します。</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;class&gt;</span>com.example.handson.helidon.Prefecture<span class="nt">&lt;/class&gt;</span>
</code></pre></div></div>

<p>この部分で、Entityクラスを指定しています。<br />
今回はPrefectureクラスを指定します。</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.hbm2ddl.auto"</span> <span class="na">value=</span><span class="s">"create-drop"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.column_ordering_strategy"</span> <span class="na">value=</span><span class="s">"legacy"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jakarta.persistence.sql-load-script-source"</span> <span class="na">value=</span><span class="s">"META-INF/init_script.sql"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
</code></pre></div></div>

<p>この部分は、その他のプロパティを指定します。<br />
今回は、自動スキーマ生成の設定、DDLスクリプトのパスなどの設定を定義しています。  <br />
ここでは、他にも永続化に関する柔軟な設定を行うことができます。<br />
詳細は<a href="https://docs.oracle.com/cd/F23552_01/toplink/12.2.1.4/jpa-extensions-reference/persistence-property-extensions-reference.html#GUID-2E535D07-446F-44F0-9D8D-89E7FFCF8225">こちら</a>でご確認ください。</p>

<p>設定ファイルに関する確認は以上です。</p>

<h3 id="2-3-サンプルアプリケーションのソースコードprefecturejavaを確認しよう">2-3. サンプルアプリケーションのソースコード(Prefecture.java)を確認しよう</h3>

<p>次に、ソースコードをみていきます。<br />
まず初めに、<code class="language-plaintext highlighter-rouge">src/main/java/com/example/handson/helidon/Prefecture.java</code>についてみていきます。<br />
このクラスは、テーブルに対するEntityクラスをJPAを利用して実装したものです。</p>

<p>まずは、ソースコード冒頭のアノテーション部分です。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Prefecture"</span><span class="o">)</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"PREFECTURE"</span><span class="o">)</span>
<span class="nd">@Access</span><span class="o">(</span><span class="nc">AccessType</span><span class="o">.</span><span class="na">PROPERTY</span><span class="o">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">@Entity(name = "Prefecture")</code>部分は、このJavaクラスがEntityクラスであり、その名前を<code class="language-plaintext highlighter-rouge">Prefecture</code>とすること示しています。<br />
<code class="language-plaintext highlighter-rouge">@Table(name = "PREFECTURE")</code>部分は、このEntityクラスを<code class="language-plaintext highlighter-rouge">PREFECTURE</code>テーブルと紐づけることを示します。<br />
これらより、冒頭2行部分は、「<code class="language-plaintext highlighter-rouge">PREFECTURE</code>テーブルと紐づける<code class="language-plaintext highlighter-rouge">Prefecture</code>エンティティクラスを宣言する」ことになります。</p>

<p>3行目は、各カラム(フィールド)に対するアクセス形式を指定します。<br />
今回は、<code class="language-plaintext highlighter-rouge">Property</code>になるので、各カラム(フィールド)への属性はgetterに定義します。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@NamedQueries</span><span class="o">({</span>
    <span class="nd">@NamedQuery</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"getPrefectures"</span><span class="o">,</span>
                <span class="n">query</span> <span class="o">=</span> <span class="s">"SELECT p FROM Prefecture p"</span><span class="o">),</span>
    <span class="nd">@NamedQuery</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"getPrefectureById"</span><span class="o">,</span>
                <span class="n">query</span> <span class="o">=</span> <span class="s">"SELECT p FROM Prefecture p WHERE p.id = :id"</span><span class="o">),</span>
    <span class="nd">@NamedQuery</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"getPrefectureByName"</span><span class="o">,</span>
                <span class="n">query</span> <span class="o">=</span> <span class="s">"SELECT p FROM Prefecture p WHERE p.name = :name"</span><span class="o">)</span>
<span class="o">})</span>
</code></pre></div></div>

<p>続いて、<code class="language-plaintext highlighter-rouge">NamedQueries</code>の部分です。<br />
ここでは、アプリケーション内でテーブルに対して利用するクエリを定義します。<br />
サンプルアプリケーションでは、<code class="language-plaintext highlighter-rouge">getPrefectures</code>、<code class="language-plaintext highlighter-rouge">getPrefectureById</code>、<code class="language-plaintext highlighter-rouge">getPrefectureByName</code>という名前で3つのクエリを定義しています。<br />
これらクエリの利用については、<a href="#2-4-サンプルアプリケーションのソースコードprefectureresourcejavaを確認しよう">2-4. サンプルアプリケーションのソースコード(PrefectureResource.java)を確認しよう</a>で解説します</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Prefecture</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    
</code></pre></div></div>

<p>この部分は、Prefecture EntityクラスとしてPREFECTUREテーブルのカラムを定義しています。<br />
このサンプルアプリケーションでは、<code class="language-plaintext highlighter-rouge">id</code>と<code class="language-plaintext highlighter-rouge">name</code>という2つのカラムがあります。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Id</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ID"</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Basic</span><span class="o">(</span><span class="n">optional</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"NAME"</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ここでは、アノテーションでカラムごとに属性を付与しています。<br />
今回は、アクセス形式が<code class="language-plaintext highlighter-rouge">Property</code>なので、getterに対してカラム属性を定義します。<br />
変数<code class="language-plaintext highlighter-rouge">id</code>に対しては、PREFECTUREテーブルのIDカラムを<code class="language-plaintext highlighter-rouge">name = "ID"</code>で紐づけています。<br />
また、<code class="language-plaintext highlighter-rouge">@Id</code>によってこのカラムを主キーとして定義し、<code class="language-plaintext highlighter-rouge">nullable = false</code>と<code class="language-plaintext highlighter-rouge">updatable = false</code>により、NOT NULL制約と主キーの更新を禁止する定義を行っています。<br />
変数<code class="language-plaintext highlighter-rouge">name</code>に対しては、PREFECTUREテーブルのIDカラムを<code class="language-plaintext highlighter-rouge">name = "NAME"</code>で紐づけています。<br />
同じようにNOT NULL制約も付与しています。<br />
なお、<code class="language-plaintext highlighter-rouge">@Basic(optional = false)</code>は、カラムを基本型として定義しています。</p>

<h3 id="2-4-サンプルアプリケーションのソースコードprefectureresourcejavaを確認しよう">2-4. サンプルアプリケーションのソースコード(PrefectureResource.java)を確認しよう</h3>

<p>次に、<code class="language-plaintext highlighter-rouge">src/main/java/com/example/handson/helidon/PrefectureResource.java</code>をみていきます。<br />
このクラスは、サンプルアプリケーションのRESTインタフェースをJAX-RS/JTAで実装したものです。</p>

<p>まずは冒頭部分で付与されているアノテーションです。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Path</span><span class="o">(</span><span class="s">"prefecture"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrefectureResource</span> <span class="o">{</span>
</code></pre></div></div>

<p>ここでは、クラスに対して<code class="language-plaintext highlighter-rouge">@Path("prefecture")</code>を付与することで、RESTインタフェースのアクセス先URLを定義しています。<br />
この場合、<code class="language-plaintext highlighter-rouge">http://localhost:8080/prefecure</code>(localhostの場合)というURLでアクセス可能という定義になります。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@PersistenceContext</span><span class="o">(</span><span class="n">unitName</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>
</code></pre></div></div>

<p>ここでは、JPAの<code class="language-plaintext highlighter-rouge">EntityManager</code>を定義しています。<br />
このEntityManagerを利用してデータベースへのクエリを制御します。<br />
ここで指定する<code class="language-plaintext highlighter-rouge">unitName</code>は、<code class="language-plaintext highlighter-rouge">persistence.xml</code>で定義したものです。<br />
今回は、<code class="language-plaintext highlighter-rouge">test</code>という名前で定義したので、<code class="language-plaintext highlighter-rouge">unitName = "test"</code>となります。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@GET</span>
    <span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Prefecture</span><span class="o">&gt;</span> <span class="nf">getPrefectures</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">"getPrefectures"</span><span class="o">,</span> <span class="nc">Prefecture</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>ここからは実際のRESTインタフェースを実装するメソッドをみていきます。<br />
まず初めは、全都道府県データを取得するメソッドです。<br />
<code class="language-plaintext highlighter-rouge">@GET</code>のアノテーションによって、HTTP GETメソッドであることを示します。<br />
また、<code class="language-plaintext highlighter-rouge">@Produces</code>アノテーションで、レスポンスの応答形式を指定しています。この場合は、<code class="language-plaintext highlighter-rouge">Content-type: application/json</code>になります。<br />
クエリは、EntityManagerを利用して発行しています。その際に、<code class="language-plaintext highlighter-rouge">getPrefectures</code>という名前でクエリを取得しています。<br />
この名前は、<a href="#2-3-サンプルアプリケーションのソースコードprefecturejavaを確認しよう">2-3. サンプルアプリケーションのソースコード(Prefecture.java)を確認しよう</a>で定義したものです。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@GET</span>
    <span class="nd">@Path</span><span class="o">(</span><span class="s">"{id}"</span><span class="o">)</span>
    <span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Prefecture</span> <span class="nf">getPrefectureById</span><span class="o">(</span><span class="nd">@PathParam</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">TypedQuery</span><span class="o">&lt;</span><span class="nc">Prefecture</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">"getPrefectureById"</span><span class="o">,</span> <span class="nc">Prefecture</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">Prefecture</span> <span class="n">prefecture</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Prefecture</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">prefecture</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">id</span><span class="o">)).</span><span class="na">getSingleResult</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">NoResultException</span> <span class="n">ne</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotFoundException</span><span class="o">(</span><span class="s">"Unable to find prefecture with ID "</span> <span class="o">+</span> <span class="n">id</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">prefecture</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>次に、ID(主キー)を条件にして都道府県を取得するメソッドです。<br />
<code class="language-plaintext highlighter-rouge">@GET</code>のアノテーションによって、HTTP GETメソッドであることを示します。<br />
また、<code class="language-plaintext highlighter-rouge">@Path</code>アノテーションによって、リソースクラスパス(今回は、<code class="language-plaintext highlighter-rouge">prefecture</code>)以降のパスを定義します。<br />
そのため、このメソッドにアクセスするためのURLは、<code class="language-plaintext highlighter-rouge">http://localhost:8080/prefecture/1</code>のようになります。(idが”1”のデータを取得する場合)<br />
なお、<code class="language-plaintext highlighter-rouge">@Produces</code>アノテーションで、レスポンスの応答形式を指定しています。この場合は、<code class="language-plaintext highlighter-rouge">Content-type: application/json</code>になります。<br />
メソッドの引数として、<code class="language-plaintext highlighter-rouge">@PathParam</code>アノテーションで<code class="language-plaintext highlighter-rouge">id</code>を指定しています。これはURLからパラメータとして<code class="language-plaintext highlighter-rouge">id</code>を取得することを意味します。</p>

<p class="notice--info"><strong>パラメータについて</strong><br />
パラメータの取得には、さまざまなアノテーションを利用できます。<br />
詳細は<a href="https://docs.oracle.com/cd/F32751_01/weblogic-server/14.1.1.0/restf/develop-restful-service.html#GUID-BD610888-0592-45E2-8235-716EE48B516B">こちら</a>をご確認ください。</p>

<p>EntityManagerを利用して、クエリを発行しています。その際に、<code class="language-plaintext highlighter-rouge">getPrefectureById</code>という名前でクエリを取得しています。<br />
この名前は、<a href="#2-3-サンプルアプリケーションのソースコードprefecturejavaを確認しよう">2-3. サンプルアプリケーションのソースコード(Prefecture.java)を確認しよう</a>で定義したものです。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@GET</span>
    <span class="nd">@Path</span><span class="o">(</span><span class="s">"name/{name}"</span><span class="o">)</span>
    <span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Prefecture</span> <span class="nf">getPrefectureByName</span><span class="o">(</span><span class="nd">@PathParam</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">TypedQuery</span><span class="o">&lt;</span><span class="nc">Prefecture</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">"getPrefectureByName"</span><span class="o">,</span> <span class="nc">Prefecture</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Prefecture</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">name</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotFoundException</span><span class="o">(</span><span class="s">"Unable to find prefecture with name "</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>このメソッドは、都道府県名(name)で情報を取得するメソッドです。
アノテーションの説明は先程のメソッドと同様です。<br />
このメソッドで異なるのは、<code class="language-plaintext highlighter-rouge">@PathParam</code>で<code class="language-plaintext highlighter-rouge">name</code>というパラメータをURLから取得しています。<br />
そのため、このメソッドにアクセスするためのURLは、<code class="language-plaintext highlighter-rouge">http://localhost:8080/prefecture/name/北海道</code>のようになります。(“北海道”のデータを取得する場合)<br />
このメソッドでも、EntityManagerを利用して、クエリを発行しています。その際に、<code class="language-plaintext highlighter-rouge">getPrefectureByName</code>という名前でクエリを取得しています。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@DELETE</span>
    <span class="nd">@Path</span><span class="o">(</span><span class="s">"{id}"</span><span class="o">)</span>
    <span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="nd">@Transactional</span><span class="o">(</span><span class="nc">Transactional</span><span class="o">.</span><span class="na">TxType</span><span class="o">.</span><span class="na">REQUIRED</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deletePrefecture</span><span class="o">(</span><span class="nd">@PathParam</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Prefecture</span> <span class="n">prefecture</span> <span class="o">=</span> <span class="n">getPrefectureById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="n">entityManager</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">prefecture</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>このメソッドは、主キーである<code class="language-plaintext highlighter-rouge">id</code>指定で都道府県を削除するメソッドです。<br />
<code class="language-plaintext highlighter-rouge">@DELETE</code>のアノテーションによって、HTTP DELETEメソッドであることを示します。<br />
また、<code class="language-plaintext highlighter-rouge">@Transactional(Transactional.TxType.REQUIRED)</code>は、JTAによるトランザクション管理の設定を定義します。<br />
詳細は<a href="https://jakarta.ee/specifications/platform/8/apidocs/javax/transaction/transactional.txtype">こちら</a>をご確認ください。
その他のアノテーションやパラメータの取得方法はこれまでのメソッドと同様です。<br />
このメソッドでも、EntityManagerを利用して、クエリを発行しています。<br />
<code class="language-plaintext highlighter-rouge">remove()</code>はEntityManagerに予め実装されている主キーを条件にして該当データを削除するメソッドです。(クエリの定義は不要です)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@POST</span>
    <span class="nd">@Consumes</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="nd">@Transactional</span><span class="o">(</span><span class="nc">Transactional</span><span class="o">.</span><span class="na">TxType</span><span class="o">.</span><span class="na">REQUIRED</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPrefecture</span><span class="o">(</span><span class="nc">Prefecture</span> <span class="n">prefecture</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">entityManager</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">prefecture</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="s">"Unable to create pokemon with ID "</span> <span class="o">+</span> <span class="n">prefecture</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>このメソッドは、都道府県を登録/更新するメソッドです。<br />
<code class="language-plaintext highlighter-rouge">@POST</code>のアノテーションによって、HTTP POSTメソッドであることを示します。<br />
その他のアノテーションやパラメータの取得方法はこれまでのメソッドと同様です。<br />
このメソッドでも、EntityManagerを利用して、クエリを発行しています。<br />
<code class="language-plaintext highlighter-rouge">remove()</code>メソッド同様に、<code class="language-plaintext highlighter-rouge">persist()</code>メソッドは、与えられたデータを元に永続化(データベースに登録)するメソッドになります。<br />
このメソッドは、Prefectureクラスを引数にとっているので、ここでPOSTするデータは、以下のようなイメージです。</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"北海道"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>以上で、サンプルアプリケーションの中身に関する確認は完了です！</p>

<h3 id="2-5-サンプルアプリケーションの動作を確認しよう">2-5. サンプルアプリケーションの動作を確認しよう</h3>

<p>ここまでアプリケーションの中身を確認してきたので、このアプリケーションを実際に動作させてみましょう。</p>

<p><a href="#2-2-サンプルアプリケーションの設定ファイルを確認しよう">2-2. サンプルアプリケーションの設定ファイルを確認しよう</a>で確認した<code class="language-plaintext highlighter-rouge">src/main/resources/META-INF/microprofile-config.properties</code>にデータベース接続情報を設定していきます。<br />
このチュートリアルでは、ATPを利用してサンプルアプリケーションを動作させます。<br />
前提条件が完了していれば、ATPへの接続情報が格納されたクレデンシャル・ウォレットが取得できていると思います。<br />
このクレデンシャル・ウォレットを含めて、データベース接続情報を設定していきます。</p>

<p>まずは、データソースクラス名を設定します。<br />
今回はOracle Databaseとして設定するので、以下のように設定します。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">javax.sql.DataSource.test.dataSourceClassName=oracle.jdbc.pool.OracleDataSource</span>
</code></pre></div></div>

<p>次にデータソースURLを指定していきます。<br />
ここでクレデンシャル・ウォレットのファイルパスを記載します。<br />
取得済みのクレデンシャル・ウォレットを解凍し、任意のディレクトリに配置します。<br />
クレデンシャル・ウォレットを配置したフルパスを踏まえて、以下のように設定します。<br />
<code class="language-plaintext highlighter-rouge">@atp01_high</code>の部分は、データベース名が入ります。<br />
ここでは前提条件のATP作成手順に沿った前提で記載していますが、別のデータベース名で作成した方は<code class="language-plaintext highlighter-rouge">@[データベース名]_high</code>に読み替えてください。<br />
<code class="language-plaintext highlighter-rouge">TNS_ADMIN=/path_to_Wallet</code>の部分は、ご自身のクレデンシャル・ウォレットまでのフルパスに読み替えてください。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">javax.sql.DataSource.test.dataSource.url=jdbc:oracle:thin:@atp01_high?TNS_ADMIN=/path_to_Wallet</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">javax.sql.DataSource.test.dataSource.user=admin</span>
<span class="s">javax.sql.DataSource.test.dataSource.password=Welcome12345#</span>
</code></pre></div></div>

<p>最後にデータベースユーザ名とパスワードを設定します。<br />
ユーザ名はATP作成時に<code class="language-plaintext highlighter-rouge">admin</code>ユーザが自動的に作成されているので、<code class="language-plaintext highlighter-rouge">admin</code>ユーザを設定します。<br />
パスワードは、ATP作成時にご自身が設定した<code class="language-plaintext highlighter-rouge">admin</code>スキーマのパスワードを指定してください。<br />
(前提条件のATP作成手順通りであれば、<code class="language-plaintext highlighter-rouge">Welcome12345#</code>です)</p>

<p>これでデータベースの接続設定は完了です。</p>

<p class="notice--info"><strong>データベースパスワードについて</strong><br />
今回のチュートリアルでは、データベースパスワードをそのまま記載していますが、セキュリティ上は不適切です。<br />
Helidonでは、<a href="https://helidon.io/docs/v2/apidocs/io.helidon.config.encryption/io/helidon/config/encryption/EncryptionUtil.html">プロパティの暗号化機構</a>が実装されています。<br />
また、Oracle Cloud Infrastructure上では、鍵管理サービスとして<code class="language-plaintext highlighter-rouge">OCI Vault</code>というサービスもあります。<br />
これらを利用することで、よりセキュリティを高めてアプリケーションを作成することができます。</p>

<p>では、サンプルアプリケーションをビルドしてみましょう。<br />
プロジェクト直下で以下のコマンドを実行します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn package
</code></pre></div></div>

<p>以下のようなメッセージが表示されればビルド完了です。(一部抜粋しています)</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] BUILD SUCCESS
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] Total <span class="nb">time</span>:  41.637 s
<span class="o">[</span>INFO] Finished at: 2021-04-23T11:20:18+09:00
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
</code></pre></div></div>

<p>targetディレクトリが生成され、その直下に<code class="language-plaintext highlighter-rouge">helidon-handson.jar</code>が作成されています。</p>

<p>それでは、jarファイルを起動してみましょう。<br />
実行場所はプロジェクト直下とします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java <span class="nt">-jar</span> target/helidon-handson.jar 
</code></pre></div></div>

<p>起動すると以下のようなログがコンソール上に出力されます。(一部抜粋しています)</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2024.05.06 12:53:53 INFO io.helidon.microprofile.server.ServerCdiExtension Thread[#1,main,5,main]: Registering JAX-RS Application: HelidonMP
2024.05.06 12:53:53 INFO io.helidon.webserver.ServerListener VirtualThread[#45,start @default <span class="o">(</span>/0.0.0.0:8080<span class="o">)]</span>/runnable@ForkJoinPool-1-worker-1: <span class="o">[</span>0x0ed438ea] http://0.0.0.0:8080 bound <span class="k">for </span>socket <span class="s1">'@default'</span>
2024.05.06 12:53:53 INFO io.helidon.webserver.LoomServer Thread[#1,main,5,main]: Started all channels <span class="k">in </span>13 milliseconds. 7411 milliseconds since JVM startup. Java 21.0.2+13-LTS-jvmci-23.1-b30
2024.05.06 12:53:53 INFO io.helidon.microprofile.server.ServerCdiExtension Thread[#1,main,5,main]: Server started on http://localhost:8080 <span class="o">(</span>and all other host addresses<span class="o">)</span> <span class="k">in </span>7416 milliseconds <span class="o">(</span>since JVM startup<span class="o">)</span><span class="nb">.</span>
2024.05.06 12:53:53 INFO io.helidon.common.features.HelidonFeatures Thread[#48,features-thread,5,main]: Helidon MP 4.0.8 features: <span class="o">[</span>CDI, Config, Health, JPA, JTA, Metrics, Server]
</code></pre></div></div>

<p class="notice--info"><strong>アプリケーションの起動ついて</strong><br />
起動後の初回起動は、初期データの登録(DDL実行)が走るため、少し時間がかかります。<br />
また、今回は自動生成スキーマの設定により、初めにDrop tableした後にCreate tableしているので、初回実行時にはExceptionが発生する可能性がありますが、アプリケーションの実行に問題はありません。</p>

<p>それでは、アクセスしてみます。</p>

<p>まずは、全都道府県情報を取得してみましょう。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture
</code></pre></div></div>

<p>このような結果が返却されれば成功です。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="o">[{</span><span class="s2">"id"</span>:1,<span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"id"</span>:2,<span class="s2">"name"</span>:<span class="s2">"青森"</span><span class="o">}</span>....],
</code></pre></div></div>

<p>次にID(主キー)指定で検索します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>このように結果が返却されます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span><span class="s2">"id"</span>:1,<span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>
</code></pre></div></div>

<p>次に都道府県名指定で検索します。<br />
以下は北海道をGETするURLで、<code class="language-plaintext highlighter-rouge">%E5%8C%97%E6%B5%B7%E9%81%93</code>は北海道をURLエンコードした文字列です。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture/name/%E5%8C%97%E6%B5%B7%E9%81%93
</code></pre></div></div>

<p>このように結果が返却されます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span><span class="s2">"id"</span>:1,<span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>
</code></pre></div></div>

<p>次に北海道のデータを削除してみます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> DELETE http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>削除されたことを確認してみましょう</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>以下のような結果が返却されます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 404 Not Found
Content-Type: text/plain
Date: Wed, 28 Apr 2021 17:56:25 +0900
transfer-encoding: chunked
connection: keep-alive

No handler found <span class="k">for </span>path: /prefecture/1
</code></pre></div></div>

<p>これは、<code class="language-plaintext highlighter-rouge">/prefecture/1</code>というリソースが存在しないことを示します。</p>

<p>最後に北海道のデータを再登録します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s1">'{"id":1, "name":"北海道"}'</span> http://localhost:8080/prefecture 
</code></pre></div></div>

<p>再登録されたことを確認しましょう。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>ちゃんと再登録されていますね。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span><span class="s2">"id"</span>:1,<span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>
</code></pre></div></div>

<p>以上で、サンプルアプリケーションの動作確認は完了です！</p>

<p>次に、このサンプルアプリケーションをベースに機能を拡張するチュートリアルを実施します。</p>

<h2 id="3サンプルアプリケーションを拡張してみよう">3.サンプルアプリケーションを拡張してみよう</h2>
<p>ここでは、先程までみてきたサンプルアプリケーションを元に機能を拡張してみたいと思います。<br />
今回は、都道府県情報にエリア(地域区分)を追加してみます。<br />
区分については、<a href="https://www.stat.go.jp/data/shugyou/1997/3-1.html">こちらのページ</a>を参考にします。</p>

<p>完成した際に取得できるデータは以下のイメージです。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> curl http://localhost:8080/prefecture/
<span class="o">&gt;</span> <span class="o">[{</span><span class="s2">"id"</span>:1, <span class="s2">"area"</span>:<span class="s2">"北海道"</span>, <span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"id"</span>:2, <span class="s2">"area"</span>:<span class="s2">"東北"</span>, <span class="s2">"name"</span>:<span class="s2">"青森"</span><span class="o">}</span>....]
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> curl http://localhost:8080/area/
<span class="o">&gt;</span> <span class="o">[{</span><span class="s2">"id"</span>:1, <span class="s2">"area"</span>:<span class="s2">"北海道"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"id"</span>:2, <span class="s2">"area"</span>:<span class="s2">"東北"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"id"</span>:3, <span class="s2">"area"</span>:<span class="s2">"南関東"</span><span class="o">}</span>....]
</code></pre></div></div>

<p>そして、テーブル構造としては以下の通りです。</p>

<p><img src="001.png" alt="画面ショット" /></p>

<h3 id="3-1-都道府県エリアを管理するentityを作成しよう">3-1. 都道府県エリアを管理するEntityを作成しよう</h3>

<p>まずは、地域区分のテーブルを追加するためにこのテーブルに紐づく<code class="language-plaintext highlighter-rouge">PrefectureArea</code>というEntityを作成しましょう。(今回、ATPへのテーブルの追加自体はJPAの自動スキーマ生成機能を利用します)  <br />
ファイル名は<code class="language-plaintext highlighter-rouge">PrefectureArea.java</code>です。<br />
テーブル名は<code class="language-plaintext highlighter-rouge">PREFECTUREAREA</code>とします。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.example.handson.helidon</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">jakarta.persistence.Access</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.AccessType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.Basic</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.Column</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.Id</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.NamedQueries</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.NamedQuery</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.Table</span><span class="o">;</span>

<span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"XXXXXX"</span><span class="o">)</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"XXXXXX"</span><span class="o">)</span>
<span class="nd">@Access</span><span class="o">(</span><span class="nc">AccessType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span>
<span class="nd">@NamedQueries</span><span class="o">({</span>
        <span class="nd">@NamedQuery</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"getPrefectureAreas"</span><span class="o">,</span>
                    <span class="n">query</span> <span class="o">=</span> <span class="s">"SELECT a FROM PrefectureArea a"</span><span class="o">),</span>
        <span class="nd">@NamedQuery</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"getPrefectureAreaByArea"</span><span class="o">,</span>
                    <span class="n">query</span> <span class="o">=</span> <span class="s">"SELECT a FROM PrefectureArea a WHERE a.area = :area"</span><span class="o">)</span>
<span class="o">})</span>
</code></pre></div></div>

<p>上記の<code class="language-plaintext highlighter-rouge">@Entity</code>と<code class="language-plaintext highlighter-rouge">@Table</code>の部分の<code class="language-plaintext highlighter-rouge">XXXXXX</code>に適切な名前を入れます。<br />
なお、このEntityでは、<code class="language-plaintext highlighter-rouge">@NamedQuery</code>として、<code class="language-plaintext highlighter-rouge">getPrefectureAreas</code>と<code class="language-plaintext highlighter-rouge">getPrefectureAreaByArea</code>という2つのクエリを定義しました。<br />
また、アクセス形式は<code class="language-plaintext highlighter-rouge">Field</code>とします。</p>

<p>次にフィールドを作成していきます。<br />
今回は、テーブルのカラムとして、主キーとなる<code class="language-plaintext highlighter-rouge">ID</code>カラムと地域区分を示す<code class="language-plaintext highlighter-rouge">AREA</code>カラムを作成します。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrefectureArea</span> <span class="o">{</span>
    <span class="nd">@XXX</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"XXX"</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="no">XXX</span><span class="o">;</span>

    <span class="nd">@Basic</span><span class="o">(</span><span class="n">optional</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"XXX"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="no">XXX</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PrefectureArea</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getXXX</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="no">XXX</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setXXX</span><span class="o">(</span><span class="kt">int</span> <span class="no">XXX</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">XXX</span> <span class="o">=</span> <span class="no">XXX</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getXXX</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="no">XXX</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setXXX</span><span class="o">(</span><span class="nc">String</span> <span class="no">XXX</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">XXX</span> <span class="o">=</span> <span class="no">XXX</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>上記の<code class="language-plaintext highlighter-rouge">XXX</code>に適切な文字を入れてみましょう。<br />
その際、アクセス形式が<code class="language-plaintext highlighter-rouge">Field</code>なので、カラム属性の定義はフィールド変数に対して付与している点にも注目します。</p>

<p>以上で、<code class="language-plaintext highlighter-rouge">PrefectureArea</code>エンティティは完成です！</p>

<h3 id="3-2-都道府県エリアを取得するrestインタフェースを作成しよう">3-2. 都道府県エリアを取得するRESTインタフェースを作成しよう</h3>

<p>ここでは、都道府県エリアを取得するリソースクラスを作成します。<br />
まずは、<code class="language-plaintext highlighter-rouge">PrefectureAreaResource</code>というクラスを作成しましょう。<br />
ファイル名は<code class="language-plaintext highlighter-rouge">PrefectureAreaResource.java</code>です。</p>

<p>このリソースクラスには、<code class="language-plaintext highlighter-rouge">http://localhost:8080/area</code>というパスでアクセスできるようにします。<br />
また、EntityManagerには、Prefectureクラスと同じものを利用し、上記URLにアクセスすると都道府県の全エリア情報を返却するように実装します。<br />
クエリは、<a href="#3-1-都道府県エリアを管理するentityを作成しよう">3-1. 都道府県エリアを管理するEntityを作成しよう</a>で定義したクエリを使用します。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.example.handson.helidon</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">jakarta.persistence.EntityManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.PersistenceContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.ws.rs.GET</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.ws.rs.Path</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.ws.rs.Produces</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="nd">@Path</span><span class="o">(</span><span class="s">"XXXXXX"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrefectureAreaResource</span> <span class="o">{</span>

    <span class="nd">@PersistenceContext</span><span class="o">(</span><span class="n">unitName</span> <span class="o">=</span> <span class="s">"XXXXXX"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>

    <span class="nd">@GET</span>
    <span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">PrefectureArea</span><span class="o">&gt;</span> <span class="nf">getPrefectureArea</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">"XXXXXX"</span><span class="o">,</span> <span class="nc">PrefectureArea</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>上記の<code class="language-plaintext highlighter-rouge">XXX</code>に適切な文字を入れてみましょう。</p>

<p>以上で、<code class="language-plaintext highlighter-rouge">PrefectureArea</code>エンティティは完成です！</p>

<h3 id="3-3-都道府県エリアの情報を元の都道府県情報に追加しよう">3-3. 都道府県エリアの情報を元の都道府県情報に追加しよう</h3>

<p>ここでは、サンプルアプリケーションに元々実装されていた都道府県情報に都道府県エリアの情報を追加します。<br />
<code class="language-plaintext highlighter-rouge">Prefecture.java</code>を開きます。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@JsonIgnore</span>
    <span class="kd">private</span> <span class="nc">PrefectureArea</span> <span class="n">prefectureArea</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">area</span><span class="o">;</span>
</code></pre></div></div>

<p>フィールドに上記を追加します。<br />
これは、元々の都道府県情報にエリア情報を追加するための定義です。<br />
まずは、Entityとして<code class="language-plaintext highlighter-rouge">PrefectureArea</code>を定義します。<br />
これは、<code class="language-plaintext highlighter-rouge">Prefecture</code>に対して<code class="language-plaintext highlighter-rouge">PrefectureArea</code>への依存関係を定義するためです。<br />
<a href="#3サンプルアプリケーションを拡張してみよう">3. サンプルアプリケーションを拡張してみよう</a>で示した通り、<code class="language-plaintext highlighter-rouge">Prefecture</code>情報は以下の3カラムがありますが、</p>

<ul>
  <li>都道府県ID</li>
  <li>都道府県名</li>
  <li>都道府県エリア(ID)</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">都道府県エリア(ID)</code>の情報を取得しても、実際にどのエリアなのかは判断できないため、今回は<code class="language-plaintext highlighter-rouge">setPrefectureArea()</code>メソッドを利用して<code class="language-plaintext highlighter-rouge">都道府県エリア名</code>を設定できるようにします。<br />
だたし、今回は<code class="language-plaintext highlighter-rouge">PrefectureArea</code>は<code class="language-plaintext highlighter-rouge">Prefecture</code>情報のレスポンスとしては含めたくない(含めたいのは<code class="language-plaintext highlighter-rouge">都道府県エリア名</code>のみ)なので、<code class="language-plaintext highlighter-rouge">@JsonIgnore</code>アノテーションを付与します。<br />
これは、レスポンス時のJSONに含めたくない(マッピングさせたくない)フィールドに対して定義するアノテーションです。</p>

<p>次に、追加したフィールドへのgetter/setterを定義します。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@ManyToOne</span>
    <span class="kd">public</span> <span class="nc">PrefectureArea</span> <span class="nf">getPrefectureArea</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">prefectureArea</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPrefectureArea</span><span class="o">(</span><span class="nc">PrefectureArea</span> <span class="n">prefectureArea</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">prefectureArea</span> <span class="o">=</span> <span class="n">prefectureArea</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">area</span> <span class="o">=</span> <span class="n">prefectureArea</span><span class="o">.</span><span class="na">getArea</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Transient</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getArea</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">area</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setArea</span><span class="o">(</span><span class="nc">String</span> <span class="n">area</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">area</span> <span class="o">=</span> <span class="n">area</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">getPrefectureArea</code>メソッドに付与している<code class="language-plaintext highlighter-rouge">@ManyToOne</code>アノテーションは、リレーション関係を示します。
今回は、<code class="language-plaintext highlighter-rouge">PrefectureArea</code>に登録されているエリアのみが<code class="language-plaintext highlighter-rouge">Prefecture</code>のエリアとして存在できるようにします。
つまりは、<code class="language-plaintext highlighter-rouge">Prefecture</code>に対して<code class="language-plaintext highlighter-rouge">PrefectureArea</code>への外部キー制約をつけます。
今回は、一つの都道府県エリア情報に対して複数の都道府県が紐づくことになるので、<code class="language-plaintext highlighter-rouge">Prefecture:PrefectureArea=多:1</code>となり、<code class="language-plaintext highlighter-rouge">@ManyToOne</code>を利用しています。</p>

<p>次に、<code class="language-plaintext highlighter-rouge">getArea</code>メソッドに付与している<code class="language-plaintext highlighter-rouge">@Transient</code>というアノテーションは、永続化対象から外す意味を示しています。
<code class="language-plaintext highlighter-rouge">都道府県エリア名</code>は、<code class="language-plaintext highlighter-rouge">Prefecture</code>情報として永続化する必要はない(<code class="language-plaintext highlighter-rouge">Prefecture</code>テーブルのカラムとして存在しない)ためです。</p>

<p>上記で追加した実装について必要なimport文を追加します。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">com.fasterxml.jackson.annotation.JsonIgnore</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.ManyToOne</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">jakarta.persistence.Transient</span><span class="o">;</span>
</code></pre></div></div>

<p>最後に、都道府県エリアについては、本手順の冒頭の説明で、都道府県エリア(ID)ではなく、都道府県エリア名を設定できるようにするということを説明しました。<br />
そのため、都道府県を登録する際には<code class="language-plaintext highlighter-rouge">都道府県エリア名</code>を利用しますが、データベースに登録する際には都道府県エリア情報(<code class="language-plaintext highlighter-rouge">PrefectureArea</code>エンティティ)を作成する必要があります。<br />
その処理を実装します。</p>

<p>PrefectureResource.javaを開き、<code class="language-plaintext highlighter-rouge">createPrefecture</code>メソッドに以下を以下のように改修します。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@POST</span>
    <span class="nd">@Consumes</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="nd">@Transactional</span><span class="o">(</span><span class="nc">Transactional</span><span class="o">.</span><span class="na">TxType</span><span class="o">.</span><span class="na">REQUIRED</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPrefecture</span><span class="o">(</span><span class="nc">Prefecture</span> <span class="n">prefecture</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">PrefectureArea</span> <span class="n">prefectureArea</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">"getPrefectureAreaByArea"</span><span class="o">,</span> <span class="nc">PrefectureArea</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"area"</span><span class="o">,</span> <span class="n">prefecture</span><span class="o">.</span><span class="na">getArea</span><span class="o">()).</span><span class="na">getSingleResult</span><span class="o">();</span>
            <span class="n">prefecture</span><span class="o">.</span><span class="na">setPrefectureArea</span><span class="o">(</span><span class="n">prefectureArea</span><span class="o">);</span>
            <span class="n">entityManager</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">prefecture</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadRequestException</span><span class="o">(</span><span class="s">"Unable to create prefecture with ID "</span> <span class="o">+</span> <span class="n">prefecture</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>
<p>追加された部分は、try/cacthブロック内の最初の2行です。<br />
1行目で、POSTされた<code class="language-plaintext highlighter-rouge">都道府県エリア名</code>をもとに都道府県エリア情報(<code class="language-plaintext highlighter-rouge">PrefectureArea</code>エンティティ)を取得しています。<br />
続いて2行目で、1行目で取得した都道府県エリア情報(<code class="language-plaintext highlighter-rouge">PrefectureArea</code>エンティティ)を<code class="language-plaintext highlighter-rouge">Prefecture</code>エンティティにセットしています。<br />
これで、<code class="language-plaintext highlighter-rouge">都道府県エリア名</code>をもとに都道府県エリア情報(<code class="language-plaintext highlighter-rouge">PrefectureArea</code>エンティティ)を作成する処理が実装できました。</p>

<p>以上で、都道府県エリア情報を元の都道府県情報へ追加できました！</p>

<h3 id="3-4-persistencexmlを変更しよう">3-4. persistence.xmlを変更しよう</h3>

<p>次にJPAの設定を追加します。<br />
ここまでで、<code class="language-plaintext highlighter-rouge">PrefectureArea</code>というEntityを作成してきたので、このEntityをJPAの管理下に含めます。 
<code class="language-plaintext highlighter-rouge">persistence.xml</code>を開いて、以下の部分を追記します。<br />
今回は、<code class="language-plaintext highlighter-rouge">PrefectureArea</code>エンティティを追加します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;jta-data-source&gt;test&lt;/jta-data-source&gt;
    &lt;class&gt;com.example.handson.helidon.Prefecture&lt;/class&gt;
    &lt;class&gt;XXXXXXX&lt;/class&gt;
</code></pre></div></div>

<p>上記の<code class="language-plaintext highlighter-rouge">XXX</code>に適切な文字を入れてみましょう。</p>

<p>これで、<code class="language-plaintext highlighter-rouge">persistence.xml</code>の設定は完了です！</p>

<h3 id="3-5-ddlを編集しよう">3-5. DDLを編集しよう</h3>

<p>最後にDDLを拡張した内容に合わせて編集します。</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'北海道'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'東北'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">'南関東'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">'北関東・甲信'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">'北陸'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">'東海'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">'近畿'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">'中国'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s1">'四国'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTUREAREA</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">'九州'</span><span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'北海道'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'青森'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">'岩手'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">'宮城'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">'秋田'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">'山形'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">'福島'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">'茨城'</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s1">'栃木'</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">'群馬'</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">'埼玉'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="s1">'千葉'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="s1">'東京'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="s1">'神奈川'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="s1">'新潟'</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="s1">'富山'</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="s1">'石川'</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="s1">'福井'</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="s1">'山梨'</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s1">'長野'</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="s1">'岐阜'</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="s1">'静岡'</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="s1">'愛知'</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="s1">'三重'</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="s1">'滋賀'</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="s1">'京都'</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">27</span><span class="p">,</span> <span class="s1">'大阪'</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">28</span><span class="p">,</span> <span class="s1">'兵庫'</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="s1">'奈良'</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">'和歌山'</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="s1">'鳥取'</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="s1">'島根'</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="s1">'岡山'</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="s1">'広島'</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="s1">'山口'</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="s1">'徳島'</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="s1">'香川'</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="s1">'愛媛'</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="s1">'高知'</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="s1">'福岡'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">41</span><span class="p">,</span> <span class="s1">'佐賀'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s1">'長崎'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">43</span><span class="p">,</span> <span class="s1">'熊本'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="s1">'大分'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">'宮崎'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">46</span><span class="p">,</span> <span class="s1">'鹿児島'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="s1">'沖縄'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</code></pre></div></div>

<p>元々のサンプルアプリケーションでは、以下のようなDDLになっていましたが、</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'北海道'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'青森'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">PREFECTURE</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">'岩手'</span><span class="p">);</span>
<span class="err">・</span>
<span class="err">・</span>
<span class="err">・</span>
</code></pre></div></div>

<p>今回の拡張により、<code class="language-plaintext highlighter-rouge">PREFECTURE</code>テーブルに<code class="language-plaintext highlighter-rouge">都道府県エリアID</code>カラムが追加され、<code class="language-plaintext highlighter-rouge">PREFECTUREAREA</code>テーブルが新たに追加されます。</p>

<p>これで、DDLの編集は完了です！</p>

<p>ここまでのサンプルアプリケーションの完成形は以下に配置しています。<br />
必要があれば、<code class="language-plaintext highlighter-rouge">git clone</code>してください。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/oracle-japan/helidon-handson-complete.git
</code></pre></div></div>

<h3 id="3-6-拡張したサンプルアプリケーションを動かしてみよう">3-6. 拡張したサンプルアプリケーションを動かしてみよう</h3>

<p>それでは、拡張したサンプルアプリケーションを動かしてみましょう。<br />
プロジェクト直下で以下のコマンドを実行します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn package
</code></pre></div></div>

<p>以下のようなメッセージが表示されればビルド完了です。(一部抜粋しています)</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] BUILD SUCCESS
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] Total <span class="nb">time</span>:  41.637 s
<span class="o">[</span>INFO] Finished at: 2021-04-23T11:20:18+09:00
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
</code></pre></div></div>

<p>targetディレクトリが生成され、その直下に<code class="language-plaintext highlighter-rouge">helidon-handson.jar</code>が作成されています。</p>

<p>それでは、jarファイルを起動してみましょう。<br />
実行場所はプロジェクト直下とします。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java <span class="nt">-jar</span> target/helidon-handson.jar 
</code></pre></div></div>

<p>まずは、都道府県エリア情報を取得してみます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/area
</code></pre></div></div>

<p>このような結果が返却されれば成功です。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[{</span><span class="s2">"id"</span>:1, <span class="s2">"area"</span>:<span class="s2">"北海道"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"id"</span>:2, <span class="s2">"area"</span>:<span class="s2">"東北"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"id"</span>:3, <span class="s2">"area"</span>:<span class="s2">"南関東"</span><span class="o">}</span>....]
</code></pre></div></div>

<p>次に、全都道府県情報を取得してみましょう。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture
</code></pre></div></div>

<p>このような結果が返却されれば成功です。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[{</span><span class="s2">"id"</span>:1, <span class="s2">"area"</span>:<span class="s2">"北海道"</span>, <span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"id"</span>:2, <span class="s2">"area"</span>:<span class="s2">"東北"</span>, <span class="s2">"name"</span>:<span class="s2">"青森"</span><span class="o">}</span>....]
</code></pre></div></div>

<p>次にID(主キー)指定で検索します。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>このように結果が返却されます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span><span class="s2">"id"</span>:1, <span class="s2">"area"</span>:<span class="s2">"北海道"</span>, <span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>
</code></pre></div></div>

<p>次に都道府県名指定で検索します。<br />
以下は北海道をGETするURLで、<code class="language-plaintext highlighter-rouge">%E5%8C%97%E6%B5%B7%E9%81%93</code>は北海道をURLエンコードした文字列です。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture/name/%E5%8C%97%E6%B5%B7%E9%81%93
</code></pre></div></div>

<p>このように結果が返却されます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span><span class="s2">"id"</span>:1, <span class="s2">"area"</span>:<span class="s2">"北海道"</span>, <span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>
</code></pre></div></div>

<p>次に北海道のデータを削除してみます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> DELETE http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>削除されたことを確認してみましょう</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-X</span> GET http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>以下のような結果が返却されます。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 404 Not Found
Content-Type: text/plain
Date: Wed, 28 Apr 2021 17:56:25 +0900
transfer-encoding: chunked
connection: keep-alive

No handler found <span class="k">for </span>path: /prefecture/1
</code></pre></div></div>

<p>これは、<code class="language-plaintext highlighter-rouge">/prefecture/1</code>というリソースが存在しないことを示します。</p>

<p>最後に北海道のデータを再登録します。<br />
POSTするデータは<a href="#2-5-サンプルアプリケーションの動作を確認しよう">2-5. サンプルアプリケーションの動作を確認しよう</a>の時とは異なります。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s1">'{"id":1, "area":"北海道", "name":"北海道"}'</span> http://localhost:8080/prefecture 
</code></pre></div></div>

<p>再登録されたことを確認しましょう。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/prefecture/1
</code></pre></div></div>

<p>ちゃんと再登録されていますね。</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span><span class="s2">"id"</span>:1, <span class="s2">"area"</span>:<span class="s2">"北海道"</span>, <span class="s2">"name"</span>:<span class="s2">"北海道"</span><span class="o">}</span>
</code></pre></div></div>

<p>以上で、サンプルアプリケーションの動作確認は完了です！</p>

<h2 id="まとめ">まとめ</h2>
<p>いかがでしたでしょうか。</p>

<p>このようにHelidonでは、簡単にRESTfulアプリケーション、そしてデータベースとの接続を実現することができます。<br />
他にもさまざまな機能やインタフェースが実装されているので、ぜひいろいろ触って遊んでみてください！！</p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新日時:</strong> <time class="dt-published" datetime="2024-08-02T00:22:37+09:00">August 2, 2024</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">共有</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Helidon%28MP%29%E3%82%92%E5%A7%8B%E3%82%81%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86%20https%3A%2F%2Foracle-japan.github.io%2Focitutorials%2Fcloud-native%2Fhelidon-mp-for-beginners%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Foracle-japan.github.io%2Focitutorials%2Fcloud-native%2Fhelidon-mp-for-beginners%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://oracle-japan.github.io/ocitutorials/cloud-native/helidon-mp-for-beginners/" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="共有 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/ocitutorials/cloud-native/osm-for-beginners/" class="pagination--pager" title="OCI Service Meshを使ってサービスメッシュ環境を作ろう
">前へ</a>
    
    
      <a href="/ocitutorials/cloud-native/helidon-se-for-beginners/" class="pagination--pager" title="Helidon(SE)を始めてみよう
">次へ</a>
    
  </nav>

    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">関連記事</h2>
  <div class="grid__wrapper">
    
  </div>
</div>

  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="検索キーワードを入力してください..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>フォロー</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/#ocijp" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/oracle-japan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/ocitutorials/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 <a href="https://oracle-japan.github.io">Oracle Cloud Infrastructure チュートリアル</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/ocitutorials/assets/js/main.min.js"></script>




<script src="/ocitutorials/assets/js/lunr/lunr.min.js"></script>
<script src="/ocitutorials/assets/js/lunr/lunr-store.js"></script>
<script src="/ocitutorials/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6W7FEC5CEH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6W7FEC5CEH', { 'anonymize_ip': false});
</script>







  
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
  
    <script src="/ocitutorials/assets/js/clipboardrouge.js"></script>
  
    <script src="/ocitutorials/assets/js/tabs.js"></script>
  
    <script src="/ocitutorials/assets/js/sidebar.js"></script>
  


  </body>
</html>
